(window.webpackJsonp=window.webpackJsonp||[]).push([["index"],{"3fe3":function(n,e){n.exports='# webpckä¸devserverçš„publicPathã€pathã€contentBase\n\n### é¡¹ç›®ç›®å½•\n\n```\ntest\n    |--assets\n        |--1.jpg\n    |--index.html\n    |--index.js\n    |--webpack.config.js\n    \n```\n### 1ã€ä½¿ç”¨webpack-dev-serveræ„å»ºæ‰“åŒ…å‡ºjsï¼Œé€šè¿‡æ ¹ç›®å½•ä¸‹çš„index.htmlæ‰‹åŠ¨å¼•å…¥æ‰“åŒ…åçš„æ–‡ä»¶\n\nï¼ˆ1ï¼‰æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š\n```\n\x3c!--index.html--\x3e\n<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>Document</title>\n    <style>\n        .img {\n            width: 100px;\n        }\n    </style>\n</head>\n<body>\n    <div class="app">\n        <div class="test-1">test</div>\n        <div class="img-1">\n            <img class="img" src="" alt="">\n        </div>\n        <div class="img-2">\n            <img class="img" src="imgs/1.jpg" alt="">\n        </div>\n    </div>\n</body>\n<script src="/js/bundle.js"><\/script>\n</html>\n```\n\n```\n// index.js\nconsole.log(\'----index.js\')\nvar img = require(\'./assets/1.jpg\');\ndocument.querySelector(\'.img\').setAttribute(\'src\', img)\nconsole.log(\'----img\', img)\n```\n\n```\n// webpack.config.js\nconst path = require(\'path\');\n\nmodule.exports = {\n    entry: \'./index.js\',\n    output:{\n        filename: \'js/bundle.js\',\n        path: path.resolve(__dirname, \'dist\'),\n    },\n    module: {\n        rules: [\n            {\n                test: /\\.(png|svg|jpg|jpeg|gif)$/,\n                // ä½¿ç”¨url-loader, å®ƒæ¥å—ä¸€ä¸ªlimitå‚æ•°ï¼Œå•ä½byteï¼›\n                // å½“æ–‡ä»¶å°äºlimitï¼šå°†æ–‡ä»¶è½¬ä¸ºData URIæ ¼å¼å†…è”åˆ°å¼•ç”¨çš„åœ°æ–¹\n                // å½“æ–‡ä»¶å¤§äºlimitï¼šå°†è°ƒç”¨ file-loader, æŠŠæ–‡ä»¶å¤åˆ¶åˆ°è¾“å‡ºç›®å½•ï¼Œå¹¶å°†å¼•ç”¨çš„æ–‡ä»¶è·¯å¾„æ”¹å†™æˆè¾“å‡ºåçš„è·¯å¾„\n                use: [\n                    {\n                        loader: \'url-loader\',\n                        options: {\n                            limit: 20 * 1024,\n                            // åˆ†ç¦»å›¾ç‰‡è‡³imgsæ–‡ä»¶å¤¹\n                            name: "imgs/[name].[ext]",\n                        }\n                    },\n                ]\n            },\n        ]\n    },\n}\n```\n\npackage.jsonä¸­æ·»åŠ ä¸¤æ¡å‘½ä»¤ï¼š\n```\n"scripts": {\n    "start": "webpack-dev-server --hot --progress --config webpack.config.js",\n    "build": "webpack --progress --config webpack.config.js"\n},\n```\n\næ‰§è¡Œnpm startï¼šé¡µé¢æ­£å¸¸åŠ è½½ï¼Œhtmlä¸­å¯ä»¥æ­£ç¡®åŠ è½½å›¾ç‰‡å’Œjsã€‚å› ä¸ºé€šè¿‡webpack-dev-serveræ‰“åŒ…çš„æ–‡ä»¶é»˜è®¤ä¼šå­˜æ”¾åˆ°å†…å­˜ä¸­ï¼Œè®¿é—®è·¯å¾„å°±åœ¨æ ¹ç›®å½•ä¸­ï¼›\n\nï¼ˆ2ï¼‰ä¿®æ”¹ï¼ˆ1ï¼‰ä¸­çš„webpack.config.js\n\n```\n...\noutput:{\n    filename: \'js/bundle.js\',\n    path: path.resolve(__dirname, \'dist\'),\n    publicPath: \'dist\' // æ·»åŠ è¿™ä¸€è¡Œ\n},\n...\n```\næ‰§è¡Œnpm startï¼šé¡µé¢æ­£å¸¸åŠ è½½ï¼Œä½†æ˜¯æ‰“å¼€æ§åˆ¶å°å‘ç°htmlæ— æ³•åŠ è½½åˆ°è½½å›¾ç‰‡å’Œjsã€‚å› ä¸ºé€šè¿‡webpack-dev-serveræ‰“åŒ…çš„æ–‡ä»¶æ­¤æ—¶æ”¾åˆ°äº†å†…å­˜ä¸­çš„/dist/ç›®å½•ä¸‹ï¼›\n\nä¿®æ”¹index.htmlä¸­jsçš„å¼•å…¥è·¯å¾„å³å¯æˆåŠŸåŠ è½½ï¼Œæ­¤æ—¶é€šè¿‡index.jså¼•å…¥çš„å›¾ç‰‡ä¹Ÿè¢«æˆåŠŸåŠ è½½ï¼Œå¹¶ä¸”å›¾ç‰‡å¼•å…¥è·¯å¾„å˜æˆäº†`<img class="img" src="/dist/imgs/1.jpg" alt="">`\n```\n<script src="/dist/js/bundle.js"><\/script>\n```\n\nç»“è®ºï¼šoutput.publicPathä¼šæ”¹å˜webpack-dev-serveræ‰“åŒ…æ–‡ä»¶å­˜æ”¾çš„ä½ç½®ï¼ŒåŒæ—¶ä¼šæ”¹å˜èµ„æºå¼•å…¥è·¯å¾„ï¼ˆå¢åŠ å‰ç¼€ï¼‰\n\nï¼ˆ3ï¼‰åœ¨ï¼ˆ1ï¼‰çš„åŸºç¡€ä¸Šä¿®æ”¹webpack.config.js\n\n```\ndevServer:{\n    publicPath: \'/dist/\'\n},\n```\næ‰§è¡Œnpm startï¼šé¡µé¢æ­£å¸¸åŠ è½½ï¼Œä½†æ˜¯æ‰“å¼€æ§åˆ¶å°å‘ç°htmlæ— æ³•åŠ è½½åˆ°è½½å›¾ç‰‡å’Œjsã€‚ä¸ï¼ˆ2ï¼‰ä¸€æ ·ä¿®æ”¹index.htmlä¸­jsçš„å¼•å…¥è·¯å¾„ï¼Œå¯ä»¥æˆåŠŸåŠ è½½åˆ°index.jsï¼Œä½†æ˜¯index.jsä¸­å¼•å…¥çš„å›¾ç‰‡æ— æ³•æˆåŠŸåŠ è½½ï¼Œå› ä¸ºæ­¤æ—¶å›¾ç‰‡å¼•å…¥è·¯å¾„ä»ç„¶ä¸º"imgs/1.jpg"ï¼Œæ­£ç¡®çš„å¼•å…¥è·¯å¾„åº”è¯¥æ˜¯â€œ/dist/imgs/1.jpgâ€\n\nç»“è®ºï¼šdevServer.publicPathä¼šæ”¹å˜webpack-dev-serveræ‰“åŒ…æ–‡ä»¶å­˜æ”¾çš„ä½ç½®ï¼Œä½†æ˜¯ä¸ä¼šæ”¹å˜èµ„æºå¼•å…¥è·¯å¾„ï¼›äº‹å®ä¸Šï¼Œwebpack-dev-serveræ‰“åŒ…æ–‡ä»¶å­˜æ”¾çš„ä½ç½®ä¼šä¼˜å…ˆä½¿ç”¨devServer.publicPathï¼Œæ‰¾ä¸åˆ°æ—¶å†ä½¿ç”¨output.publicPathï¼Œéƒ½æ‰¾ä¸åˆ°å°±é»˜è®¤æ ¹ç›®å½•\n\nï¼ˆ4ï¼‰åŒæ—¶è®¾ç½®devServerå’Œoutputçš„publicPathä¸º\'/dist/\'ï¼Œåœ¨è¿™ä¸ªæ¡ˆä¾‹é‡Œè¡¨ç°å’Œï¼ˆ2ï¼‰ä¸€è‡´ï¼›\n\n\n### 2ã€ä½¿ç”¨html-webpack-pluginæ’ä»¶è‡ªåŠ¨ç”Ÿæˆhtmlï¼ˆæ­¤htmlä¼šè‡ªåŠ¨å¼•å…¥æ‰“åŒ…åçš„èµ„æºï¼‰ï¼š\n\nï¼ˆ1ï¼‰\n```\n\x3c!--index.html--\x3e\n<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>Document</title>\n    <style>\n        .img {\n            width: 100px;\n        }\n    </style>\n</head>\n<body>\n    <div class="app">\n        <div class="test-1">test</div>\n        <div class="img-1">\n            <img class="img" src="" alt="">\n        </div>\n        <div class="img-2">\n            <img class="img" src="imgs/1.jpg" alt="">\n        </div>\n    </div>\n</body>\n</html>\n```\n\n```\n// webpack.config.js\nconst path = require(\'path\');\nconst HtmlWebpackPlugin = require(\'html-webpack-plugin\');\n\nmodule.exports = {\n    entry: \'./index.js\',\n    output:{\n        filename: \'js/bundle.js\',\n        path: path.resolve(__dirname, \'dist\'),\n    },\n    devServer: {\n    },\n    module: {\n        rules: [\n            {\n                test: /\\.(png|svg|jpg|jpeg|gif)$/,\n                // ä½¿ç”¨url-loader, å®ƒæ¥å—ä¸€ä¸ªlimitå‚æ•°ï¼Œå•ä½byteï¼›\n                // å½“æ–‡ä»¶å°äºlimitï¼šå°†æ–‡ä»¶è½¬ä¸ºData URIæ ¼å¼å†…è”åˆ°å¼•ç”¨çš„åœ°æ–¹\n                // å½“æ–‡ä»¶å¤§äºlimitï¼šå°†è°ƒç”¨ file-loader, æŠŠæ–‡ä»¶å¤åˆ¶åˆ°è¾“å‡ºç›®å½•ï¼Œå¹¶å°†å¼•ç”¨çš„æ–‡ä»¶è·¯å¾„æ”¹å†™æˆè¾“å‡ºåçš„è·¯å¾„\n                use: [\n                    {\n                        loader: \'url-loader\',\n                        options: {\n                            limit: 20 * 1024,\n                            // åˆ†ç¦»å›¾ç‰‡è‡³imgsæ–‡ä»¶å¤¹\n                            name: "imgs/[name].[ext]",\n                        }\n                    },\n                ]\n            },\n        ]\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            template: path.resolve(__dirname, \'./index.html\'),\n        }),\n    ]\n}\n```\n\nå…¶ä»–æ–‡ä»¶ä¿æŒå’Œ1åˆå§‹åŒ–ä¸€è‡´ã€‚\n\næ‰§è¡Œnpm startï¼šé¡µé¢æ­£å¸¸åŠ è½½ï¼Œé€šè¿‡æ§åˆ¶å°æŸ¥çœ‹æ­¤æ—¶çš„index.htmlï¼Œå‘ç°æ­¤æ—¶html-webpack-pluginå¸®æˆ‘ä»¬å¼•å…¥çš„jsè·¯å¾„æ˜¯â€œjs/bundle.jsâ€ï¼Œimgçš„è·¯å¾„æ˜¯â€œimgs/1.jpgâ€ï¼›æ­¤æ—¶webpack-dev-serveræ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶è¿˜æ˜¯å­˜æ”¾åœ¨æ ¹ç›®å½•ä¸‹ï¼›\n\næ‰§è¡Œnpm run build: å‘ç°ç”Ÿæˆäº†distæ–‡ä»¶å¤¹ï¼Œç›®å½•ç»“æœå¦‚ä¸‹ï¼Œå¹¶ä¸”ç”Ÿæˆçš„index.htmlåŠ è½½jså’ŒjsåŠ è½½å›¾ç‰‡çš„è·¯å¾„éƒ½å’Œnpm startæ—¶ä¸€è‡´\n```\ndist\n    |--imgs\n        |--1.jpg\n    |--js\n        |--bundle.js\n    |--index.html\n```\n\nç»“è®ºï¼šoutput.pathä¼šå½±å“webpackæ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶çš„å­˜æ”¾ä½ç½®ï¼Œå…·ä½“æ˜¯ï¼šoutput.path + name/filenameè·¯å¾„ï¼Œæ¯”å¦‚output.filenameä½¿ç”¨äº†â€œjs/â€å¯¼è‡´ ç”Ÿæˆçš„bundle.jsä¼šå­˜æ”¾åœ¨/dist/js/ä¸‹ï¼›åŒæ ·å¦‚æœåœ¨HtmlWebpackPluginé…ç½®ä¸­æ·»åŠ filenameï¼Œä¹Ÿä¼šæ”¹å˜ç”Ÿæˆçš„index.htmlçš„ä½ç½®(æµ‹è¯•å‘ç°åªæœ‰ä½¿ç”¨webpackæ‰“åŒ…æ—¶æ‰æœ‰æ•ˆï¼Œä½¿ç”¨webpack-dev-serveræ‰“åŒ…æ— æ•ˆï¼Œå³ç”Ÿäº§ç¯å¢ƒæ‰èƒ½ç”Ÿæ•ˆ)\n\n```\nnew HtmlWebpackPlugin({\n    template: path.resolve(__dirname, \'./temp/index.html\'),\n    filename: \'../index.html\'\n}),\n```\n\nï¼ˆ2ï¼‰ä¿®æ”¹ï¼ˆ1ï¼‰ä¸­çš„webpack.config.js\n```\n...\noutput:{\n    filename: \'js/bundle.js\',\n    path: path.resolve(__dirname, \'dist\'),\n    publicPath: \'/dist/\' // æ·»åŠ è¿™ä¸€è¡Œ\n},\n...\n```\n\nnpm startï¼šå‘ç°æ­¤æ—¶åŠ è½½çš„é¡µé¢æ²¡æœ‰åŠ è½½jså’Œå›¾ç‰‡ï¼Œå› ä¸ºæ­¤æ—¶æ‰“åŒ…æ–‡ä»¶è¢«æ”¾åˆ°äº†/dist/ä¸‹ï¼Œæ‰“å¼€http://localhost:8080/dist/å¯ä»¥çœ‹åˆ°æ­£å¸¸åŠ è½½çš„é¡µé¢ï¼Œjså’Œå›¾ç‰‡çš„å¼•å…¥è·¯å¾„éƒ½æ˜¯\'/dist/\'å¼€å¤´;\n\nnpm build: ç”Ÿæˆçš„index.htmlå’Œnpm startæ—¶æ‰“å¼€http://localhost:8080/dist/çœ‹åˆ°çš„htmlä¸€æ ·ï¼ŒåŠ è½½èµ„æºè·¯å¾„ä¹Ÿä¸€è‡´ï¼Œä½†æ˜¯ç”±äºç”Ÿæˆçš„htmlä¸­ç›´æ¥ä½¿ç”¨/dist/js/bundle.jsåŠ è½½jsï¼Œå¯¼è‡´æ— æ³•æ­£ç¡®åŠ è½½\n\n\n### 3ã€æ€»ç»“ï¼š\n\nï¼ˆ1ï¼‰output.pathï¼šæŒ‡ç¤ºè¾“å‡ºçš„ç›®å½•ï¼Œå¯¹åº”ä¸€ä¸ªç»å¯¹è·¯å¾„ã€‚å†³å®šäº†æ‰“åŒ…åçš„èµ„æºï¼ˆjs/css/imgç­‰ï¼‰çš„å­˜æ”¾è·¯å¾„ï¼ˆå‰ç¼€ï¼‰ï¼Œé€šè¿‡ä¿®æ”¹output.filenameæˆ–è€…loaderçš„nameå¯ä»¥ç»§ç»­ä¿®æ”¹è·¯å¾„ï¼›html-webpack-pluginåªæœ‰åœ¨ä½¿ç”¨webpackæ‰“åŒ…æ—¶å¯¹filenameæ·»åŠ è·¯å¾„æ‰æœ‰æ•ˆï¼ˆæ¯”å¦‚\'../index.html\'ï¼‰ï¼Œåœ¨devServerä¸‹æ˜¯æ— æ•ˆçš„ï¼Œä¼šå¯¼è‡´æ‰¾ä¸åˆ°ç”Ÿæˆçš„htmlï¼›\n\nï¼ˆ2ï¼‰output.publicPathï¼šä¼šå½±å“å¼€å‘ç¯å¢ƒä¸‹devServeræ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶çš„å­˜æ”¾ä½ç½®ï¼Œä»¥åŠå¼€å‘å’Œç”Ÿæˆç¯å¢ƒä¸‹èµ„æºå¼•å…¥è·¯å¾„ï¼ˆä¼šç»™è·¯å¾„åŠ å‰ç¼€ï¼Œå‰ç¼€å°±æ˜¯output.publicPathçš„å€¼ï¼‰ï¼›\n\nï¼ˆ3ï¼‰devServer.publicPathï¼šä¼šå½±å“å¼€å‘ç¯å¢ƒä¸‹devServeræ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶çš„å­˜æ”¾ä½ç½®ï¼Œä½†æ˜¯ä¸ä¼šå½±å“èµ„æºå¼•å…¥è·¯å¾„ï¼›devServer.publicPathä¼˜å…ˆçº§é«˜äºoutput.publicPathï¼›\n\nï¼ˆ4ï¼‰devServer.contentBaseï¼šé€šä¿—ç‚¹æ¥è®²ï¼Œå®ƒæŒ‡å®šäº†æœ¬åœ°å®é™…å­˜åœ¨çš„æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼ˆä¸æ˜¯ç”±devServeræ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶åœ¨å†…å­˜ä¸­ï¼‰ï¼›æ¯”å¦‚è®¾ç½®äº†contentBase: path.resolve(__dirname, \'./public\')ï¼Œåˆ™\nhttp://localhost:8080ä¼šç›´æ¥æŒ‡å‘publicæ–‡ä»¶å¤¹ï¼Œä½†æ˜¯å¦‚æœæ­¤æ—¶devServeræ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶æ”¾åœ¨äº†é»˜è®¤çš„æ ¹ç›®å½•ä¸‹ï¼Œhttp://localhost:8080ä»ç„¶ä¼šæŒ‡å‘devServerç”Ÿæˆçš„æ–‡ä»¶ï¼Œå¿…é¡»è®©devServerç”Ÿæˆçš„æ–‡ä»¶æŒ‡å‘åˆ«çš„åœ°æ–¹æ‰èƒ½ä½¿å¾—http://localhost:8080æ¥æŒ‡å‘publicæ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚ï¼š\n\n```\noutput:{\n    filename: \'js/bundle.js\',\n    path: path.resolve(__dirname, \'./dist\'),\n    publicPath: "/dist/"\n},\ndevServer:{\n    publicPath: \'/dist/\',\n    contentBase: path.resolve(__dirname, \'./public\')\n},\n```\n\næ­¤æ—¶devServerç”Ÿæˆçš„æ–‡ä»¶éƒ½æ”¾åœ¨/distä¸‹ï¼Œå¯ä»¥é€šè¿‡http://localhost:8080/dist/è®¿é—®ï¼›http://localhost:8080ä¼šç›´æ¥å®šä½åˆ°publicæ–‡ä»¶å¤¹ä¸‹é¢çš„index.html.\n\nå¯ä»¥å‚è€ƒ[é…ç½®DevServer](https://segmentfault.com/a/1190000013396072)\n\nps: devServerè¿è¡Œä¸‹æ‰€ç¼–è¯‘çš„æ–‡ä»¶éƒ½æ˜¯å­˜äºå†…å­˜ä¸­ï¼Œä¸ä¼šæ”¹å˜æœ¬åœ°æ–‡ä»¶ï¼›\n\n'},"5L5T":function(n,e){n.exports="# Node.js+Express+MongoDB å»ºç«™å®ä¾‹ï¼ˆ1ï¼‰-- ç½‘ç«™åˆå§‹åŒ–\n\n> é¡¹ç›®åœ°å€ï¼šhttps://github.com/jiaoyanlin/myNodeProject\n\n> ä½œä¸ºä¸€ä¸ªå‰ç«¯å°èœé¸Ÿï¼Œå› ä¸ºæƒ³å­¦nodeï¼Œæ‰€ä»¥ç»“åˆç½‘ä¸Šå…¶ä»–é¡¹ç›®è‡ªå·±åŠ¨æ‰‹æ­å»ºåšä¸€ä¸ªå‰åç«¯å®Œå…¨åˆ†ç¦»çš„é¡¹ç›®ï¼Œæ¨¡æ‹Ÿå®é™…å·¥ä½œä¸­å‰åç«¯çš„å·¥ä½œé…åˆã€‚å¦‚æœ‰ä¸è¶³ï¼Œè¯·å¤šæŒ‡æ•™ã€‚\n\n### æœ¬é¡¹ç›®ä¸ºç³»åˆ—åšå®¢ï¼Œç›®å‰æœ‰ä»¥ä¸‹ç³»åˆ—\n\n-  Node.js+Express+MongoDB å»ºç«™å®ä¾‹ï¼ˆ1ï¼‰-- ç½‘ç«™åˆå§‹åŒ–\n-  [Node.js+Express+MongoDB å»ºç«™å®ä¾‹ï¼ˆ2ï¼‰-- ç™»å½•æ¨¡å—]\n-  [Node.js+Express+MongoDB å»ºç«™å®ä¾‹ï¼ˆ3ï¼‰-- ä¸Šä¼ å›¾ç‰‡åŠå…¶ä»–æ¨¡å—]\n-  Node.js+Express+MongoDB å»ºç«™å®ä¾‹ï¼ˆ4ï¼‰-- reactæ„å»ºå‰ç«¯é¡µé¢å¯¹æ¥æ¥å£ï¼š[é¡¹ç›®æºç ](https://github.com/jiaoyanlin/react-background-system)\n\n\n### ä¸€ã€æºç è¿è¡Œ\n\nå¯åˆ°GitHubä¸Šä¸‹è½½æºé¡¹ç›®ï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹æ­¥éª¤æ­å»ºæˆ‘å·²ç»å†™å¥½çš„é¡¹ç›®è¿›è¡Œä½“éªŒã€‚ä»æœ¬æ–‡ç¬¬äºŒæ­¥å¼€å§‹ä¸ºå¤§å®¶è®²è§£æ•´ä¸ªé¡¹ç›®çš„è¯¦ç»†å®ç°æ­¥éª¤ã€‚\n   \n```javascript\n\nnpm install\n\nnpm start æˆ– supervisor bin/wwwï¼ˆå¿…é¡»æå‰å®‰è£…supervisorï¼‰\n\n```\nå¤‡æ³¨ï¼šæœ¬é¡¹ç›®å»ºç«‹åœ¨æœ¬åœ°å·²ç»æ­å»ºå¥½äº†nodejså’Œmongodbçš„åŸºç¡€ä¸Šï¼ˆæ­å»ºæ–¹æ³•è¯·è‡ªè¡Œç™¾åº¦ï¼‰ã€‚\n\n### äºŒã€ä»¥ä¸‹ç”¨æ¥è®°å½•é¡¹ç›®ä»å¤´å¼€å§‹æ­å»ºçš„æµç¨‹\n\n#### åˆå§‹åŒ–é¡¹ç›®\n\n1. å®‰è£…Express\n\n    `npm install -g express`\n    \n2. å®‰è£…Expresså‘½ä»¤è¡Œå·¥å…·\n\n    `npm install -g express-generator`\n    \n3. ä½¿ç”¨expressåˆå§‹åŒ–é¡¹ç›®ï¼šè¿™é‡Œä½¿ç”¨ejsæ¨¡æ¿ï¼Œé»˜è®¤ä¸ºjadeæ¨¡æ¿\n\n    `express -e myproject`\n\n    æç¤ºï¼šæ­¤æ—¶å°†åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºmyprojectå­ç›®å½•ï¼Œå¹¶è‡ªåŠ¨æ­å»ºå…¶ä»–ç›¸å…³ç›®å½•åŠæ–‡ä»¶ã€‚\n    \n    `cd myproject` è¿›å…¥é¡¹ç›®ç›®å½•\n    \n    `npm install` å®‰è£…ç›¸å…³ä¾èµ–\n    \n4. è¿è¡Œé¡¹ç›®\n    \n    `SET DEBUG=myproject:* & npm start`\n\n    æ­¤æ—¶åœ¨æµè§ˆå™¨ä¸Šè¾“å…¥http:localhost:3000å°†èƒ½çœ‹åˆ°ç›¸å…³é¡µé¢\n    \n5. è‹¥ä¸æƒ³æ¯æ¬¡ä¿®æ”¹ä»£ç åéƒ½è¦é‡å¯æœåŠ¡å™¨ï¼Œå¯ä»¥å®‰è£…å¹¶ä½¿ç”¨supervisorå·¥å…·å®ç°ä»£ç ä¿®æ”¹å’Œè‡ªå¯åŠ¨\n\n    `npm install -g supervisor`\n    \n    `supervisor bin/www` \n    \n    æç¤ºï¼šexpress 4.xæŠŠåŸæ¥ç”¨äºé¡¹ç›®å¯åŠ¨ä»£ç ä¹Ÿè¢«ç§»åˆ°./bin/wwwçš„æ–‡ä»¶ï¼Œæ‰€ä»¥ç›´æ¥è¿è¡Œ supervisor bin/wwwå°±å¯ä»¥äº†ï¼ˆæ›´æ—©ç‰ˆæœ¬ä½¿ç”¨ `supervisor  app.js`ï¼‰\n\n#### å®æˆ˜çƒ­èº«ï¼ˆå®ç°åŸºç¡€çš„getå’Œpostçš„ajaxè¯·æ±‚ï¼‰\n\n1. å®‰è£…mongodbæ¨¡å—ï¼ˆé¡»å…ˆåœ¨ç”µè„‘ä¸Šå®‰è£…è¿‡mongodbå¹¶ä¸”å¯åŠ¨æœåŠ¡ï¼‰\n\n    `npm install mongodb --save`\n    \n    ps: \"crypto\": \"^1.0.1\",æœªç¡®å®šæ˜¯å¦éœ€è¦å®‰è£…ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ\n    \n2. ä¿®æ”¹/routes/index.jsï¼Œæ–°å¢ä¸¤ä¸ªæ¥å£\n\n    ```javascript\n    var express = require('express');\n    var router = express.Router();\n    \n    // æˆ‘æ–°å¢çš„apiï¼Œç”¨äºè¿æ¥åˆ°æ•°æ®åº“\n    var api = require('./api.js')\n    \n    /* GET home page. */\n    router.get('/', function(req, res, next) {\n      res.render('index', { title: 'Express' });\n    });\n    \n    // æˆ‘æ–°å¢çš„æµ‹è¯•æ¥å£\n    router.get('/api/test', api.test)\n    \n    router.post('/api/addtest', api.addtest)\n    \n    module.exports = router;\n    \n    ```\n    \n3. æ–°å¢æ–‡ä»¶1 /routes/api.js\n\n    ```javascript\n    const db = require('./db.js')\n    \n    exports.test = function(req, res, next) {\n      db.find('mytest', { \"query\": {} }, function(err, result) {\n        if (err) {\n          return res.json({\n            \"code\": 404,\n            \"message\": \"æ•°æ®æŸ¥è¯¢å¤±è´¥\",\n            \"result\": []\n          })\n        }\n        return res.json({\n            \"code\": 200,\n            \"message\": \"æ•°æ®è·å–æˆåŠŸ\",\n            \"result\": result,\n            \"total\": result.length\n        })\n      })\n    }\n    \n    exports.addtest = function(req, res, next) {\n      let newData = {\n        \"title\": req.body.title,\n        \"content\": req.body.content\n      };\n      // æ’å…¥åˆ°æ•°æ®åº“\n      db.insertOne('mytest', newData, function(err, result) {\n        if (err) {\n          return res.json({\n            \"code\": 401,\n            \"message\": \"testæ–°å¢å¤±è´¥\"\n          })\n        }\n        return res.json({\n          \"code\": 200,\n          \"message\": \"testæ–°å¢æˆåŠŸ\"\n        })\n      })\n    }\n    ```\n    æ–°å¢æ–‡ä»¶2 /routes/db.jsï¼ˆå°è£…äº†å¯¹æ•°æ®åº“çš„å¢åˆ æŸ¥æ”¹çš„å‡½æ•°ï¼‰\n    ```javascript\n    const MongoClient = require('mongodb').MongoClient\n    const settings = require('./settings')\n    // é“¾æ¥æ•°æ®åº“ å¦‚æœæ²¡æœ‰è‡ªåŠ¨åˆ›å»º\n    function _connectDB(callback) {\n      let url = settings.dbUrl\n      MongoClient.connect(url, function(err, db) {\n        if (err) {\n          callback(err, null)\n          return\n        }\n        // æ•°æ®åº“é“¾æ¥æˆåŠŸæ‰§è¡Œå›æ‰\n        callback(err, db)\n      })\n    }\n    \n    // æ’å…¥æ•°æ®\n    exports.insertOne = function(collectionName, json, callback) {\n      _connectDB(function(err, db) {\n        db.collection(collectionName).insertOne(json, function(err, result) {\n          if (err) {\n            callback(err, null)\n            db.close()\n            return\n          }\n          callback(err, result)\n          db.close()\n        })\n      })\n    }\n    \n    // æŸ¥æ‰¾æ•°æ®\n    exports.find = function(collectionName, queryJson, callback) {\n      _connectDB(function(err, db) {\n        let json = queryJson.query || {},\n          limit = Number(queryJson.limit) || 0,\n          count = Number(queryJson.page) - 1,\n          sort = queryJson.sort || {}\n        // é¡µæ•°ä¸º0æˆ–è€…1éƒ½æ˜¾ç¤ºå‰limitæ¡æ•°æ®\n        if (count <= 0) {\n          count = 0\n        } else {\n          count = count * limit\n        }\n    \n        let cursor = db.collection(collectionName).find(json).limit(limit).skip(count).sort(sort)\n        cursor.toArray(function(err, results) {\n          if (err) {\n            callback(err, null)\n            db.close()\n            return\n          }\n          callback(err, results)\n          db.close()\n        })\n      })\n    }\n    \n    // åˆ é™¤æ•°æ®\n    exports.deleteMany = function(collectionName, json, callback) {\n      _connectDB(function(err, db) {\n        db.collection(collectionName).deleteMany(json, function(err, results) {\n          if (err) {\n            callback(err, null)\n            db.close()\n            return\n          }\n          callback(err, results)\n          db.close()\n        })\n      })\n    }\n    \n    // ä¿®æ”¹æ•°æ®\n    exports.updateMany = function(collectionName, jsonOld, jsonNew, callback) {\n      _connectDB(function(err, db) {\n        db.collection(collectionName).updateMany(\n          jsonOld, {\n            $set: jsonNew,\n            $currentDate: { \"lastModified\": false }\n          },\n          function(err, results) {\n            if (err) {\n              callback(err, null)\n              db.close()\n              return\n            }\n            callback(err, results)\n            db.close()\n          })\n      })\n    }\n    ```\n    æ–°å¢æ–‡ä»¶3 /routes/settings.jsï¼ˆmongodbæ•°æ®åº“ç›¸å…³è®¾ç½®ï¼‰\n    ```javascript\n    let nickname = 'myproject1'\n    module.exports = {\n        dbUrl:'mongodb://localhost:27017/myproject1',\n        nickname:nickname\n    }\n    ```\n    åˆ°æ­¤ï¼Œæ¥å£åˆ›å»ºå®Œæ¯•\n    \n4. å‰ç«¯ä½¿ç”¨ajaxæ¥è·å–æ•°æ®\n\n    /views/index.ejs\n    ```html\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <title><%= title %></title>\n        <link rel='stylesheet' href='/stylesheets/style.css' />\n        <script src='/js/jquery.min.js'><\/script>\n      </head>\n      <body>\n        <h1><%= title %></h1>\n        <p>Welcome to <%= title %></p>\n        <div class=\"post\">\n          <input type=\"text\" class=\"title\" placeholder=\"è¯·è¾“å…¥æ ‡é¢˜\">\n          <input type=\"text\" class=\"content\" placeholder=\"è¯·è¾“å…¥æ ‡é¢˜\">\n          <button class=\"ok\">æäº¤</button>\n        </div>\n        <div class=\"test\"></div>\n      </body>\n      <script>\n        function getList() {\n          $.get('/api/test', {}, function (data) {\n            console.log('----data', data)\n            if (data.code == 200) {\n              var html = '', list = data.result;\n              for (var i = 0; i < list.length; i++) {\n                html += '<div>è¿™æ˜¯ç¬¬' + i + 'æ¡æ•°æ®ï¼šæ ‡é¢˜ä¸º' + list[i].title + 'ï¼Œå†…å®¹ä¸º' + list[i].content + '</div>'\n              }\n              $('.test').empty().append(html);\n            }\n          })\n        }\n        getList();\n        $('.ok').click(function() {\n          if (!$('.title').val()) {\n            alert('è¯·å¡«å†™æ ‡é¢˜');\n            return false;\n          }\n          if (!$('.content').val()) {\n            alert('è¯·å¡«å†™å†…å®¹');\n            return false;\n          }\n          $.post('/api/addtest', {\n            title: $('.title').val(),\n            content: $('.content').val()\n          }, function (data) {\n            console.log('----addtest', data)\n            if (data.code == 200) {\n              alert('æäº¤æˆåŠŸ');\n              getList();\n            } else {\n              alert('æäº¤å¤±è´¥');\n            }\n          })\n        })\n      <\/script>\n    </html>\n    ```\n    æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°æ‰“å°å‡ºæŸ¥åˆ°çš„æ•°æ®ã€‚\n    \n    \n### è¡¥å……è¯´æ˜\næ–‡ç« åªæ˜¯åˆ†äº«æˆ‘çš„ä¸€äº›å­¦ä¹ å†ç¨‹ï¼Œå¦‚æœæœ‰é”™è¯¯ï¼Œæ±‚è½»æ‹ï¼Œæˆ‘ä¸€å®šè™šå¿ƒå—æ•™ã€‚æˆ‘ä»äº‹å‰ç«¯è¡Œä¸šä¸ä¹…ï¼Œå¾ˆå¤šä¸œè¥¿ç†è§£è¿˜æœ‰åå·®ï¼Œä¸è¶³ä¹‹å¤„ï¼Œè¯·å¤šè§è°…ï¼Œå¾ˆå¤šä¸œè¥¿æ²¡å†™è¯¦ç»†ï¼ŒåæœŸæœ‰æ—¶é—´ä¼šå†è¡¥ä¸Šã€‚æ­¤å¤–è¿™ä¸ªé¡¹ç›®åé¢æˆ‘æƒ³ç»§ç»­å®Œå–„ä¸‹å»ï¼Œå½“å‰åªæ˜¯å†™ä¸ªå°demoè¯•ä¸€ä¸‹è€Œå·²ï¼Œè¯·ç»§ç»­å…³æ³¨ï¼Œå¦‚æœå¯ä»¥çš„è¯å¯ä»¥åˆ°æˆ‘GitHubä¸Šé¢ç»™ä¸ªæ˜Ÿé¼“åŠ±ä¸‹å“¦ã€‚\n    \n    \n### å‚è€ƒæ–‡æ¡£\n1ã€http://y.dobit.top/Detail/150.html\n\n2ã€https://github.com/wmui/vueblog\n"},FIf5:function(n,e,t){n.exports=t("qDsG")(10)},JG2H:function(n,e){n.exports=_dll_vendor},Kw5r:function(n,e,t){n.exports=t("JG2H")(2)},L2JU:function(n,e,t){n.exports=t("JG2H")(7)},Ldmx:function(n,e,t){},Lgyv:function(n,e){n.exports='# babel7ä½¿ç”¨ç¬”è®°\n\n### ä»¥ä¸‹ç¬”è®°éƒ½æ˜¯ä¸‹é¢å‡ ç¯‡æ–‡ç« ä¸­æ‘˜æŠ„çš„ï¼š\n\n* [ä½ çœŸçš„ä¼šç”¨ Babel å—?](https://juejin.im/post/59b9ffa8f265da06710d8e89)\n* [Show me the codeï¼Œbabel 7 æœ€ä½³å®è·µ](https://juejin.im/post/5c03a4d0f265da615e053612)\n* [Babelå­¦ä¹ ç³»åˆ—4-polyfillå’Œruntimeå·®åˆ«(å¿…çœ‹)](https://zhuanlan.zhihu.com/p/58624930)\n\n\n#### å‡ ç‚¹è¯´æ˜\n\n* Babel æŠŠ Javascript è¯­æ³• åˆ†ä¸º syntax å’Œ apiï¼›api æŒ‡é‚£äº›æˆ‘ä»¬å¯ä»¥é€šè¿‡ å‡½æ•°é‡æ–°è¦†ç›–çš„è¯­æ³• ï¼Œç±»ä¼¼ includes,map,includes,Promiseï¼ˆå¯ä»¥é€šè¿‡é‡å†™è¿›è¡Œè¦†ç›–ï¼‰ï¼›syntaxæ˜¯åƒ ç®­å¤´å‡½æ•°ã€letã€constã€classç­‰ï¼›\n*  Babel åªè½¬æ¢ syntaxï¼Œä¸è½¬æ¢ syntaxï¼›ä½†æ˜¯babelæä¾›äº† polyfill è¿™ä¸ªæ¨¡å—ç”¨æ¥å¤„ç†syntaxï¼Œpolyfillä¼šé‡å†™æµè§ˆå™¨ä¸å…¼å®¹çš„é‚£äº›syntaxç”¨æ³•ï¼ˆæ¯”å¦‚assignç­‰ï¼‰ï¼›\n* ä½†æ˜¯polyfillåŒ…å¾ˆå¤§ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨@babel/preset-env çš„ useBuiltIns æ¥æŒ‰éœ€å¼•å…¥ï¼›\n* å¦‚æœä½¿ç”¨polyfillï¼Œé‚£ä¹ˆå¾ˆå¤šæ–¹æ³•éƒ½è¢«é‡å†™äº†ï¼Œå¦‚æœç”¨åœ¨ç¬¬ä¸‰æ–¹ç»„ä»¶åº“çš„å¼€å‘å°±å¾ˆä¸åˆé€‚ï¼Œä¼šå¯¼è‡´ä½¿ç”¨è¿™ä¸ªåº“çš„ç”¨æˆ·æ— æ³•é¢„çŸ¥å“ªäº›æ–¹æ³•å·²ç»è¢«é‡å†™ï¼›å› æ­¤babelæä¾›äº†`@babel/runtime å’Œ @babel/plugin-transform-runtime`ç”¨æ¥æä¾›ä¸ä¼šé‡å†™å…¨å±€æ–¹æ³•åˆèƒ½å…¼å®¹ä½ç‰ˆæœ¬ç¯å¢ƒçš„æ–¹æ³•ï¼›\n\n> æ€»ç»“ï¼šBabel åªæ˜¯è½¬æ¢ syntax å±‚è¯­æ³•,æ‰€ä»¥éœ€è¦ @babel/polyfill æ¥å¤„ç†APIå…¼å®¹,åˆå› ä¸º polyfill ä½“ç§¯å¤ªå¤§ï¼Œæ‰€ä»¥é€šè¿‡ preset çš„ useBuiltIns æ¥å®ç°æŒ‰éœ€åŠ è½½,å†æ¥ç€ä¸ºäº†æ»¡è¶³ npm ç»„ä»¶å¼€å‘çš„éœ€è¦å‡ºç°äº† @babel/runtime æ¥åšéš”ç¦»\n\n\n#### ä¸€ã€é¡¹ç›®ä¸­ä½¿ç”¨babelå¹¶æŒ‰éœ€å¼•å…¥polyfill\n\n```\nnpm i -S @babel/polyfill @babel/runtime\nnpm i -D @babel/preset-env @babel/plugin-transform-runtime\n```\n\n1ã€@babel/preset-env æŒ‰éœ€åŠ è½½\n```\n// .babelrc.js\nmodule.exports = {\n    presets: [\n        [\n            "@babel/preset-env",\n            \n            {\n                "modules": false, // æ¨¡å—ä½¿ç”¨ es modules ï¼Œä¸ä½¿ç”¨ commonJS è§„èŒƒ\n                "useBuiltIns": \'usage\', // é»˜è®¤ false, å¯é€‰ entry , usage\n            }\n        ]\n    ]\n}\n```\n\nuseBuiltIns é€‰é¡¹ï¼š\n\n* false : ä¸å¯ç”¨polyfill\n* entry : å¯ç”¨ï¼Œéœ€è¦æ‰‹åŠ¨ import \'@babel/polyfill\' æ‰ç”Ÿæ•ˆ\n* usage : ä¸éœ€è¦æ‰‹åŠ¨import \'@babel/polyfill\'(åŠ ä¸Šä¹Ÿæ— å¦¨ï¼Œç¼–è¯‘æ—¶ä¼šè‡ªåŠ¨å»æ‰), ä¸”ä¼šæ ¹æ® .browserslist + ä¸šåŠ¡ä»£ç ä½¿ç”¨åˆ°çš„æ–° API æŒ‰éœ€è¿›è¡Œ polyfill\n\nå¦‚æœéœ€è¦å¯ç”¨polyfillï¼Œè®°å¾—å…ˆæ‰‹åŠ¨å®‰è£…`npm i -S @babel/polyfill`ï¼›ä½†æ˜¯ä½¿ç”¨â€œusageâ€é…ç½®åï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½ä¼šå†…è”ä¸€éhelpers ä»£ç ï¼Œå¯¼è‡´ä»£ç é‡å¤ï¼Œä½¿ç”¨@babel/plugin-transform-runtimeä¼˜åŒ–\n\n\n2ã€@babel/plugin-transform-runtime\n\n*  helpers é€‰é¡¹å°±å¯ä»¥æŠŠè¿™äº›é‡å¤çš„æ¨¡å—æŠ½ç¦»å‡ºæ¥\n\n```javascript\n// .babelrc.js\nmodule.exports = {\n    presets: [\n        [\n            "@babel/preset-env",\n            \n            {\n                "modules": false, // æ¨¡å—ä½¿ç”¨ es modules ï¼Œä¸ä½¿ç”¨ commonJS è§„èŒƒ \n                "useBuiltIns": \'usage\', // é»˜è®¤ false, å¯é€‰ entry , usage\n            }\n        ]\n    ],\n    "plugins": [\n        [\n            "@babel/plugin-transform-runtime",\n            {\n                "corejs": false, // é»˜è®¤å€¼ï¼Œå¯ä»¥ä¸å†™\n                "helpers": true, // é»˜è®¤ï¼Œå¯ä»¥ä¸å†™\n                "regenerator": false, // é€šè¿‡ preset-env å·²ç»ä½¿ç”¨äº†å…¨å±€çš„ regeneratorRuntime, ä¸å†éœ€è¦ transform-runtime æä¾›çš„ ä¸æ±¡æŸ“å…¨å±€çš„ regeneratorRuntime\n                "useESModules": true, // ä½¿ç”¨ es modules helpers, å‡å°‘ commonJS è¯­æ³•ä»£ç \n            }\n        ]\n    ],\n}\n```\n\n#### äºŒã€ç¬¬ä¸‰æ–¹åº“ä¸­ä½¿ç”¨babel\n\n```\nnpm install --save @babel/runtime\nnpm install --save-dev @babel/plugin-transform-runtime\nnpm install --save @babel/runtime-corejs2 --save  // å®˜æ–¹æ–‡æ¡£è¯´è¿™ä¸ªå¯ä»¥ä¸åŠ \n```\n\n```javascript\n// .babelrc.js\n{\n    "presets": [\n        [\n            "@babel/preset-env",\n            {\n                "useBuiltIns": false, // æ˜¯å¦å¼€å¯è‡ªåŠ¨æ”¯æŒ polyfill\n                "modules": false, // æ¨¡å—ä½¿ç”¨ es modules ï¼Œä¸ä½¿ç”¨ commonJS è§„èŒƒ\n                "targets": {\n                    "browsers": ["> 1%", "last 2 versions", "not ie <= 8"]\n                }\n            }\n        ]\n    ],\n    "plugins": [\n        [\n            "@babel/plugin-transform-runtime",\n            {\n                // useESModulesï¼šå¼•å…¥çš„helpersæ˜¯å¦æ˜¯es modulesè§„èŒƒçš„ï¼›æ³¨æ„å½“æ‰“åŒ…æˆcjsæ—¶è¦è®¾ç½®æˆfalseï¼Œå¦åˆ™ä¼šæŠ¥é”™\n                // "useESModules": true,\n                "corejs": 2 // å‚è€ƒå®˜æ–¹æ–‡æ¡£\n            }\n        ]\n    ],\n}\n```\n\n\n> å…³äº @babel/preset-env ä¸­ targets çš„è®¾ç½®è¯·å‚è€ƒï¼š [â€œlast 2 versionsâ€ ä¹‹é—ç¥¸](http://jimyuan.github.io/blog/2018/04/26/last-2-versions-considered-harmful.html)\n'},Mb3Q:function(n,e,t){n.exports=t("JG2H")(8)},"O60+":function(n,e,t){n.exports=t.p+"imgs/head.jpg"},PAZ5:function(n,e){n.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAAQABADAREAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABgUH/8QAKBAAAQIGAQMDBQAAAAAAAAAAAQIDBAUGBxESCAATIRQXMSIkMjNx/8QAGQEAAQUAAAAAAAAAAAAAAAAABAMFBgcI/8QAKBEAAQIFAwQBBQAAAAAAAAAAAQIRAwQGEiEABTETFBVBYRZRkbHx/9oADAMBAAIRAxEAPwAxYzi1IavtpM78XlrV6k7fyxxTSXIRnuxkcpKw2e3kEJHcUEA6qJUCMADPVeyW2IiwDNzKrYY/J1saqa6mNu3SHT+yQBGm15yWSnD54fGTkMMv61FuajhsaMj02lduYKoZU0IJU69L6N4dxIcK+2Nv17kY1+rH86SmfG9M9vdd6dm0dshrXvkeYEv0C91l9wwWZ8cs/OH03svyctb7DRPGm/lOTp6mi6tyAmckKC/D7PmIwpKiPKXSpQUNshWpRgZJUnuUDtDJTaTb6I55f9/zTFUtEbt9QJqinoqBHYBSIjsWTbgj7pYEYZnCn1l135Xxmlsmg/ZKpq3m81XF/dGdsMtQ7cNor8dEJUV7a+fjAPj46Bm0ySUjtVKJ+W41K6dj1RGjq87ChIhtjplRUVOOXJDM/wAu2v/Z"},Ryk6:function(n,e,t){var s={"./01node/01.md":"5L5T","./01node/02.md":"kKVl","./01node/03.md":"tjWA","./02webpack/01.md":"lg5E","./02webpack/02.md":"Lgyv","./02webpack/03.md":"ddCq","./02webpack/04.md":"3fe3","./04react/01.md":"n9MT","./04react/02.md":"SGWl","./04react/03.md":"gAYf","./04react/04.md":"mxS1","./06rollup/01.md":"X7Un"};function o(n){var e=i(n);return t(e)}function i(n){if(t.o(s,n))return s[n];var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}o.keys=function(){return Object.keys(s)},o.resolve=i,(n.exports=o).id="Ryk6"},SGWl:function(n,e){n.exports="# React-Nativeå¼€å‘ï¼šreact-native-image-crop-pickerå›¾ç‰‡ä¸Šä¼ ç»„ä»¶çš„ä½¿ç”¨ï¼ˆå®‰å“ï¼‰\n\n1ã€æ ¹æ®[å®˜ç½‘](https://github.com/ivpusic/react-native-image-crop-picker#android)æä¾›çš„æ­¥éª¤è¿›è¡Œç›¸åº”çš„è®¾ç½®\n\nï¼ˆ1ï¼‰`npm i react-native-image-crop-picker --save`\n\nï¼ˆ2ï¼‰`react-native link react-native-image-crop-picker`è¿™é‡Œå‘½ä»¤çª—å¾ˆä¸å¹¸åœ°å§‹ç»ˆæ²¡ä»€ä¹ˆåŠ¨é™ï¼ˆé™¤äº†å‡ è¡Œå­—ï¼‰\n\nï¼ˆ3ï¼‰Make sure you are using Gradle 2.2.x (android/build.gradle)ï¼š\n\n```\nbuildscript {\n    ...\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.2.3'\n        ...\n    }\n    ...\n}\n```\n\nï¼ˆ4ï¼‰VERY IMPORTANT Add the following to your build.gradle's repositories section. (android/build.gradle)ï¼š\n```\nallprojects {\n    repositories {\n      mavenLocal()\n      jcenter()\n      maven { url \"$rootDir/../node_modules/react-native/android\" }\n\n      // jitpack repo is necessary to fetch ucrop dependency\n      maven { url \"https://jitpack.io\" }\n    }\n}\n```\n\nï¼ˆ5ï¼‰Add useSupportLibrary (android/app/build.gradle):\n\n```\nandroid {\n    ...\n\n    defaultConfig {\n        ...\n        vectorDrawables.useSupportLibrary = true\n        ...\n    }\n    ...\n}\n```\n\nï¼ˆ6ï¼‰å¯é€‰ï¼šapp\\src\\main\\AndroidManifest.xml\n\n```\n<uses-permission android:name=\"android.permission.CAMERA\"/>\n```\n\n2ã€å¼€å§‹è¿è¡Œï¼š\n\né…ç½®å®Œä¸Šè¿°å†…å®¹åæˆ‘ç”¨Android Studioé‡æ–°buildäº†ä¸€éé¡¹ç›®ï¼Œä½†æ˜¯æŠ¥é”™äº†ï¼š\nç¨‹åºåŒ…com.reactnative.ivpusic.imagepickerä¸å­˜åœ¨ æ‰¾ä¸åˆ°ç¬¦å·ç­‰ç­‰\n\næœç´¢ä¸€ç•ªåå¾—åˆ°ä¸€ä¸ªæ–¹æ¡ˆï¼šhttps://github.com/ivpusic/react-native-image-crop-picker/blob/79d3dab7e5dd377551701a74203deb5667bdfde2/README.md#android-1\n\nç„¶é¹…è¿˜æ˜¯æœ‰é—®é¢˜ï¼Œè¿è¡Œèµ·æ¥è¿˜æ˜¯æœ‰é—®é¢˜ï¼Œåº”è¯¥æ˜¯é“¾æ¥åŸç”Ÿåº“æ²¡æˆåŠŸï¼ˆ`react-native link react-native-image-crop-picker`ï¼‰ã€‚æœ€ç»ˆç»è¿‡å¤šæ¬¡å°è¯•åï¼Œæˆ‘ä¿®æ”¹äº†ä»¥ä¸‹æ–‡ä»¶çš„ä»¥ä¸‹åœ°æ–¹ï¼š\n\nï¼ˆ1ï¼‰file: android/app/build.gradleï¼š\n\n```\ndependencies {\n    ...\n    compile project(':react-native-image-crop-picker')\n}\n```\n\nï¼ˆ2ï¼‰file: MainApplication.java\n\n```\n...\n\nimport com.reactnative.ivpusic.imagepicker.PickerPackage; // import package\n\npublic class MainApplication extends ReactApplication {\n...\n   /**\n   * A list of packages used by the app. If the app uses additional views\n   * or modules besides the default ones, add more packages here.\n   */\n    @Override\n    protected List<ReactPackage> getPackages() {\n        return Arrays.<ReactPackage>asList(\n            new MainReactPackage(),\n            new PickerPackage() // Add package\n        );\n    }\n...\n}\n```\n\nï¼ˆ3ï¼‰file: android/settings.gradle:\n\n```\ninclude ':react-native-image-crop-picker'\nproject(':react-native-image-crop-picker').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-image-crop-picker/android')\n```\n\nï¼ˆ4ï¼‰æ­¤æ—¶å†ç”¨Android Studioé‡æ–°buildäº†ä¸€éé¡¹ç›®å³å¯æˆåŠŸä½¿ç”¨react-native-image-crop-pickeräº†ï¼Œæ˜¯åœ¨ä¸è¡Œå°†node_modulesåˆ é™¤ï¼Œé‡æ–°å®‰è£…ä¾èµ–ï¼Œå†å¤šbuildå‡ éé¡¹ç›®è¯•è¯•ã€‚è¯¥æ’ä»¶å…·ä½“ä½¿ç”¨å¯ä»¥å‚è€ƒhttps://blog.csdn.net/u013718120/article/details/72781285ã€‚\n"},"T+MD":function(n,e,t){var s={"./01node/01.md":"5L5T","./01node/02.md":"kKVl","./01node/03.md":"tjWA","./02webpack/01.md":"lg5E","./02webpack/02.md":"Lgyv","./02webpack/03.md":"ddCq","./02webpack/04.md":"3fe3","./04react/01.md":"n9MT","./04react/02.md":"SGWl","./04react/03.md":"gAYf","./04react/04.md":"mxS1","./06rollup/01.md":"X7Un"};function o(n){var e=i(n);return t(e)}function i(n){if(t.o(s,n))return s[n];var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}o.keys=function(){return Object.keys(s)},o.resolve=i,(n.exports=o).id="T+MD"},X7Un:function(n,e){n.exports="# rollupå¼€å‘ä¾èµ–åŒ…ï¼ˆnpm libraryï¼‰å®æˆ˜\n\n> æœ¬æ–‡æ¶‰åŠåŒ…ç‰ˆæœ¬ï¼šnode 11.6.0 ã€npm 6.11.3ã€webpack 4.39.3ï¼›ä½¿ç”¨macå¼€å‘ï¼›\n\n## é¡¹ç›®\n\n[æºç ](https://github.com/jiaoyanlin/npm-library-demo) -> https://github.com/jiaoyanlin/npm-library-demo ï¼Œæ±‚starğŸ˜„\n\n```\nnpm i\nnpm start\n```\n\nå»ºè®®å¼€å§‹åŠ¨æ‰‹å®è·µå‰å…ˆæµè§ˆä¸‹æœ¬æ–‡çš„çš„ ä¸‰ã€çŸ¥è¯†ç‚¹\n\n## ä¸€ã€å‘å¸ƒåŒ…åŸºæœ¬æµç¨‹\n\n#### 1ã€ä½¿ç”¨nrmç®¡ç†npmæºï¼š\n\n> nrmï¼šnpm registry ç®¡ç†å·¥å…·ï¼Œæ–¹ä¾¿åˆ‡æ¢ä¸åŒçš„æºï¼›æˆ‘ä»¬å¼€å‘çš„åŒ…è¦å‘å¸ƒçš„æºæ˜¯https://registry.npmjs.orgï¼Œæ›´è¯¦ç»†çš„å®‰è£…å¯ä»¥å‚è€ƒ[nrm â€”â€” å¿«é€Ÿåˆ‡æ¢ NPM æº](https://segmentfault.com/a/1190000000473869)\n\n```\n// å®‰è£…\nnpm install -g nrm\n// æŸ¥çœ‹\nnrm ls\n// åˆ‡æ¢\nnrm use taobao\n// å¢åŠ æº\nnrm add  <registry> <url> [home]\n// åˆ é™¤æº\nnrm del <registry>\n```\n\n#### 2ã€å‘å¸ƒåŒ…ï¼š\n\n> è®°å¾—å…ˆåœ¨ https://www.npmjs.com æ³¨å†Œè´¦æˆ·å¹¶åœ¨é‚®ç®±æ¿€æ´»è´¦æˆ·\n\nï¼ˆ1ï¼‰ç¼–å†™åŒ…ä»£ç (npm initç­‰æ“ä½œï¼Œå…·ä½“åœ¨ä¸‹é¢ä¼šæåŠ)\n\nï¼ˆ2ï¼‰åˆ‡æ¢registryåˆ°npmå¯¹åº”é“¾æ¥https://registry.npmjs.org/ï¼šnrm use npm\n\nï¼ˆ3ï¼‰ç™»å½•ï¼šnpm login\n\nï¼ˆ4ï¼‰å‘å¸ƒã€æ›´æ–°ï¼šnpm publish\n\n#### 3ã€å…³äºä¸ºä½•é€‰æ‹©rollupè€Œä¸æ˜¯webpackç¼–å†™ä¸€ä¸ªnpmåŒ…\n\n> ä¸ºäº†æ”¯æŒtree shakingï¼Œå¾—å¯¼å‡ºä¸€ä»½ç¬¦åˆes6æ¨¡å—è§„èŒƒçš„ä»£ç ï¼Œä½†æ˜¯webpackä¸æ”¯æŒå¯¼å‡ºä¸ºes6æ¨¡å—ï¼Œæ‰€ä»¥ä½¿ç”¨rollupæ¥å¼€å‘æˆ‘ä»¬çš„åŒ…\n\n> [rollupå’Œwebpackä½¿ç”¨åœºæ™¯åˆ†æ](https://www.jianshu.com/p/60070a6d7631)ä¸­æåˆ°ï¼šRollupåå‘åº”ç”¨äºjsåº“ï¼Œwebpackåå‘åº”ç”¨äºå‰ç«¯å·¥ç¨‹ï¼ŒUIåº“ï¼›å¦‚æœä½ çš„åº”ç”¨åœºæ™¯ä¸­åªæ˜¯jsä»£ç ï¼Œå¸Œæœ›åšESè½¬æ¢ï¼Œæ¨¡å—è§£æï¼Œå¯ä»¥ä½¿ç”¨Rollupã€‚å¦‚æœä½ çš„åœºæ™¯ä¸­æ¶‰åŠåˆ°cssã€htmlï¼Œæ¶‰åŠåˆ°å¤æ‚çš„ä»£ç æ‹†åˆ†åˆå¹¶ï¼Œå»ºè®®ä½¿ç”¨webpackã€‚\n\n> rollupå¯ä»¥ç›´æ¥æ„å»ºå‡ºç¬¦åˆes6æ¨¡å—è§„èŒƒçš„ä»£ç ï¼ˆæœ‰åˆ©äºtree shakingï¼‰ï¼Œä½†æ˜¯webpackä¸èƒ½ï¼›å› æ­¤ä¸ºäº†æ›´å¥½åœ°ä½¿ç”¨es6æ¨¡å—åŒ–æ¥å®ç°tree shakingï¼Œä»¥åŠä¼˜åŒ–åŒ…ä»£ç ä½“ç§¯ç­‰åŸå› ï¼Œé€‰ç”¨rollupæ¥å¼€å‘npmåŒ…ï¼›\n\n## äºŒã€ä½¿ç”¨rollupæ„å»ºnpmåŒ…\n\n> ä»¥ä¸‹å†…å®¹å¼•è‡ª[rollupä¸­æ–‡ç½‘](https://www.rollupjs.com/guide/introduction/): ä¸ºäº†ç¡®ä¿ä½ çš„ ES6 æ¨¡å—å¯ä»¥ç›´æ¥ä¸ã€Œè¿è¡Œåœ¨ CommonJSï¼ˆä¾‹å¦‚ Node.js å’Œ webpackï¼‰ä¸­çš„å·¥å…·(tool)ã€ä½¿ç”¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ Rollup ç¼–è¯‘ä¸º UMD æˆ– CommonJS æ ¼å¼ï¼Œç„¶ååœ¨ package.json æ–‡ä»¶çš„ main å±æ€§ä¸­æŒ‡å‘å½“å‰ç¼–è¯‘çš„ç‰ˆæœ¬ã€‚å¦‚æœä½ çš„ package.json ä¹Ÿå…·æœ‰ module å­—æ®µï¼Œåƒ Rollup å’Œ webpack 2 è¿™æ ·çš„ ES6 æ„ŸçŸ¥å·¥å…·(ES6-aware tools)å°†ä¼šç›´æ¥å¯¼å…¥ ES6 æ¨¡å—ç‰ˆæœ¬ã€‚\n\n> å…³äºrollupæ›´åŠ è¯¦ç»†çš„ä»‹ç»åŠä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹æ–‡ç« ï¼š[Rollupï¼šä¸‹ä¸€ä»£ESæ¨¡å—æ‰“åŒ…å·¥å…·](https://zhuanlan.zhihu.com/p/75717476) ã€[rollupä¸­æ–‡ç½‘](https://www.rollupjs.com/guide/introduction/) ã€[Rollup.js å®æˆ˜å­¦ä¹ ç¬”è®°](https://rollupjs.org/guide/zh/)ã€[webpackåˆ›å»ºlibrary](https://chenshenhai.github.io/rollupjs-note/)\n\n\n#### 1ã€å…ˆæ¥ä¸ªç®€å•çš„demoï¼š[æºç ](https://github.com/jiaoyanlin/npm-library-demo/tree/master/demos/demo-1)\n\nï¼ˆ1ï¼‰æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹npm-library-demo\n\nåˆå§‹åŒ–ï¼š\n```\ncd npm-library-demo\nnpm init -y // åˆå§‹åŒ–ï¼Œç”Ÿæˆpackage.json\nnpm i rollup -D // å®‰è£…rollup\n```\n\næ ¹æ®ä»¥ä¸‹ç›®å½•ç»“æ„æ–°å¢æ–‡ä»¶å¤¹åŠæ–‡ä»¶ï¼š\n```\nnpm-library-demo\n    |--build\n        |--rollup.config.js\n    |--example\n        |--index.html\n    |--src\n        |--main.js\n        |--foo.js\n```\n\nï¼ˆ2ï¼‰æ–‡ä»¶å†…å®¹ï¼š\n\npackage.jsonä¸­åŠ å…¥æ„å»ºè„šæœ¬å‘½ä»¤ï¼š\n```\n\"scripts\": {\n    \"build\": \"rollup -c ./build/rollup.config.js\"\n}\n```\n\n```javascript\n// rollup.config.js\nconst path = require('path');\nconst resolve = function (filePath) {\n    return path.join(__dirname, '..', filePath)\n}\nexport default {\n    input: resolve('src/main.js'), // å…¥å£æ–‡ä»¶\n    output: { // å‡ºå£æ–‡ä»¶\n        file: resolve('dist/bundle.js'),\n        format: 'umd',\n        name: 'myLibrary'\n    }\n};\n```\n\n```javascript\n// main.js\nimport foo from './foo.js';\nexport default (function () {\n\tconsole.log(foo);\n})();\n```\n\n```javascript\n// foo.js\nexport default 'hello world!';\n```\n\nindex.html:\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n    <title>example</title>\n</head>\n<body>\n    \n</body>\n<script src=\"../dist/bundle.js\"><\/script>\n</html>\n```\n\nï¼ˆ3ï¼‰æ‰§è¡Œ`npm run build`ï¼Œå°±å¯ä»¥ç”Ÿæˆæ‰“åŒ…æ–‡ä»¶/dist/bundle.jsï¼Œæ‰“å¼€example/index.htmlæ§åˆ¶å°å¯ä»¥æŸ¥çœ‹æ‰“åŒ…æ–‡ä»¶æ˜¯å¦ç”Ÿæ•ˆ\n\n#### 2ã€ä½¿ç”¨æ’ä»¶ï¼Œåœ¨1çš„åŸºç¡€ä¸Šè¿›è¡Œä»¥ä¸‹æ“ä½œï¼š[æºç ](https://github.com/jiaoyanlin/npm-library-demo/tree/master/demos/demo-2)\n\nåœ¨rollupä¸­å¦‚æœè¦å¤„ç†jsonï¼Œå°±è¦ç”¨åˆ°æ’ä»¶ï¼Œæ¯”å¦‚rollup-plugin-json\n\n`npm i rollup-plugin-json -D`\n\n```javascript\n// rollup.config.js\nconst path = require('path');\nimport json from 'rollup-plugin-json';\n\nconst resolve = function (filePath) {\n    return path.join(__dirname, '..', filePath)\n}\n\nexport default {\n    input: resolve('src/main.js'),\n    output: {\n        file: resolve('dist/bundle.js'),\n        format: 'umd',\n        name: 'myLibrary'\n    },\n    plugins: [ // åœ¨æ­¤å¤„ä½¿ç”¨æ’ä»¶\n        json(),\n    ],\n};\n\n```\n\n```javascript\n// main.js\nimport foo from './foo.js';\nimport { version } from '../package.json'; // åˆ©ç”¨jsonæ’ä»¶å¯ä»¥è·å¾—package.jsonä¸­çš„æ•°æ®\nconsole.log('version ' + version);\nexport default (function () {\n\tconsole.log(foo);\n})();\n```\n\næ­¤æ—¶å†æ¬¡ä½¿ç”¨`npm run build`æ‰“åŒ…ï¼Œæ‰“å¼€index.htmlï¼Œåœ¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°ç›¸å…³ç»“æœ\n\nå…¶ä»–æ’ä»¶ä½¿ç”¨æ–¹å¼ç±»ä¼¼\n\n#### 3ã€Rollup ä¸å…¶ä»–å·¥å…·é›†æˆ\n\n##### ï¼ˆ1ï¼‰npm packagesï¼šæ·»åŠ é…ç½®è®©rollupçŸ¥é“å¦‚ä½•å¤„ç†ä½ ä»npmå®‰è£…åˆ°node_modulesæ–‡ä»¶å¤¹ä¸­çš„è½¯ä»¶åŒ…\n\n`npm install rollup-plugin-node-resolve rollup-plugin-commonjs -D`\n\n* rollup-plugin-node-resolve: å‘Šè¯‰ Rollup å¦‚ä½•æŸ¥æ‰¾å¤–éƒ¨æ¨¡å—\n* rollup-plugin-commonjsï¼šå°†CommonJSæ¨¡å—è½¬æ¢ä¸º ES2015 ä¾› Rollup å¤„ç†ï¼Œè¯·æ³¨æ„ï¼Œrollup-plugin-commonjsåº”è¯¥ç”¨åœ¨å…¶ä»–æ’ä»¶è½¬æ¢ä½ çš„æ¨¡å—ä¹‹å‰ - è¿™æ˜¯ä¸ºäº†é˜²æ­¢å…¶ä»–æ’ä»¶çš„æ”¹å˜ç ´åCommonJSçš„æ£€æµ‹\n\n\n```javascript\n// rollup.config.js\nimport resolve from 'rollup-plugin-node-resolve';\nimport commonjs from 'rollup-plugin-commonjs';\n\nimport json from 'rollup-plugin-json';\n\nconst path = require('path');\nconst resolveFile = function (filePath) {\n    return path.join(__dirname, '..', filePath)\n}\n\nexport default {\n    input: resolveFile('src/main.js'),\n    output: {\n        file: resolveFile('dist/bundle.js'),\n        format: 'cjs',\n    },\n    plugins: [\n        commonjs(),\n        resolve({\n            // å°†è‡ªå®šä¹‰é€‰é¡¹ä¼ é€’ç»™è§£ææ’ä»¶\n            customResolveOptions: {\n                moduleDirectory: 'node_modules'\n            }\n        }),\n        json(),\n    ],\n};\n```\n\n##### ï¼ˆ2ï¼‰externalï¼šæœ‰äº›åŒ…è¦å¤„ç†æˆå¤–éƒ¨å¼•ç”¨ï¼ˆä¾‹å¦‚lodashç­‰ï¼‰ï¼Œexternalså°±æ˜¯ç”¨æ¥å¤„ç†å¤–éƒ¨çš„å¼•ç”¨ï¼Œä¸è¦å°†è¿™äº›åŒ…æ‰“åŒ…åˆ°è¾“å‡ºæ–‡ä»¶ä¸­ï¼Œå‡å°æ‰“åŒ…æ–‡ä»¶ä½“ç§¯\n\n> external æ¥å—ä¸€ä¸ªæ¨¡å—åç§°çš„æ•°ç»„æˆ–ä¸€ä¸ªæ¥å—æ¨¡å—åç§°çš„å‡½æ•°ï¼Œå¦‚æœå®ƒè¢«è§†ä¸ºå¤–éƒ¨å¼•ç”¨ï¼ˆexternalsï¼‰åˆ™è¿”å›true\n\n```javascript\n// rollup.config.js\nexport default {\n    ...,\n    // ä½œç”¨ï¼šæŒ‡å‡ºåº”å°†å“ªäº›æ¨¡å—è§†ä¸ºå¤–éƒ¨æ¨¡å—ï¼Œå¦åˆ™ä¼šè¢«æ‰“åŒ…è¿›æœ€ç»ˆçš„ä»£ç é‡Œ\n    external: ['lodash']\n    // external: id => /lodash/.test(id) // ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼\n};\n```\n\nå®‰è£…lodashï¼š`npm i lodash -S`\n```javascript\n// main.js\n...\nimport _ from 'lodash';\nconsole.log('-------lodash:', _.defaults({ 'a': 1 }, { 'a': 3, 'b': 2 }));\n```\nå¯ä»¥æ‰“åŒ…è¯•è¯•externalé…ç½®ä¸å¦å¯¹æ‰“åŒ…æ–‡ä»¶çš„å½±å“ï¼ˆç›´æ¥æŸ¥çœ‹dist/bundle.jsï¼‰\n\nç”±äºæ­¤æ—¶æ‰“åŒ…ç”Ÿæˆçš„æ˜¯cjsæ ¼å¼çš„jsï¼Œå¯ä»¥ç›´æ¥åœ¨æ§åˆ¶å°æ‰§è¡Œ`node ./dist/bundle.js`æµ‹è¯•æ‰“åŒ…ç»“æœï¼›æ­¤æ—¶index.htmlæ˜¯æ²¡æ³•æˆåŠŸåŠ è½½bundle.jsçš„ï¼Œå› ä¸ºæ­¤æ—¶çš„æ–‡ä»¶æ˜¯cjsçš„ï¼Œæ— æ³•ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨\n\n##### ï¼ˆ3ï¼‰babel7ï¼š\n\n`npm i -D rollup-plugin-babel @babel/core @babel/plugin-transform-runtime @babel/preset-env`\n\n`npm i -S @babel/runtime @babel/runtime-corejs2`\n\n```javascript\n// rollup.config.js\n...\nimport babel from 'rollup-plugin-babel';\n\nexport default {\n    ...\n    plugins: [\n        ...,\n        babel({\n            exclude: 'node_modules/**', // åªç¼–è¯‘æˆ‘ä»¬çš„æºä»£ç \n            runtimeHelpers: true,\n        }),\n    ],\n    external: id => {\n        return /@babel\\/runtime/.test(id) || /lodash/.test(id);\n    }\n}\n```\næ ¹ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶.babelrc.js\n```javascript\nmodule.exports = {\n    presets: [\n        [\n            \"@babel/preset-env\",\n            {\n                // \"debug\": true, // debugï¼Œç¼–è¯‘çš„æ—¶å€™ console\n                \"useBuiltIns\": false, // æ˜¯å¦å¼€å¯è‡ªåŠ¨æ”¯æŒ polyfill\n                \"modules\": false, // æ¨¡å—ä½¿ç”¨ es modules ï¼Œä¸ä½¿ç”¨ commonJS è§„èŒƒ\n                // \"targets\": \"> 0.25%, last 2 versions, iOS >= 8, Android >= 4.4, not dead\"\n            }\n        ]\n    ],\n    plugins: [\n        [\n            \"@babel/plugin-transform-runtime\",\n            {\n                // useESModulesï¼šå¼•å…¥çš„helpersæ˜¯å¦æ˜¯es modulesè§„èŒƒçš„ï¼›æ³¨æ„å½“æ‰“åŒ…æˆcjsæ—¶ä¸èƒ½å¼•å…¥es modulesä¸‹çš„ä»£ç ï¼Œä¼šæŠ¥é”™\n                // \"useESModules\": true,\n                \"corejs\": 2 // å‚è€ƒå®˜æ–¹æ–‡æ¡£\n            }\n        ],\n    ]\n}\n```\nå¯ä»¥è‡ªå·±åœ¨main.jsä¸­åŠ å…¥ä¸€äº›es6è¯­æ³•ï¼Œçœ‹çœ‹æ‰“åŒ…åçš„æ–‡ä»¶æ˜¯å¦å°†es6è¯­æ³•ç¼–è¯‘æˆäº†es5ï¼ˆå¦‚constã€letç­‰ï¼‰\n\n??????? babelè¿˜æœ‰ä¸€ç¯‡ç›¸å…³åšæ–‡è¡¥å……\n\n##### ï¼ˆ4ï¼‰å¼•å…¥eslintï¼š\n\n`npm i -D babel-eslint rollup-plugin-eslint`\n\n> eslintä½ç½®å¾ˆé‡è¦ï¼Œæ”¾åœ¨babelæ’ä»¶åé¢ä¼šå¯¼è‡´å®šä½é—®é¢˜çš„æ—¶å€™å‡ºé”™\n\n```javascript\n// rollup.config.js\n...\nimport { eslint } from 'rollup-plugin-eslint';\n\nmodule.exports = {\n    ...,\n    plugins: [\n        ...,\n        eslint({ // eslintæ’ä»¶å¿…é¡»æ”¾åœ¨babelæ’ä»¶ä¹‹å‰ï¼Œä¸ç„¶æ£€æµ‹çš„æ˜¯è½¬æ¢åçš„æ–‡ä»¶ï¼Œå¯¼è‡´æ£€æµ‹æœ‰è¯¯\n            throwOnError: true,\n            throwOnWarning: true,\n            include: ['src/**'],\n            exclude: ['node_modules/**']\n        }),\n        ...\n    ]\n}\n```\n\næ ¹ç›®å½•ä¸‹æ–°å¢æ–‡ä»¶.eslitrc.js\n```javascript\nmodule.exports = {\n    //ä¸€æ—¦é…ç½®äº†rootï¼ŒESlintåœæ­¢åœ¨çˆ¶çº§ç›®å½•ä¸­æŸ¥æ‰¾é…ç½®æ–‡ä»¶\n    root: true,\n    parser: \"babel-eslint\", // é…ç½®babel-eslintï¼Œé¿å…åœ¨ä½¿ç”¨es6ç±»å±æ€§æ—¶ï¼ŒeslintæŠ¥Parsing error: Unexpected token\n    //æƒ³è¦æ”¯æŒçš„JSè¯­è¨€é€‰é¡¹\n    parserOptions: {\n        //å¯ç”¨ES6è¯­æ³•æ”¯æŒ(å¦‚æœæ”¯æŒes6çš„å…¨å±€å˜é‡{env: {es6: true}}ï¼Œåˆ™é»˜è®¤å¯ç”¨ES6è¯­æ³•æ”¯æŒ)\n        //æ­¤å¤„ä¹Ÿå¯ä»¥ä½¿ç”¨å¹´ä»½å‘½åçš„ç‰ˆæœ¬å·ï¼š2015\n        ecmaVersion: 6,\n        //é»˜è®¤ä¸ºscript\n        sourceType: \"module\",\n        //æ”¯æŒå…¶ä»–çš„è¯­è¨€ç‰¹æ€§\n        ecmaFeatures: {}\n    },\n    //ä»£ç è¿è¡Œçš„ç¯å¢ƒï¼Œæ¯ä¸ªç¯å¢ƒéƒ½ä¼šæœ‰ä¸€å¥—é¢„å®šä¹‰çš„å…¨å±€å¯¹è±¡ï¼Œä¸åŒç¯å¢ƒå¯ä»¥ç»„åˆä½¿ç”¨\n    env: {\n        amd: true, // å¦åˆ™ä¼šå‡ºç°'require' is not defined æç¤º\n        es6: true,\n        browser: true,\n        jquery: true\n    },\n    //è®¿é—®å½“å‰æºæ–‡ä»¶ä¸­æœªå®šä¹‰çš„å˜é‡æ—¶ï¼Œno-undefä¼šæŠ¥è­¦å‘Šã€‚\n    //å¦‚æœè¿™äº›å…¨å±€å˜é‡æ˜¯åˆè§„çš„ï¼Œå¯ä»¥åœ¨globalsä¸­é…ç½®ï¼Œé¿å…è¿™äº›å…¨å±€å˜é‡å‘å‡ºè­¦å‘Š\n    globals: {\n        //é…ç½®ç»™å…¨å±€å˜é‡çš„å¸ƒå°”å€¼ï¼Œæ˜¯ç”¨æ¥æ§åˆ¶è¯¥å…¨å±€å˜é‡æ˜¯å¦å…è®¸è¢«é‡å†™\n        test_param: true,\n        window: true,\n        process: false,\n    },\n    //é›†æˆæ¨èçš„è§„åˆ™\n    extends: [\"eslint:recommended\"],\n    //å¯ç”¨é¢å¤–çš„è§„åˆ™æˆ–è€…è¦†ç›–é»˜è®¤çš„è§„åˆ™\n    //è§„åˆ™çº§åˆ«åˆ†åˆ«ï¼šä¸º\"off\"(0)å…³é—­ã€\"warn\"(1)è­¦å‘Šã€\"error\"(2)é”™è¯¯--errorè§¦å‘æ—¶ï¼Œç¨‹åºé€€å‡º\n    rules: {\n        //å…³é—­â€œç¦ç”¨consoleâ€è§„åˆ™\n        \"no-console\": \"off\",\n        //ç¼©è¿›ä¸è§„èŒƒè­¦å‘Šï¼Œè¦æ±‚ç¼©è¿›ä¸º2ä¸ªç©ºæ ¼ï¼Œé»˜è®¤å€¼ä¸º4ä¸ªç©ºæ ¼\n        \"indent\": [\"warn\", 4, {\n            //è®¾ç½®ä¸º1æ—¶å¼ºåˆ¶switchè¯­å¥ä¸­caseçš„ç¼©è¿›ä¸º2ä¸ªç©ºæ ¼\n            \"SwitchCase\": 1,\n        }],\n        // å‡½æ•°å®šä¹‰æ—¶æ‹¬å·å‰é¢è¦ä¸è¦æœ‰ç©ºæ ¼\n        \"space-before-function-paren\": [0, \"always\"],\n        //å®šä¹‰å­—ç¬¦ä¸²ä¸è§„èŒƒé”™è¯¯ï¼Œè¦æ±‚å­—ç¬¦ä¸²ä½¿ç”¨åŒå¼•å·\n        // quotes: [\"error\", \"double\"],\n        //....\n        //æ›´å¤šè§„åˆ™å¯æŸ¥çœ‹http://eslint.cn/docs/rules/\n    }\n}\n```\n##### ï¼ˆ5ï¼‰ä¸€æ¬¡ç¼–è¯‘ï¼ŒåŒæ—¶æ‰“åŒ…ç”Ÿæˆä¸åŒæ ¼å¼æ–‡ä»¶ï¼Œå¦‚cjsã€esã€umdç­‰\n\næœ‰ä¸¤ç§æ–¹æ³•ï¼š\n\né¦–å…ˆï¼Œ`npm i -D rollup-plugin-serve rollup-plugin-uglify`\n\nä¿®æ”¹packag.json\n```json\n{\n    ...,\n    \"module\": \"es/index.js\",\n    \"main\": \"lib/index.js\",\n    \"scripts\": {\n        \"build\": \"rollup -c ./build/rollup.config.js\"\n        \"clean\": \"rm -rf ./dist/ ./es/ ./lib/\",\n        \"easy\": \"npm run clean && NODE_ENV=development rollup -w -c ./build/easy.config.js\",\n        \"node:dev\": \"npm run clean && NODE_ENV=development node ./build/dev.js\",\n        \"node:build\": \"npm run clean && NODE_ENV=production node ./build/build.js\",\n        \"start\": \"npm run clean && NODE_ENV=development rollup -w -c ./build/rollup.config.js\",\n        \"build\": \"npm run clean && NODE_ENV=production rollup -c ./build/rollup.config.js\"\n   },\n   \"files\": [\n        \"dist\",\n        \"lib\",\n        \"es\",\n        \"types\"\n  ],\n\n```\n\næ³¨æ„ï¼šmacå¯ä»¥ç›´æ¥ä½¿ç”¨NODE_ENV=developmentæ–¹å¼ä¼ é€’å˜é‡ï¼Œwindowä¸‹ä¸ä¸€å®šå¯ä»¥ï¼Œå¦‚æœå¤±è´¥è¯·å¼•å…¥[cross-env](https://juejin.im/post/5c009b13f265da612e285d43)\n\nï¼ˆ1ï¼‰ç¬¬ä¸€ç§æ–¹æ³•ï¼šä½¿ç”¨rollupå‘½ä»¤æ‰“åŒ…\n\n```javascript\n// rollup.config.js\nimport json from 'rollup-plugin-json';\nimport resolve from 'rollup-plugin-node-resolve';\nimport commonjs from 'rollup-plugin-commonjs';\nimport babelPlugin from 'rollup-plugin-babel';\nimport serve from 'rollup-plugin-serve';\nimport { uglify } from 'rollup-plugin-uglify';\nimport { eslint } from 'rollup-plugin-eslint'\n\nconst path = require('path');\nconst resolveFile = function (filePath) {\n    return path.join(__dirname, '..', filePath)\n}\nconst isDev = process.env.NODE_ENV !== 'production';\nconsole.log('----------dev:', process.env.NODE_ENV, isDev)\n\n// é€šè¿‡æ§åˆ¶outputsä¸­å¯¹åº”çš„isExternalã€isUglifyå€¼æ¥å†³å®šæ‰“åŒ…çš„æ–‡ä»¶æ˜¯å¦å¯ç”¨externalå’Œuglify\nconst outputs = [\n    {\n        file: resolveFile('lib/index.js'),\n        format: 'cjs',\n        isExternal: true,\n    },\n    {\n        file: resolveFile('es/index.js'),\n        format: 'es',\n        isExternal: true,\n    },\n    {\n        file: resolveFile('dist/index.js'),\n        format: 'umd',\n        name: 'npmLibraryDemo',\n    },\n    {\n        file: resolveFile('dist/index.min.js'),\n        format: 'umd',\n        name: 'npmLibraryDemo',\n        isUglify: true,\n    }\n].map(i => {\n    i.sourcemap = isDev; // å¼€å‘æ¨¡å¼ï¼šå¼€å¯sourcemapæ–‡ä»¶çš„ç”Ÿæˆ\n    return i;\n});\nconst len = outputs.length;\n\nconst config = outputs.map((output, i) => {\n    const isUglify = output.isUglify || false;\n    const isExternal = output.isExternal || false;\n    console.log('------config:', isExternal)\n    return {\n        input: resolveFile('src/main.js'),\n        output,\n        plugins: [\n            // rollup-plugin-commonjsåº”è¯¥ç”¨åœ¨å…¶ä»–æ’ä»¶è½¬æ¢ä½ çš„æ¨¡å—ä¹‹å‰ - è¿™æ˜¯ä¸ºäº†é˜²æ­¢å…¶ä»–æ’ä»¶çš„æ”¹å˜ç ´åCommonJSçš„æ£€æµ‹\n            // ä½œç”¨ï¼šå°†CommonJSæ¨¡å—è½¬æ¢ä¸º ES2015 ä¾› Rollup å¤„ç†\n            commonjs(),\n            // ä½œç”¨ï¼šå¤„ç†jsonæ ¼å¼æ–‡ä»¶\n            json(),\n            // ä½œç”¨ï¼šå‘Šè¯‰ Rollup å¦‚ä½•æŸ¥æ‰¾å¤–éƒ¨æ¨¡å—\n            resolve({\n                // å°†è‡ªå®šä¹‰é€‰é¡¹ä¼ é€’ç»™è§£ææ’ä»¶\n                customResolveOptions: {\n                    moduleDirectory: 'node_modules'\n                }\n            }),\n            eslint({\n                throwOnError: true,\n                throwOnWarning: true,\n                include: ['src/**'],\n                exclude: ['node_modules/**']\n            }),\n            babelPlugin({\n                exclude: 'node_modules/**', // åªç¼–è¯‘æˆ‘ä»¬çš„æºä»£ç \n                runtimeHelpers: true,\n            }),\n            ...(\n                isDev && i === len - 1 ?\n                    [\n                        serve({ // ä½¿ç”¨å¼€å‘æœåŠ¡æ’ä»¶\n                            port: 3001,\n                            // è®¾ç½® exmapleçš„è®¿é—®ç›®å½•å’Œdistçš„è®¿é—®ç›®å½•\n                            contentBase: [resolveFile('example'), resolveFile('dist')]\n                        })\n                    ] : isUglify ? [\n                        uglify()\n                    ] : []\n            )\n        ],\n        // ä½œç”¨ï¼šæŒ‡å‡ºåº”å°†å“ªäº›æ¨¡å—è§†ä¸ºå¤–éƒ¨æ¨¡å—ï¼Œå¦åˆ™ä¼šè¢«æ‰“åŒ…è¿›æœ€ç»ˆçš„ä»£ç é‡Œ\n        external: id => {\n            return !isExternal ? false :\n                (/@babel\\/runtime/.test(id) || /lodash/.test(id));\n        }\n    }\n})\n\nexport default config;\n```\n\nä½¿ç”¨`npm start`å¼€å¯å¼€å‘æ¨¡å¼ï¼›ä½¿ç”¨`npm run build`å¯ä»¥æ‰“åŒ…å‡ºæ–‡ä»¶ï¼›æ€»å…±å¯¼å‡ºä¸‰ç§æ ¼å¼æ–‡ä»¶ï¼šcjsã€esã€umdï¼Œumdæ ¼å¼çš„æ–‡ä»¶æœ‰å‹ç¼©å’Œæœªå‹ç¼©\n\n> startæ—¶å¦‚æœæŠ¥é”™â€œgetaddrinfo ENOTFOUND localhostâ€ï¼Œå‚è€ƒè¿™ç¯‡[æ–¹æ³•](https://segmentfault.com/a/1190000015274463)è§£å†³\n\nï¼ˆ2ï¼‰ç¬¬äºŒç§æ–¹æ³•ï¼šä½¿ç”¨rollup apiè¿›è¡Œæ‰“åŒ…\n\nbuildæ–‡ä»¶å¤¹ä¸‹æ–°å¢æ–‡ä»¶ï¼šnode.config.jsã€dev.jsã€build.js\n```javascript\n// node.config.js\nconst json = require('rollup-plugin-json');\nconst resolve = require('rollup-plugin-node-resolve');\nconst commonjs = require('rollup-plugin-commonjs');\nconst babelPlugin = require('rollup-plugin-babel');\nconst { uglify } = require('rollup-plugin-uglify');\nconst path = require('path');\nconst isDev = process.env.NODE_ENV !== 'production';\n\nconst resolveFile = function (filePath) {\n    return path.join(__dirname, '..', filePath)\n}\n\nmodule.exports.outputs = [\n    {\n        file: resolveFile('lib/index.js'),\n        format: 'cjs',\n        isExternal: true,\n    },\n    {\n        file: resolveFile('es/index.js'),\n        format: 'es',\n        isExternal: true,\n    },\n    {\n        file: resolveFile('dist/index.js'),\n        format: 'umd',\n        name: 'npmLibraryDemo',\n    },\n    {\n        file: resolveFile('dist/index.min.js'),\n        format: 'umd',\n        name: 'npmLibraryDemo',\n        isUglify: true,\n    }\n].map(i => {\n    i.sourcemap = isDev; // å¼€å‘æ¨¡å¼ï¼šå¼€å¯sourcemapæ–‡ä»¶çš„ç”Ÿæˆ\n    return i;\n});\n\nmodule.exports.configFun = function config({isUglify, isExternal} = {}) {\n    return {\n        input: resolveFile('src/main.js'),\n        plugins: [\n            // rollup-plugin-commonjsåº”è¯¥ç”¨åœ¨å…¶ä»–æ’ä»¶è½¬æ¢ä½ çš„æ¨¡å—ä¹‹å‰ - è¿™æ˜¯ä¸ºäº†é˜²æ­¢å…¶ä»–æ’ä»¶çš„æ”¹å˜ç ´åCommonJSçš„æ£€æµ‹\n            // ä½œç”¨ï¼šå°†CommonJSæ¨¡å—è½¬æ¢ä¸º ES2015 ä¾› Rollup å¤„ç†\n            commonjs(),\n            // ä½œç”¨ï¼šå¤„ç†jsonæ ¼å¼æ–‡ä»¶\n            json(),\n            // ä½œç”¨ï¼šå‘Šè¯‰ Rollup å¦‚ä½•æŸ¥æ‰¾å¤–éƒ¨æ¨¡å—\n            resolve({\n                // å°†è‡ªå®šä¹‰é€‰é¡¹ä¼ é€’ç»™è§£ææ’ä»¶\n                customResolveOptions: {\n                    moduleDirectory: 'node_modules'\n                }\n            }),\n            babelPlugin({\n                exclude: 'node_modules/**', // åªç¼–è¯‘æˆ‘ä»¬çš„æºä»£ç \n                runtimeHelpers: true,\n            }),\n            ...(\n                isUglify ? [ uglify() ] : []\n            )\n        ],\n        // ä½œç”¨ï¼šæŒ‡å‡ºåº”å°†å“ªäº›æ¨¡å—è§†ä¸ºå¤–éƒ¨æ¨¡å—ï¼Œå¦åˆ™ä¼šè¢«æ‰“åŒ…è¿›æœ€ç»ˆçš„ä»£ç é‡Œ\n        external: id => {\n            return !isExternal ? false :\n                (/@babel\\/runtime/.test(id) || /lodash/.test(id));\n        },\n    }\n};\n```\n\n```javascript\n// dev.js\nconst path = require('path');\nconst serve = require('rollup-plugin-serve');\nconst rollup = require('rollup');\nconst { configFun, outputs } = require('./node.config.js');\n\nconst resolveFile = function (filePath) {\n    return path.join(__dirname, '..', filePath)\n}\n\nlet watchOptions = [];\nconst len = outputs.length;\noutputs.forEach((output, i) => {\n    let options = {\n        isUglify: output.isUglify,\n        isExternal: output.isExternal,\n    }\n    let config = {\n        output,\n        ...configFun(options)\n    };\n    if (i === len - 1) {\n        config.plugins.push(\n            serve({ // ä½¿ç”¨å¼€å‘æœåŠ¡æ’ä»¶\n                port: 3001,\n                // è®¾ç½® exmapleçš„è®¿é—®ç›®å½•å’Œdistçš„è®¿é—®ç›®å½•\n                contentBase: [resolveFile('example'), resolveFile('dist')]\n            })\n        );\n    }\n    watchOptions.push(config);\n});\n\nconst watcher = rollup.watch(watchOptions);\n\nwatcher.on('event', event => {\n    // event.code ä¼šæ˜¯ä¸‹é¢å…¶ä¸­ä¸€ä¸ªï¼š\n    //   START        â€” ç›‘å¬å™¨æ­£åœ¨å¯åŠ¨ï¼ˆé‡å¯ï¼‰\n    //   BUNDLE_START â€” æ„å»ºå•ä¸ªæ–‡ä»¶æŸ\n    //   BUNDLE_END   â€” å®Œæˆæ–‡ä»¶æŸæ„å»º\n    //   END          â€” å®Œæˆæ‰€æœ‰æ–‡ä»¶æŸæ„å»º\n    //   ERROR        â€” æ„å»ºæ—¶é‡åˆ°é”™è¯¯\n    //   FATAL        â€” é‡åˆ°æ— å¯ä¿®å¤çš„é”™è¯¯\n    switch (event.code) {\n        case 'START':\n            console.log(`[info] ç›‘å¬å™¨æ­£åœ¨å¯åŠ¨ï¼ˆé‡å¯ï¼‰`);\n            break;\n        case 'BUNDLE_START':\n            console.log(`[info] å¼€å§‹æ„å»º ${event.output}`);\n            break;\n        case 'BUNDLE_END':\n            console.log(`[info] å®Œæˆæ„å»º ${event.output}`);\n            console.log(`[info] æ„å»ºæ—¶é•¿ ${event.duration}`);\n            break;\n        case 'END':\n            console.log(`[info] å®Œæˆæ‰€æœ‰æ„å»º`);\n            break;\n        case 'ERROR':\n        case 'FATAL':\n            console.log(`[error] æ„å»ºå‘ç”Ÿé”™è¯¯`);\n    }\n});\n\n// åœæ­¢ç›‘å¬\n// watcher.close();\n```\n\n```javascript\n// build.js\nconst rollup = require('rollup');\nconst { configFun, outputs } = require('./node.config.js');\n\noutputs.forEach(async (output) => {\n    const inputOptions = configFun({\n        isUglify: output.isUglify,\n        isExternal: output.isExternal,\n    });\n    build(inputOptions, output);\n})\n\nasync function build(inputOptions, outputOptions) {\n    console.log(`[INFO] å¼€å§‹ç¼–è¯‘ ${inputOptions.input}`);\n    // create a bundle\n    const bundle = await rollup.rollup(inputOptions);\n\n    // generate code and a sourcemap\n    const res = await bundle.generate(outputOptions);\n    console.log(`[INFO] ${res}`);\n\n    // or write the bundle to disk\n    await bundle.write(outputOptions);\n    console.log(`[SUCCESS] ç¼–è¯‘ç»“æŸ ${outputOptions.file}`);\n}\n```\n\nä½¿ç”¨`npm run node:dev`å¼€å¯å¼€å‘æ¨¡å¼ï¼›ä½¿ç”¨`npm run node:build`å¯ä»¥æ‰“åŒ…å‡ºæ–‡ä»¶ï¼›\n\nå¯ä»¥å®ç°ä¸€ä¸ªç®€å•åŠŸèƒ½å®éªŒä¸€ä¸‹é…ç½®æ˜¯å¦æˆåŠŸï¼Œæ¯”å¦‚è¿™æ¬¡æäº¤[ç®€å•é¢„åŠ è½½å›¾ç‰‡](https://github.com/jiaoyanlin/npm-library-demo/commit/e7a48b6f0332cf68a3d888a73867dc565d63da8e)\n\næ³¨æ„ï¼š\n\n1ã€examp/index.htmlä¸­å¼•å…¥çš„jsæ˜¯umdå½¢å¼çš„ï¼Œå¦‚æœæˆ‘ä»¬çš„ä»£ç ä¸­å¼•å…¥äº†è¿è¡Œæ—¶éœ€è¦ä½¿ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹åŒ…ï¼ˆä¾‹å¦‚lodashç­‰ï¼‰ï¼Œå¹¶ä¸”æ²¡æœ‰åœ¨index.htmlæ‰‹åŠ¨å°†è¯¥åŒ…å¼•å…¥ï¼Œä¼šå¯¼è‡´æ‰¾ä¸åˆ°è¯¥åŒ…è€ŒæŠ¥é”™ï¼›å› æ­¤æˆ‘è¿™é‡Œçš„é…ç½®ä¸­ï¼Œè¾“å‡ºæ–‡ä»¶å¦‚æœæ˜¯umdæ ¼å¼çš„ï¼Œå°±ä¸é…ç½®externalï¼Œç›´æ¥å°†ç¬¬ä¸‰æ–¹åŒ…çš„ä»£ç ä¸€èµ·æ‰“åŒ…è¿›æœ€ç»ˆçš„æ‰“åŒ…æ–‡ä»¶ä¸­ï¼›\n\n2ã€å½“è¾“å‡ºæ–‡ä»¶æ˜¯cjsæˆ–è€…esæ—¶ï¼Œé…ç½®externalï¼Œå³ä¸å°†æŸäº›ç¬¬ä¸‰æ–¹åŒ…æ‰“åŒ…ï¼Œå‡å°æœ€ç»ˆçš„æ‰“åŒ…æ–‡ä»¶ä½“ç§¯ï¼›ç”±äºæˆ‘ä»¬æŠŠç¬¬ä¸‰æ–¹åŒ…å®‰è£…åœ¨â€œdependenciesâ€ä¸­ï¼Œå½“åˆ«äººåŠ è½½æˆ‘ä»¬çš„è¿™ä¸ªåŒ…æ—¶ï¼Œä»–ä»¬çš„é¡¹ç›®ä¼šè‡ªåŠ¨å®‰è£…æˆ‘ä»¬çš„â€œdependenciesâ€ä¸­æ‰€æœ‰çš„åŒ…ï¼Œæ‰€ä»¥å¯ä»¥åŠ è½½åˆ°æˆ‘ä»¬å¼€å‘çš„åŒ…ä¸­æ¶‰åŠåˆ°çš„ç¬¬ä¸‰æ–¹åŒ…ï¼›\n\n3ã€å…³äºè°ƒè¯•\n\næˆ‘å¼€å‘åŒ…çš„è¿‡ç¨‹ä¸­ç”¨åˆ°äº†ä¸¤ç§è°ƒè¯•æ–¹å¼ï¼š\n\næ–¹æ³•1ï¼šç›´æ¥é€šè¿‡npm startå¯åŠ¨æ—¶çš„http://localhost:3001æ¥è°ƒè¯•ï¼›ç”±äºå¼€å¯äº†rollupçš„ç›‘å¬åŠŸèƒ½ï¼Œå› æ­¤å½“æˆ‘ä»¬ä¿®æ”¹ä»£ç æ—¶ï¼Œä¼šè‡ªåŠ¨æ„å»ºæ‰“åŒ…å‡ºæ–°ä»£ç ï¼Œåªè¦åˆ·æ–°æµè§ˆå™¨å°±èƒ½çœ‹åˆ°æœ€æ–°çš„æ•ˆæœï¼›\n\n> å¼€å¯source mapè°ƒè¯•æˆ‘åªåœ¨æ–¹æ³•1çš„è°ƒè¯•æ–¹æ³•ä¸­èƒ½æ­£å¸¸ä½¿ç”¨\n\næ–¹æ³•2ï¼šåœ¨é¡¹ç›®ä¸­è°ƒè¯•æ­£åœ¨å¼€å‘çš„åŒ…ï¼š\n\n> npm linkå‘½ä»¤é€šè¿‡é“¾æ¥ç›®å½•å’Œå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå®ç°ä»»æ„ä½ç½®çš„npmåŒ…å‘½ä»¤çš„å…¨å±€å¯æ‰§è¡Œã€‚\n\nåœ¨åŒ…ç›®å½•ä¸‹æ‰§è¡Œ`npm link`(å‡è®¾åŒ…åä¸ºpky-test)ï¼›\n\nåœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œ`npm link pky-test`å³å¯ä½¿ç”¨è¯¥åŒ…(æ‰§è¡Œ`npm unlink pky-test`å¯ä»¥åˆ é™¤åŒ…é“¾æ¥)ï¼›\n\nåœ¨åŒ…ç›®å½•ä¸‹æ‰§è¡Œ`npm start`å¯ä»¥å®æ—¶æ‰“åŒ…å‡ºæœ€æ–°ä»£ç \n\n\n#### 6ã€å‘å¸ƒï¼Œå¢åŠ å‘½ä»¤å®ç°è‡ªåŠ¨æ‰“æ ‡ç­¾å¹¶æ ¹æ®æäº¤è®°å½•ç”Ÿæˆchangelog\n\n`npm i -D conventional-changelog-cli`\n\npackage.json\n```json\n{\n    ...,\n    \"scripts\": {\n        ...,\n        \"tag\": \"node ./build/version.js\",\n        \"x\": \"npm --no-git-tag-version version major\",\n        \"y\": \"npm --no-git-tag-version version minor\",\n        \"z\": \"npm --no-git-tag-version version patch\",\n        \"postversion\": \"npm run changelog && git add . && npm run tag\",\n        \"changelog\": \"conventional-changelog -p angular -i CHANGELOG.md -s -r 0\",\n        \"prepublishOnly\": \"npm run build\",\n        \"postpublish\": \"npm run clean\"\n    }\n}\n```\n\næ–°å»ºæ–‡ä»¶build/version.jsï¼šæ ¹æ®packag.jsonä¸­çš„versionæäº¤ä»£ç å¹¶ä¸”æ‰“æ ‡ç­¾\n```javascript\nconst fs = require('fs');\nconst path = require('path');\nconst pathname = path.resolve(__dirname, '../package.json');\nconst pkg = JSON.parse(fs.readFileSync(pathname, 'utf-8'));\nlet version = pkg.version;\n\nconsole.log('version:', version)\n\nconst exec = require('child_process').exec;\nlet cmdStr = `git commit -m \"v${version}\" && git push && git tag -a \"v${version}\" -m \"${version}\" && git push origin --tags`;\nexec(cmdStr, function (err, stdout, stderr) {\n    console.log('exec:', err, stdout, stderr);\n});\n```\n\nï¼ˆ1ï¼‰æ‰§è¡Œ`npm run x/y/z`å¯ä»¥æ”¹å˜package.jsonä¸­çš„versionï¼Œç„¶åæ ¹æ®æäº¤çš„commitä¿¡æ¯è‡ªåŠ¨ç”Ÿæˆchangelogï¼Œæœ€åä¼šæ ¹æ®versionæäº¤ä»£ç å¹¶æ‰“æ ‡ç­¾ï¼›\n\nï¼ˆ2ï¼‰æ‰§è¡Œ`npm run publish`å‘å¸ƒä»£ç \n\n\n\nå…¶ä»–ï¼š\n\nï¼ˆ1ï¼‰æˆ‘æ²¡æœ‰ä½¿ç”¨preversioné’©å­å’Œ\nconventional-changelog-cliè‡ªåŠ¨ç”Ÿæˆchangelogï¼Œå› ä¸ºå¦‚æœåœ¨æ”¹å˜ç‰ˆæœ¬å·ä¹‹å‰æ‰§è¡Œè‡ªåŠ¨ç”Ÿæˆchangelogï¼Œé‚£ä¹ˆå½“å‰ç‰ˆæœ¬æäº¤çš„commitä¿¡æ¯ä¸ä¼šè¢«è‡ªåŠ¨ç”Ÿæˆåˆ°changelogä¸­ï¼ˆå› ä¸ºchangelogåªä¼šç”Ÿæˆå½“å‰ç‰ˆæœ¬ä¹‹å‰çš„commitè®°å½•ï¼‰\n\nï¼ˆ2ï¼‰å¿…é¡»éµå¾ªä¸€å®šçš„commitè§„èŒƒï¼Œæ‰èƒ½æ ¹æ®commitè®°å½•è‡ªåŠ¨ç”Ÿæˆchangelogï¼Œå…·ä½“è‡ªè¡Œç™¾åº¦ä¸‹conventional-changelog-cliçš„ä½¿ç”¨å“¦\n\nå› æ­¤ï¼Œæ¨èçš„å·¥ä½œæµï¼š\n\n 1.æ”¹åŠ¨ä»£ç \n \n 2.æäº¤è¿™äº›æ”¹åŠ¨\n \n 3.æ”¹å˜package.jsonä¸­çš„ç‰ˆæœ¬å·\n \n 4.ä½¿ç”¨conventional-changelogå·¥å…·\n \n 5.æäº¤ package.jsonå’ŒCHANGELOG.mdæ–‡ä»¶\n \n 6.æ‰“æ ‡ç­¾tag\n \n 7.pushä»£ç \n\nå¯ä»¥å‚è€ƒ[ä½¿ç”¨conventional-changelogç”Ÿæˆç‰ˆæœ¬æ—¥å¿—](https://github.com/rayliao/blog/issues/4)\n\n## ä¸‰ã€çŸ¥è¯†ç‚¹\n\n> å…ˆå­¦ä¹ ä¸‹ä»¥ä¸‹ä¸¤ç¯‡æ–‡ç« ï¼š\n> [å¦‚ä½•å¼€å‘å’Œç»´æŠ¤ä¸€ä¸ªnpmé¡¹ç›®](https://juejin.im/post/5bd32ecff265da0ab33193b4)\n> [ä½ æ‰€éœ€è¦çš„npmçŸ¥è¯†å‚¨å¤‡éƒ½åœ¨è¿™äº†](https://juejin.im/post/5d08d3d3f265da1b7e103a4d)\n\n#### 1ã€package.jsonä¸­éœ€è¦æ³¨æ„çš„ç‚¹ï¼š\n\nï¼ˆ1ï¼‰version: \n\nç‰ˆæœ¬æ ¼å¼: [ä¸»ç‰ˆæœ¬å·major.æ¬¡ç‰ˆæœ¬å·minor.ä¿®è®¢å·patch]\n\nå…ˆè¡Œç‰ˆæœ¬: å†…éƒ¨ç‰ˆæœ¬alphaã€å…¬æµ‹ç‰ˆæœ¬betaã€Release candiateæ­£å¼ç‰ˆæœ¬çš„å€™é€‰ç‰ˆæœ¬rcï¼Œä¾‹å¦‚1.0.0-alphaã€1.0.0-beta.1\n\nä½¿ç”¨npm versionè¿›è¡Œç‰ˆæœ¬å·ç®¡ç†ï¼š\n\n```\nnpm version 1.0.1  # æ˜¾ç¤ºè®¾ç½®ç‰ˆæœ¬å·ä¸º 1.0.1\nnpm version major  # major + 1ï¼Œå…¶ä½™ç‰ˆæœ¬å·å½’ 0\nnpm version minor  # minor + 1ï¼Œpatch å½’ 0\nnpm version patch  # patch + 1\n\n# é¢„å‘å¸ƒç‰ˆæœ¬\n# å½“å‰ç‰ˆæœ¬å·ä¸º 1.2.3\nnpm version prepatch  # ç‰ˆæœ¬å·å˜ä¸º 1.2.4-0ï¼Œä¹Ÿå°±æ˜¯ 1.2.4 ç‰ˆæœ¬çš„ç¬¬ä¸€ä¸ªé¢„å‘å¸ƒç‰ˆæœ¬\nnpm version preminor  # ç‰ˆæœ¬å·å˜ä¸º 1.3.0-0ï¼Œä¹Ÿå°±æ˜¯ 1.3.0 ç‰ˆæœ¬çš„ç¬¬ä¸€ä¸ªé¢„å‘å¸ƒç‰ˆæœ¬\nnpm version premajor  # ç‰ˆæœ¬å·å˜ä¸º 2.0.0-0ï¼Œä¹Ÿå°±æ˜¯ 2.0.0 ç‰ˆæœ¬çš„ç¬¬ä¸€ä¸ªé¢„å‘å¸ƒç‰ˆæœ¬\nnpm version prerelease  # ç‰ˆæœ¬å·å˜ä¸º 2.0.0-1ï¼Œä¹Ÿå°±æ˜¯ä½¿é¢„å‘å¸ƒç‰ˆæœ¬å·åŠ ä¸€\n\n# åœ¨gitç¯å¢ƒä¸‹npm versionä¼šé»˜è®¤æ‰§è¡Œgit add->git commit->git tag\nnpm version minor -m \"feat(version): upgrade to %s\"  # å¯è‡ªå®šä¹‰commit messageï¼›%s ä¼šè‡ªåŠ¨æ›¿æ¢ä¸ºæ–°ç‰ˆæœ¬å·\n\n# æ¨¡å— tag ç®¡ç†\n# å½“å‰ç‰ˆæœ¬ä¸º1.0.1\nnpm version prerelease  # 1.0.2-0\nnpm publish --tag beta # å‘å¸ƒåŒ…betaç‰ˆæœ¬ï¼Œæ‰“ä¸Šbeta tag\nnpm dist-tag ls xxx  # æŸ¥çœ‹æŸä¸ªåŒ…çš„tagï¼›beta: 1.0.2-0\nnpm install xxx@beta  # ä¸‹è½½betaç‰ˆæœ¬ 1.0.2-0\n# å½“prereleaseç‰ˆæœ¬å·²ç»ç¨³å®šäº†ï¼Œå¯ä»¥å°†prereleaseç‰ˆæœ¬è®¾ç½®ä¸ºç¨³å®šç‰ˆæœ¬\nnpm dist-tag add xxx@1.0.2-0 latest\nnpm dist-tag ls xxx  # latest: 1.0.2-0\n```\n\nnpm version å¯ä»¥æ›´æ–°åŒ…ç‰ˆæœ¬ï¼Œå½“ä»“åº“å·²ç»è¢«gitåˆå§‹åŒ–äº†ï¼Œé‚£ä¹ˆè¿è¡Œnpm versionä¿®æ”¹å®Œç‰ˆæœ¬å·ä»¥åï¼Œè¿˜ä¼šè¿è¡Œgit add ã€git commitå’Œgit tagçš„å‘½ä»¤ï¼Œå…¶ä¸­commitçš„ä¿¡æ¯é»˜è®¤æ˜¯è‡ªæ”¹å®Œçš„ç‰ˆæœ¬å·\n\nï¼ˆ2ï¼‰mainã€moduleã€sideEffectï¼š\n\n* mainã€moduleï¼šç”¨æ¥æŒ‡å®šnpmåŒ…çš„å…¥å£æ–‡ä»¶\n* main: npmè‡ªå¸¦ï¼Œä¸€èˆ¬è¡¨ç¤ºç¬¦åˆCommonJSè§„èŒƒçš„æ–‡ä»¶å…¥å£\n* module: ç¬¦åˆESæ¨¡å—è§„èŒƒçš„æ–‡ä»¶å…¥å£ï¼Œä½¿å¾—ä»£ç å¯è¿›è¡ŒTree Shakingï¼›å¹¶ä¸”åœ¨webpackçš„é»˜è®¤é…ç½®ä¸­ï¼Œmoduleçš„ä¼˜å…ˆçº§è¦é«˜äºmain\n\n> å› ä¸ºä¸€èˆ¬é¡¹ç›®é…ç½®babelæ—¶ï¼Œä¸ºäº†åŠ é€Ÿé¡¹ç›®ç¼–è¯‘è¿‡ç¨‹ï¼Œä¼šå¿½ç•¥node_modulesä¸­çš„æ¨¡å—ï¼Œæ‰€ä»¥moduleå…¥å£çš„æ–‡ä»¶æœ€å¥½æ˜¯ç¬¦åˆESmoduleè§„èŒƒçš„ES5çš„ä»£ç ï¼ˆè¯´ç™½äº†å°±æ˜¯è¯¥æ–‡ä»¶åªæœ‰å¯¼å…¥å¯¼å‡ºæ˜¯ç”¨çš„ES6æ¨¡å—åŒ–è¯­æ³•ï¼Œå…¶ä»–éƒ½å·²ç»è½¬æˆäº†es5ï¼‰ï¼Œwebpackæœ€ç»ˆä¼šæŠŠESmoduleè½¬æ¢ä¸ºå®ƒè‡ªå·±çš„commonjsè§„èŒƒçš„ä»£ç \n\n* sideEffectï¼šwebpack4ä¸­æ–°å¢ç‰¹æ€§ï¼Œè¡¨ç¤ºnpmåŒ…çš„ä»£ç æ˜¯å¦æœ‰å‰¯ä½œç”¨ï¼›\n\n> sideEffectå¯è®¾ç½®ä¸ºBooleanæˆ–è€…æ•°ç»„;å½“ä¸ºfalseæ—¶ï¼Œè¡¨æ˜è¿™ä¸ªåŒ…æ˜¯æ²¡æœ‰å‰¯ä½œç”¨çš„ï¼Œå¯ä»¥è¿›è¡ŒæŒ‰éœ€å¼•ç”¨;å¦‚æœä¸ºæ•°ç»„æ—¶ï¼Œæ•°ç»„çš„æ¯ä¸€é¡¹è¡¨ç¤ºçš„æ˜¯æœ‰å‰¯ä½œç”¨çš„æ–‡ä»¶åœ¨ç»„ä»¶åº“å¼€å‘çš„æ—¶å€™ï¼Œå¦‚æœæœ‰æ ·å¼æ–‡ä»¶ï¼Œéœ€è¦æŠŠæ ·å¼æ–‡ä»¶çš„è·¯å¾„æ”¾åˆ°sideEffectçš„æ•°ç»„ä¸­ï¼Œå› ä¸ºUglifyJsåªèƒ½è¯†åˆ«jsæ–‡ä»¶ï¼Œå¦‚æœä¸è®¾ç½®çš„è¯ï¼Œæœ€åæ‰“åŒ…çš„æ—¶å€™ä¼šæŠŠæ ·å¼æ–‡ä»¶å¿½ç•¥æ‰ã€‚\n\nç”±äºwebpack4å¼•å…¥äº†sideEffectï¼Œå› æ­¤å½“ç¬¬ä¸‰æ–¹åŒ…è®¾ç½®äº†sideEffectæ—¶ï¼Œå¯ä»¥ç›´æ¥å»é™¤æ²¡æœ‰ç”¨åˆ°çš„ä»£ç ï¼Œæ¯”å¦‚antdç»„ä»¶åº“è®¾ç½®sideEffectï¼Œé‚£åœ¨webpack4æ—¶å°±ä¸ç”¨å†ä¾èµ–babel-plugin-importè¿›è¡ŒæŒ‰éœ€åŠ è½½äº†ï¼Œwebpackæ‰“åŒ…æ—¶ç›´æ¥å°±èƒ½æŠŠæ²¡ç”¨åˆ°çš„ä»£ç é€šè¿‡tree-shakingæ¸…é™¤æ‰ã€‚\n\n> å‚è€ƒæ–‡ç« ï¼š\n> [package.json ä¸­çš„ Module å­—æ®µæ˜¯å¹²å˜›çš„](https://github.com/sunyongjian/blog/issues/37)\n> [èŠèŠ package.json æ–‡ä»¶ä¸­çš„ module å­—æ®µ](https://loveky.github.io/2018/02/26/tree-shaking-and-pkg.module/)\n\nï¼ˆ3ï¼‰tree shakingï¼Œç”¨æ¥å‰”é™¤ JavaScript ä¸­ç”¨ä¸ä¸Šçš„æ­»ä»£ç \n\n> æ›´å¤šè¯¦æƒ…å¯å‚è€ƒ[ä½¿ç”¨ Tree Shaking](http://www.xbhub.com/wiki/webpack/4%E4%BC%98%E5%8C%96/4-10%E4%BD%BF%E7%94%A8TreeShaking.html)\n\nè¦è®© Tree Shaking æ­£å¸¸å·¥ä½œçš„å‰ææ˜¯äº¤ç»™ Webpack çš„ JavaScript ä»£ç å¿…é¡»æ˜¯é‡‡ç”¨ ES6 æ¨¡å—åŒ–è¯­æ³•çš„ã€‚ å› ä¸º ES6 æ¨¡å—åŒ–è¯­æ³•æ˜¯é™æ€çš„ï¼ˆå¯¼å…¥å¯¼å‡ºè¯­å¥ä¸­çš„è·¯å¾„å¿…é¡»æ˜¯é™æ€çš„å­—ç¬¦ä¸²ï¼Œè€Œä¸”ä¸èƒ½æ”¾å…¥å…¶å®ƒä»£ç å—ä¸­ï¼‰ï¼Œè¿™è®© Webpack å¯ä»¥ç®€å•çš„åˆ†æå‡ºå“ªäº› export çš„è¢« import è¿‡äº†ã€‚ å¦‚æœä½ é‡‡ç”¨ ES5 ä¸­çš„æ¨¡å—åŒ–ï¼Œä¾‹å¦‚ module.export={...}ã€ require(x+y)ã€ if(x){require('./util')}ï¼ŒWebpack æ— æ³•åˆ†æå‡ºå“ªäº›ä»£ç å¯ä»¥å‰”é™¤ã€‚\n\nåŸºäºä»¥ä¸Šè¯´æ˜ï¼Œéœ€è¦åšä¸€äº›é…ç½®è®©tree shakingç”Ÿæ•ˆï¼š\n\nç¬¬ä¸€ç§æƒ…å†µ--é’ˆå¯¹é¡¹ç›®ï¼š\n* æŠŠé‡‡ç”¨ ES6 æ¨¡å—åŒ–çš„ä»£ç ç›´æ¥äº¤ç»™ Webpackï¼Œéœ€è¦é…ç½® Babel è®©å…¶ä¿ç•™ ES6 æ¨¡å—åŒ–è¯­å¥ï¼Œä¿®æ”¹ .babelrc æ–‡ä»¶å¦‚ä¸‹ï¼›è¦å‰”é™¤ç”¨ä¸ä¸Šçš„ä»£ç è¿˜å¾—ç»è¿‡ UglifyJS å»å¤„ç†ä¸€éï¼Œå› æ­¤éœ€è¦åœ¨é¡¹ç›®ä¸­å¼•å…¥UglifyJSPluginï¼›\n```\n{\n    \"presets\": [\n        [\n            \"env\",\n            {\n                \"modules\": false\n            }\n        ]\n    ]\n}\n```\n* åœ¨package.jsonä¸­æ ¹æ®å®é™…æƒ…å†µè®¾ç½®sideEffectsï¼Œè¯¦ç»†è§£é‡Šè¯·çœ‹ä¸Šé¢çš„ç¬¬ï¼ˆ2ï¼‰ç‚¹\n\nç¬¬äºŒç§æƒ…å†µ--é’ˆå¯¹npmåŒ…å¼€å‘ï¼š\n* æä¾›ä¸¤ä»½ä»£ç ï¼Œä¸€ä»½é‡‡ç”¨ CommonJS æ¨¡å—åŒ–è¯­æ³•ï¼Œä¸€ä»½é‡‡ç”¨ ES6 æ¨¡å—åŒ–è¯­æ³•ï¼Œpackage.json æ–‡ä»¶ä¸­æœ‰ä¸¤ä¸ªå­—æ®µï¼š\n\n```\n{\n  \"main\": \"lib/index.js\", // æŒ‡æ˜é‡‡ç”¨ CommonJS æ¨¡å—åŒ–çš„ä»£ç å…¥å£\n  \"module\": \"es/index.js\" // æŒ‡æ˜é‡‡ç”¨ ES6 æ¨¡å—åŒ–çš„ä»£ç å…¥å£ï¼›å½“è¯¥ä»£ç å­˜åœ¨æ—¶ï¼Œwebpackä¼šä¼˜å…ˆåŠ è½½è¿™ä¸ªä»£ç \n}\n```\n* æ ¹æ®æƒ…å†µè®¾ç½®package.jsonä¸­çš„sideEffectså­—æ®µ\n\n\n> å…³äºtree shakingã€sideEffectsä½¿ç”¨è¯·æŸ¥çœ‹ï¼š\n> [Tree-Shakingæ€§èƒ½ä¼˜åŒ–å®è·µ - åŸç†ç¯‡](https://juejin.im/post/5a4dc842518825698e7279a9)\n> [ä½ çš„Tree-Shakingå¹¶æ²¡ä»€ä¹ˆåµç”¨](https://juejin.im/post/5a5652d8f265da3e497ff3de) \n> [æ·±å…¥æµ…å‡º sideEffects](https://www.lindongzhou.com/article/know-sideEffects) \n> [Webpack ä¸­çš„ sideEffects åˆ°åº•è¯¥æ€ä¹ˆç”¨](https://zhuanlan.zhihu.com/p/40052192)\n> \n\nç”±æ–‡ç« å¯çŸ¥sideEffectså¹¶ä¸æ˜¯åœ¨é¡¹ç›®çœŸçš„ä¸å­˜åœ¨å‰¯ä½œç”¨ä»£ç æ—¶æ‰å¯ä»¥è®¾ç½®\n\n#### 2ã€æ§åˆ¶npmå‘å¸ƒçš„åŒ…åŒ…å«çš„æ–‡ä»¶æœ‰ä»¥ä¸‹æ–¹å¼ï¼š\n\n* package.json#filesï¼šæ•°ç»„ï¼Œè¡¨ç¤ºå¯ä»¥åŒ…å«å“ªäº›æ–‡ä»¶ï¼Œæ ¼å¼å’Œ.gitignoreçš„å†™æ³•ä¸€æ ·\n* .npmignoreï¼šè¡¨ç¤ºå“ªäº›æ–‡ä»¶å°†è¢«å¿½ç•¥ï¼Œæ ¼å¼å’Œ.gitignoreçš„å†™æ³•ä¸€æ ·\n* .gitignoreï¼šè¡¨ç¤ºè¦å¿½ç•¥å“ªäº›æ–‡ä»¶\n\nä¼˜å…ˆçº§ï¼šfiles > .npmignore > .gitignore\n\n#### 3ã€package-lock.json:\n\n* package-lock.jsonæŠŠæ‰€æœ‰ä¾èµ–æŒ‰ç…§é¡ºåºåˆ—å‡ºæ¥ï¼Œç¬¬ä¸€æ¬¡å‡ºç°çš„åŒ…åä¼šæå‡åˆ°é¡¶å±‚ï¼Œåé¢é‡å¤å‡ºç°çš„å°†ä¼šæ”¾å…¥è¢«ä¾èµ–åŒ…çš„node_moduleså½“ä¸­ï¼Œå› æ­¤ä¼šå¼•èµ·ä¸å®Œå…¨æ‰å¹³åŒ–é—®é¢˜ã€‚\n* åœ¨å¼€å‘åº”ç”¨æ—¶ï¼Œå»ºè®®æŠŠpackage-lock.jsonæ–‡ä»¶æäº¤åˆ°ä»£ç ä»“åº“ï¼Œä»è€Œè®©å›¢é˜Ÿæˆå‘˜ã€è¿ç»´éƒ¨ç½²äººå‘˜æˆ–CIç³»ç»Ÿå¯ä»¥åœ¨æ‰§è¡Œnpm installæ—¶å®‰è£…çš„ä¾èµ–ç‰ˆæœ¬éƒ½æ˜¯ä¸€è‡´çš„ã€‚\n* ä½†åœ¨å¼€å‘ä¸€ä¸ªåº“æ—¶ï¼Œåˆ™ä¸åº”æŠŠpackage-lock.jsonæ–‡ä»¶æäº¤åˆ°ä»“åº“ä¸­ã€‚å®é™…ä¸Šï¼Œnpmä¹Ÿé»˜è®¤ä¸ä¼šæŠŠpackage-lock.jsonæ–‡ä»¶å‘å¸ƒå‡ºå»ã€‚ä¹‹æ‰€ä»¥è¿™ä¹ˆåšï¼Œæ˜¯å› ä¸ºåº“é¡¹ç›®ä¸€èˆ¬æ˜¯è¢«å…¶ä»–é¡¹ç›®ä¾èµ–çš„ï¼Œåœ¨ä¸å†™æ­»çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥å¤ç”¨ä¸»é¡¹ç›®å·²ç»åŠ è½½è¿‡çš„åŒ…ï¼Œè€Œä¸€æ—¦åº“ä¾èµ–çš„æ˜¯ç²¾ç¡®çš„ç‰ˆæœ¬å·é‚£ä¹ˆå¯èƒ½ä¼šé€ æˆåŒ…çš„å†—ä½™ã€‚\n\n#### 4ã€npm scripts è„šæœ¬ã€npxã€pathç¯å¢ƒå˜é‡\n\npackage.jsonï¼š\n\n```\n\"scripts\": {\n    \"serve\": \"vue-cli-service serve\",\n    ...\n}\n```\n\nåŸç†: package.json ä¸­çš„ bin å­—æ®µï¼›å­—æ®µ bin è¡¨ç¤ºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶åˆ°æŒ‡å®šæ–‡ä»¶æºçš„æ˜ å°„ã€‚\n\nä¾‹å¦‚åœ¨@vue/cli-serviceçš„package.jsonä¸­ï¼š\n\n```\n\"bin\": {\n    \"vue-cli-service\": \"bin/vue-cli-service.js\"\n}\n```\n\nnpxï¼šæ–¹ä¾¿è°ƒç”¨é¡¹ç›®å†…éƒ¨å®‰è£…çš„æ¨¡å—\n\nPATHç¯å¢ƒå˜é‡ï¼šæ‰§è¡Œ`env`å¯æŸ¥çœ‹å½“å‰æ‰€æœ‰ç¯å¢ƒå˜é‡ï¼›`npm run env`å¯æŸ¥çœ‹è„šæœ¬è¿è¡Œæ—¶çš„ç¯å¢ƒå˜é‡;é€šè¿‡npm runå¯åœ¨ä¸æ·»åŠ è·¯å¾„å‰ç¼€çš„æƒ…å†µä¸‹ç›´æ¥è®¿é—®å½“å‰é¡¹ç›®node_modules/.binç›®å½•é‡Œé¢çš„å¯æ‰§è¡Œæ–‡ä»¶\n\n#### 5ã€å…¶ä»–\n\nï¼ˆ1ï¼‰\n\n```\nnpm outdated # æŸ¥çœ‹å½“å‰é¡¹ç›®ä¸­å¯å‡çº§çš„æ¨¡å—\n\nnpm audit [--json]  # å®‰å…¨æ¼æ´æ£€æŸ¥ï¼›åŠ ä¸Š--jsonï¼Œä»¥ JSON æ ¼å¼ç”Ÿæˆæ¼æ´æŠ¥å‘Š\n\nnpm audit fix # ä¿®å¤å­˜åœ¨å®‰å…¨æ¼æ´çš„ä¾èµ–åŒ…ï¼ˆè‡ªåŠ¨æ›´æ–°åˆ°å…¼å®¹çš„å®‰å…¨ç‰ˆæœ¬ï¼‰\n\nnpm audit fix --force # å°†ä¾èµ–åŒ…ç‰ˆæœ¬å·å‡çº§åˆ°æœ€æ–°çš„å¤§ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯å…¼å®¹çš„å®‰å…¨ç‰ˆæœ¬ï¼›å°½é‡é¿å…ä½¿ç”¨--force\n\n```\n\nï¼ˆ2ï¼‰gitæäº¤å¯å‚è€ƒä»¥ä¸‹è§„èŒƒï¼š\n\nfeatï¼šæ–°åŠŸèƒ½ï¼ˆfeatureï¼‰\n\nfixï¼šä¿®è¡¥bug\n\ndocsï¼šæ–‡æ¡£ï¼ˆdocumentationï¼‰\n\nstyleï¼š æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰\n\nrefactorï¼šé‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹bugçš„ä»£ç å˜åŠ¨ï¼‰\n\ntestï¼šå¢åŠ æµ‹è¯•\n\nchoreï¼šæ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨\n\n\nï¼ˆ3ï¼‰npmåŒ…å‘å¸ƒæµç¨‹ï¼š\n\n[äºWebpackå’ŒES6æ„å»ºNPMåŒ…](https://juejin.im/post/5ac4a4d85188255c4c107e42)\n\n[ä»diståˆ°esï¼šå‘ä¸€ä¸ªNPMåº“ï¼Œæˆ‘èœ•äº†ä¸€å±‚çš®](https://segmentfault.com/a/1190000018242549)\n\n[8102å¹´åº•å¦‚ä½•å¼€å‘å’Œç»´æŠ¤ä¸€ä¸ªnpmé¡¹ç›®](https://juejin.im/post/5bd32ecff265da0ab33193b4)\n\n\nï¼ˆ4ï¼‰å‡ ç‚¹å¿ƒå¾—ï¼š\n\n1ã€å¯¹äºwebpackæ„å»ºçš„é¡¹ç›®æˆ–è€…åŒ…ï¼Œåœ¨babelä¸­è®¾ç½®`\"modules\": false`å…¶å®åªæ˜¯è®©é¡¹ç›®ä¸­ç»è¿‡babelè½¬åŒ–åçš„ä»£ç ï¼ˆå·²ç»æ˜¯es5ï¼‰ä»ç„¶ä¿ç•™ ES6 æ¨¡å—åŒ–è¯­å¥ï¼Œä¹Ÿå°±æ˜¯åªæœ‰å¯¼å…¥å¯¼å‡ºè¯­å¥ä¿ç•™es6å†™æ³•ï¼›æ­¤æ—¶webpackä¼šè‡ªåŠ¨å†å»è½¬æ¢è¿™é‡Œçš„es6æ¨¡å—åŒ–è¯­å¥ï¼›ä¹Ÿå°±æ˜¯ES6 æ¨¡å—åŒ–è¯­å¥äº¤ç»™webpackè‡ªå·±å»è½¬æ¢ï¼›\n\n2ã€å¯¹äºwebpackæ„å»ºç”Ÿæˆçš„åŒ…ï¼Œä¸æ”¯æŒå¯¼å‡ºä¸ºes6æ¨¡å—ï¼ˆæœ€ç»ˆéƒ½è½¬æˆäº†es5ï¼Œæ— æ³•ä¿ç•™ES6 æ¨¡å—åŒ–è¯­å¥ä¸è½¬æ¢ï¼‰ï¼Œå› æ­¤å¦‚æœå¼€å‘çš„npmåŒ…å¸Œæœ›å¯¼å‡ºå¤šç§æ ¼å¼ï¼Œæ¨èä½¿ç”¨rollup\n\n3ã€ä¸ºäº†åŠ é€Ÿé¡¹ç›®ç¼–è¯‘è¿‡ç¨‹ï¼Œä¸€èˆ¬éƒ½ä¼šè®¾ç½®å¿½ç•¥ç¼–è¯‘node_modulesä¸­çš„æ¨¡å—ï¼Œæ‰€ä»¥è¿™å°±éœ€è¦æˆ‘ä»¬å¼€å‘çš„npmåŒ…æ˜¯ç¼–è¯‘è¿‡çš„ï¼›\n\n> ä¸€èˆ¬æ¥è¯´ï¼Œç”¨äºnodeç¯å¢ƒçš„åŒ…ï¼Œåªè¦æä¾›ç¬¦åˆCMDè§„èŒƒçš„åŒ…ï¼Œä½†ç”¨äºwebçš„åŒ…ï¼Œå°±è¦æä¾›æ›´å¤šçš„é€‰é¡¹ï¼š\n\n> * libï¼šç¬¦åˆcommonjsè§„èŒƒçš„æ–‡ä»¶ï¼Œä¸€èˆ¬æ”¾åœ¨libè¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢ï¼Œå…¥å£æ˜¯mian\n\n> * esï¼šç¬¦åˆES moduleè§„èŒƒçš„æ–‡ä»¶ï¼Œä¸€èˆ¬æ”¾åœ¨esè¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢ï¼Œå…¥å£æ˜¯module\n\n> * distï¼šç»è¿‡å‹ç¼©çš„æ–‡ä»¶ï¼Œä¸€èˆ¬æ˜¯å¯ä»¥é€šè¿‡scriptæ ‡ç­¾ç›´æ¥å¼•ç”¨çš„æ–‡ä»¶\n\n"},ddCq:function(n,e){n.exports='# webpack 4 â€” tree shakingã€sideEffects\n\n> æœ¬æ–‡ä»…ç”¨äºè®°å½•å­¦ä¹ tree shakingè¿‡ç¨‹ä¸­çš„è¦ç‚¹åŠä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼Œä¸ä¼šè¯¦ç»†ä»‹ç»tree-shakingï¼Œå¯ä»¥æ ¹æ®æœ¬æ–‡æåˆ°çš„å‚è€ƒæ–‡ç« è¿›è¡Œæ›´ç»†è‡´çš„å­¦ä¹ \n\n### tree-shaking\n\n> åŸºäºES6æ¨¡å—è¿›è¡Œæ¨¡å—é™æ€åˆ†æï¼Œå°†æ²¡æœ‰ä½¿ç”¨çš„æ¨¡å—æ‘‡æ‰ï¼Œè¾¾åˆ°åˆ é™¤æ— ç”¨ä»£ç çš„ç›®çš„ã€‚\n\n***åŸºäºES6æ¨¡å—è¿›è¡Œæ¨¡å—é™æ€åˆ†ææ˜¯ä»€ä¹ˆ***\n\næ‰€è°“é™æ€åˆ†æå°±æ˜¯ä¸æ‰§è¡Œä»£ç ï¼Œä»å­—é¢é‡ä¸Šå¯¹ä»£ç è¿›è¡Œåˆ†æï¼ŒES6ä¹‹å‰çš„æ¨¡å—åŒ–ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥åŠ¨æ€requireä¸€ä¸ªæ¨¡å—ï¼Œåªæœ‰æ‰§è¡Œåæ‰çŸ¥é“å¼•ç”¨çš„ä»€ä¹ˆæ¨¡å—ï¼Œè¿™ä¸ªå°±ä¸èƒ½é€šè¿‡é™æ€åˆ†æå»åšä¼˜åŒ–ã€‚è€ŒES6æ¨¡å—ä¾èµ–å…³ç³»æ˜¯ç¡®å®šçš„ï¼Œå’Œè¿è¡Œæ—¶çš„çŠ¶æ€æ— å…³ï¼Œå¯ä»¥è¿›è¡Œå¯é çš„é™æ€åˆ†æï¼Œè¿™å°±æ˜¯tree-shakingçš„åŸºç¡€ã€‚\n\nè¿™æ˜¯ ES6 modules åœ¨è®¾è®¡æ—¶çš„ä¸€ä¸ªé‡è¦è€ƒé‡ï¼Œä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ²¡æœ‰ç›´æ¥é‡‡ç”¨ CommonJSï¼Œæ­£æ˜¯åŸºäºè¿™ä¸ªåŸºç¡€ä¸Šï¼Œæ‰ä½¿å¾— tree-shaking æˆä¸ºå¯èƒ½ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ rollup å’Œ webpack 2 éƒ½è¦ç”¨ ES6 module syntax æ‰èƒ½ tree-shakingã€‚\n\né€šè¿‡é™å®šè¯­æ³•ï¼Œè®©æœ¬æ¥éœ€è¦è¿è¡Œä»£ç æ‰èƒ½ç¡®å®šçš„ä¾èµ–ï¼Œå¯ä»¥åœ¨åˆ†æ AST é˜¶æ®µå°±ç¡®å®šä¸‹æ¥ï¼›åŠ¨æ€ == æ‹¼å­—ç¬¦ä¸²ï¼Œé™æ€ == ä¸å‡†æ‹¼å­—ç¬¦ä¸²;\n\næ€»ç»“ï¼šè¦è®© Tree Shaking æ­£å¸¸å·¥ä½œçš„å‰ææ˜¯äº¤ç»™ Webpack çš„ JavaScript ä»£ç å¿…é¡»æ˜¯é‡‡ç”¨ ES6 æ¨¡å—åŒ–è¯­æ³•çš„ã€‚ å› ä¸º ES6 æ¨¡å—åŒ–è¯­æ³•æ˜¯é™æ€çš„ï¼ˆå¯¼å…¥å¯¼å‡ºè¯­å¥ä¸­çš„è·¯å¾„å¿…é¡»æ˜¯é™æ€çš„å­—ç¬¦ä¸²ï¼Œè€Œä¸”ä¸èƒ½æ”¾å…¥å…¶å®ƒä»£ç å—ä¸­ï¼‰ï¼Œè¿™è®© Webpack å¯ä»¥ç®€å•çš„åˆ†æå‡ºå“ªäº› export çš„è¢« import è¿‡äº†ã€‚ å¦‚æœä½ é‡‡ç”¨ ES5 ä¸­çš„æ¨¡å—åŒ–ï¼Œä¾‹å¦‚ module.export={...}ã€ require(x+y)ã€ if(x){require(\'./util\')}ï¼ŒWebpack æ— æ³•åˆ†æå‡ºå“ªäº›ä»£ç å¯ä»¥å‰”é™¤ã€‚\n\nåŸºäºä»¥ä¸Šè¯´æ˜ï¼Œéœ€è¦åšä¸€äº›é…ç½®è®©tree shakingç”Ÿæ•ˆï¼š\n\nç¬¬ä¸€ç§æƒ…å†µ--é’ˆå¯¹é¡¹ç›®ï¼š\n* æŠŠé‡‡ç”¨ ES6 æ¨¡å—åŒ–çš„ä»£ç ç›´æ¥äº¤ç»™ Webpackï¼Œéœ€è¦é…ç½® Babel è®©å…¶ä¿ç•™ ES6 æ¨¡å—åŒ–è¯­å¥ï¼Œä¿®æ”¹ .babelrc æ–‡ä»¶å¦‚ä¸‹ï¼›è¦å‰”é™¤ç”¨ä¸ä¸Šçš„ä»£ç è¿˜å¾—ç»è¿‡ UglifyJS å»å¤„ç†ä¸€éï¼Œå› æ­¤éœ€è¦åœ¨é¡¹ç›®ä¸­å¼•å…¥UglifyJSPluginï¼›\n```\n{\n    "presets": [\n        [\n            "env",\n            {\n                "modules": false\n            }\n        ]\n    ]\n}\n```\n* æ ¹æ®å®é™…æƒ…å†µåœ¨package.jsonä¸­æ·»åŠ è®¾ç½®sideEffectsï¼Œè¯¦ç»†è§£é‡Šè¯·çœ‹ä¸‹é¢å…³äºsideEffectsçš„ä»‹ç»\n\nç¬¬äºŒç§æƒ…å†µ--é’ˆå¯¹npmåŒ…å¼€å‘ï¼š\n* æä¾›ä¸¤ä»½ä»£ç ï¼Œä¸€ä»½é‡‡ç”¨ CommonJS æ¨¡å—åŒ–è¯­æ³•ï¼Œä¸€ä»½é‡‡ç”¨ ES6 æ¨¡å—åŒ–è¯­æ³•ï¼Œpackage.json æ–‡ä»¶ä¸­æœ‰ä¸¤ä¸ªå­—æ®µï¼š\n\n```\n{\n  "main": "lib/index.js", // æŒ‡æ˜é‡‡ç”¨ CommonJS æ¨¡å—åŒ–çš„ä»£ç å…¥å£\n  "module": "es/index.js" // æŒ‡æ˜é‡‡ç”¨ ES6 æ¨¡å—åŒ–çš„ä»£ç å…¥å£ï¼›å½“è¯¥ä»£ç å­˜åœ¨æ—¶ï¼Œwebpackä¼šä¼˜å…ˆåŠ è½½è¿™ä¸ªä»£ç \n}\n```\n* æ ¹æ®æƒ…å†µè®¾ç½®package.jsonä¸­çš„sideEffectså­—æ®µ\n\n\n### webpack4 sideEffectsé…ç½®\n\n> ç”±äºå‰¯ä½œç”¨çš„å­˜åœ¨ï¼Œä½¿å¾—webpackæ²¡åŠæ³•å¾ˆå¥½åœ°è¿›è¡Œtree shakingï¼›å¦‚æœä½¿ç”¨sideEffectsæ ‡è®°ï¼Œè®©webpackçŸ¥é“æˆ‘ä»¬æœŸæœ›æ•´ä¸ªé¡¹ç›®éƒ½æ˜¯æ— å‰¯ä½œç”¨çš„ï¼Œé‚£ä¹ˆå¯ä»¥è®©webpackæ›´å¥½åœ°æ¸…é™¤å¤šä½™çš„ä»£ç ï¼ˆè¦ä»”ç»†è¯„ä¼°æˆ‘ä»¬çš„é¡¹ç›®/åŒ…çœŸçš„ä¸éœ€è¦è¿™äº›å‰¯ä½œç”¨ï¼‰\n\n> å‰¯ä½œç”¨ï¼šæŸä¸ªæ–¹æ³•æˆ–è€…æ–‡ä»¶æ‰§è¡Œäº†ä¹‹åï¼Œè¿˜ä¼šå¯¹å…¨å±€å…¶ä»–å†…å®¹äº§ç”Ÿå½±å“çš„ä»£ç ï¼›æ¯”å¦‚ç»™windowåŠ å…¨å±€å˜é‡ç­‰\n\n```\ndemo\n    |--src\n        |--util\n            |-- index.js\n            |-- a.js\n            |-- b.js\n        |--main.js\n```\n\n```javascript\n// util/a.js\nconsole.log(\'----------a.js\')\nwindow.util = \'----------a.js\';\nexport function a_1() {\n    console.log(\'----------a_1\')\n}\nexport function a_2() {\n    console.log(\'----------a_2\')\n}\n```\n\n```javascript\n// util/b.js\nconsole.log(\'----------b.js\')\nwindow.util = \'----------b.js\';\nexport function b_1() {\n    console.log(\'----------b_1\')\n}\nexport function b_2() {\n    console.log(\'----------b_2\')\n}\n```\n\n```javascript\n// util/index.js\nexport * from "./a";\nexport * from "./b";\n```\n\n```javascript\n// main.js\nimport { a_1 } from \'./util\';\na_1();\n```\n\né…ç½®åŸºç¡€çš„webpackè¿›è¡Œæ‰“åŒ…ï¼ˆè®°å¾—ä½¿ç”¨productionæ¨¡å¼ï¼‰\n\nï¼ˆ1ï¼‰å½“package.jsonä¸é…ç½®sideEffectsæ—¶ï¼š\n\npackage.json\n```\n{\n    name: \'test\'\n}\n```\n\næ­¤æ—¶ä½¿ç”¨webpackæ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶ç®€åŒ–åä»£ç å¦‚ä¸‹ï¼š\n```javascript\n...\nfunction(o,n,s){\n    "use strict";\n    s.r(n),\n    console.log("----------a.js"),\n    window.util="----------a.js",\n    console.log("----------b.js"),\n    window.util="----------b.js",\n    console.log("----------a_1")\n}\n...\n```\n\nï¼ˆ2ï¼‰å½“package.jsoné…ç½®sideEffectsæ—¶ï¼š\n\npackage.json\n```\n{\n    name: \'test\',\n    "sideEffects": false\n}\n```\n\næ­¤æ—¶ä½¿ç”¨webpackæ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶ç®€åŒ–åä»£ç å¦‚ä¸‹ï¼š\n```javascript\n...\nfunction(o,n,i){\n    "use strict";\n    i.r(n),\n    console.log("----------a.js"),\n    window.util="----------a.js",\n    console.log("----------a_1")\n}\n...\n```\n\næ³¨æ„ç‚¹ï¼š\n\n1ã€sideEffectsï¼šsideEffectå¯è®¾ç½®ä¸ºBooleanæˆ–è€…æ•°ç»„ï¼ˆä¼ è¦ä¿ç•™å‰¯ä½œç”¨çš„æ–‡ä»¶æˆ–æ¨¡ç³ŠåŒ¹é…ï¼‰;å½“ä¸ºfalseæ—¶ï¼Œè¡¨æ˜è¿™ä¸ªåŒ…æ˜¯æ²¡æœ‰å‰¯ä½œç”¨çš„ï¼Œå¯ä»¥è¿›è¡ŒæŒ‰éœ€å¼•ç”¨;å¦‚æœä¸ºæ•°ç»„æ—¶ï¼Œæ•°ç»„çš„æ¯ä¸€é¡¹è¡¨ç¤ºçš„æ˜¯æœ‰å‰¯ä½œç”¨çš„æ–‡ä»¶åœ¨ç»„ä»¶åº“å¼€å‘çš„æ—¶å€™ï¼Œå¦‚æœæœ‰æ ·å¼æ–‡ä»¶ï¼Œéœ€è¦æŠŠæ ·å¼æ–‡ä»¶çš„è·¯å¾„æ”¾åˆ°sideEffectçš„æ•°ç»„ä¸­ï¼Œå› ä¸ºUglifyJsåªèƒ½è¯†åˆ«jsæ–‡ä»¶ï¼Œå¦‚æœä¸è®¾ç½®çš„è¯ï¼Œæœ€åæ‰“åŒ…çš„æ—¶å€™ä¼šæŠŠæ ·å¼æ–‡ä»¶å¿½ç•¥æ‰\n\nå®é™…å¼€å‘ä¸­ï¼Œæœ‰äº›å‰¯ä½œç”¨æ˜¯å¿…é¡»è¦ä¿ç•™çš„ï¼Œå› æ­¤ä¸èƒ½ç®€å•è®¾ç½®"sideEffects": falseï¼›webpackä¼šè®¤ä¸ºæ‰€æœ‰ `import \'xxx\'` è¯­å¥æ˜¯ä»…å¼•å…¥è€Œæœªä½¿ç”¨\n\npackage.json:\n```\n"sideEffects": [\n    "./style/**/*.css",\n    "./polyfill.js"\n]\n```\n\n> tree-shakingä»…åœ¨productionæ¨¡å¼ç”Ÿæ•ˆï¼Œå¦‚æœæŸäº›å¿…é¡»çš„æ–‡ä»¶å› ä¸ºæ²¡æœ‰æ­£ç¡®è®¾ç½®sideEffectsè€Œè¢«tree-shakingæ‰ï¼Œä¼šå¯¼è‡´ç”Ÿäº§ç¯å¢ƒå‡ºç°é—®é¢˜\n\n2ã€sideEffects å±€é™æ€§ï¼šsideEffects é…ç½®æ˜¯ä»¥æ–‡ä»¶ä¸ºç»´åº¦çš„, åªè¦ä½ ä½¿ç”¨äº†å…·å¤‡å‰¯ä½œç”¨çš„æ–‡ä»¶ä¸­çš„æŸä¸ªæ¨¡å—, å³ä¾¿ä½ åªç”¨äº†è¯¥æ–‡ä»¶ä¸­æ²¡æœ‰å‰¯ä½œç”¨çš„é‚£éƒ¨åˆ†åŠŸèƒ½, ä»ç„¶ä¼šå°†è¯¥æ–‡ä»¶çš„å‰¯ä½œç”¨ä¿ç•™\n\nä¸¾ä¾‹ï¼šåœ¨ main.js ä¸­å¢åŠ  b_1 æ–¹æ³•çš„å¼•å…¥, b_2 æ–¹æ³•ä¼šè¢« tree-shaking, ä½† `console.log(\'----------b.js\');window.util = \'----------b.js\';` ä¸ä¼šã€‚\n\n3ã€sideEffects é…ç½®å¯èƒ½ä¼šè®©äººç–‘æƒ‘, ä»£ç æ˜æ˜æ˜¯æœ‰å‰¯ä½œç”¨çš„, ä¸ºä»€ä¹ˆå¯ä»¥è®¾ç½®å®ƒæ˜¯"æ— å‰¯ä½œç”¨"?å…¶å® sideEffects å¹¶ä¸æ˜¯åœ¨é¡¹ç›®çœŸçš„ä¸å­˜åœ¨å‰¯ä½œç”¨ä»£ç æ—¶æ‰å¯ä»¥è®¾ç½®ï¼Œæ˜¯å‘Šè¯‰ webpack è¯¥æ¨¡å—æ˜¯å¯ä»¥å®‰å…¨çš„ tree-shaking çš„, æ— éœ€å…³å¿ƒå…¶å‰¯ä½œç”¨ã€‚\n\n4ã€åœ¨é¡¹ç›®ä¸­é…ç½®package.jsonçš„sideEffectsä¼šå½±å“æœ¬é¡¹ç›®çš„æºç æ‰“åŒ…ï¼Œä¸ä¼šå½±å“npmä¾èµ–åŒ…çš„â€œå‰¯ä½œç”¨â€æ‰“åŒ…ï¼›å¼•å…¥npmä¾èµ–åŒ…æ—¶ï¼Œä¼šæ ¹æ®è¯¥npmä¾èµ–åŒ…package.jsonçš„sideEffectsçš„é…ç½®æ¥ç¡®å®šå¼•å…¥çš„ç›¸å…³ä»£ç æ˜¯å¦æ¶ˆé™¤â€œå‰¯ä½œç”¨â€ã€‚\n\nå› æ­¤ï¼Œå¼€å‘npmåŒ…çš„æ—¶å€™å¯æ ¹æ®æƒ…å†µè®¾ç½®sideEffectsï¼Œæ ¹æ®æƒ…å†µå°½é‡ä»¥å•ç‹¬çš„å½¢å¼è¾“å‡ºã€‚\n\n> ç”±äºwebpack4å¼•å…¥äº†sideEffectï¼Œå› æ­¤å½“ç¬¬ä¸‰æ–¹åŒ…è®¾ç½®äº†sideEffectæ—¶ï¼Œå¯ä»¥ç›´æ¥å»é™¤æ²¡æœ‰ç”¨åˆ°çš„ä»£ç ï¼Œæ¯”å¦‚antdç»„ä»¶åº“è®¾ç½®sideEffectï¼Œé‚£åœ¨webpack4æ—¶å°±ä¸ç”¨å†ä¾èµ–babel-plugin-importè¿›è¡ŒæŒ‰éœ€åŠ è½½äº†ï¼Œwebpackæ‰“åŒ…æ—¶ç›´æ¥å°±èƒ½æŠŠæ²¡ç”¨åˆ°çš„ä»£ç é€šè¿‡tree-shakingæ¸…é™¤æ‰ã€‚\n\n### å‚è€ƒæ–‡ç« \n\n[package.json ä¸­çš„ Module å­—æ®µæ˜¯å¹²å˜›çš„](https://github.com/sunyongjian/blog/issues/37)\n\n[èŠèŠ package.json æ–‡ä»¶ä¸­çš„ module å­—æ®µ](https://loveky.github.io/2018/02/26/tree-shaking-and-pkg.module/)ï¼šæ ¹æ®package.jsonä¸­çš„moduleå­—æ®µå¯ä»¥è®©webpackä¼˜å…ˆä½¿ç”¨esæ¨¡å—è§„èŒƒçš„ä»£ç \n\n[ä½¿ç”¨ Tree Shaking](http://www.xbhub.com/wiki/webpack/4%E4%BC%98%E5%8C%96/4-10%E4%BD%BF%E7%94%A8TreeShaking.html)ï¼šè¯¥æ–‡ç« ä¸­æœ‰äº›ç”¨æ³•å¤ªæ—§äº†ï¼Œå› æ­¤å¤§æ¦‚çœ‹ä¸‹äº†è§£ä¸‹tree-shakingæ˜¯å•¥å°±å¯ä»¥äº†\n\n[é™æ€åˆ†æ](https://www.zhihu.com/question/63240671)ï¼šå‘Šè¯‰ä½ ä»€ä¹ˆæ˜¯é™æ€åˆ†æ\n\n[ä½ çš„Tree-Shakingå¹¶æ²¡ä»€ä¹ˆåµç”¨](https://juejin.im/post/5a5652d8f265da3e497ff3de) \n\n[æ·±å…¥æµ…å‡º sideEffects](https://www.lindongzhou.com/article/know-sideEffects)\n\n[Webpack ä¸­çš„ sideEffects åˆ°åº•è¯¥æ€ä¹ˆç”¨](https://zhuanlan.zhihu.com/p/40052192)\n\n[Tree-Shakingæ€§èƒ½ä¼˜åŒ–å®è·µ - åŸç†ç¯‡](https://juejin.im/post/5a4dc842518825698e7279a9)\n\n[Tree-Shakingæ€§èƒ½ä¼˜åŒ–å®è·µ - å®è·µç¯‡](https://juejin.im/post/5a4dca1d518825128654fa78)\n\n[Webpack Tree shaking æ·±å…¥æ¢ç©¶](https://www.codercto.com/a/30428.html)\n\n[webpack 4 æ–°å¢ sideEffects é…ç½®çš„ä½œç”¨å’Œæ³¨æ„äº‹é¡¹](https://juejin.im/post/5d4d39c35188256c234351ca)\n\n'},gAYf:function(n,e){n.exports="# React-Nativeå¼€å‘ï¼šreact-native-file-selectoré€‰æ‹©æ–‡ä»¶ç»„ä»¶çš„ä½¿ç”¨ï¼ˆå®‰å“ï¼‰\n\n> ä¸ºäº†ä¸Šä¼ æ–‡ä»¶ï¼Œæœç´¢äº†å¾ˆå¤šèµ„æ–™ç»ˆäºæ‰¾åˆ°é€‰æ‹©æœ¬åœ°æ–‡ä»¶å¹¶è·å–åˆ°å…·ä½“è·¯å¾„çš„ç»„ä»¶ï¼Œå¯ä»¥åœ¨githubä¸ŠæŸ¥æ‰¾åˆ°[è¯¥ç»„ä»¶](https://github.com/prscX/react-native-file-selector)\n\nä»¥ä¸‹ä¸ºè¯¥ç»„ä»¶ä½¿ç”¨å‰çš„å¼•å…¥å·¥ä½œï¼š\n\n1ã€`npm install react-native-file-selector --save`\n\n2ã€`react-native link react-native-file-selector`\n\n3ã€/app/build.gradleï¼š\n\nå¢åŠ `<uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"/>`\n\n4ã€MainApplication.javaï¼š\n\n`import ui.fileselector.RNFileSelectorPackage; // å¢åŠ è¿™å¥`\n\n```\n...\nprotected List<ReactPackage> getPackages() {\n    return Arrays.<ReactPackage>asList(\n        new MainReactPackage(),\n        new RNFileSelectorPackage(), // å¢åŠ è¿™å¥\n        new PickerPackage()\n    );\n}\n...\n```\n\n5ã€å¢åŠ æ–‡ä»¶android/app/src/main/res/values/colors.xmlï¼š\n\n```\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<resources>\n    <color name=\"colorPrimary\">#3F51B5</color>\n    <color name=\"colorPrimaryDark\">#303F9F</color>\n    <color name=\"colorAccent\">#FF4081</color>\n</resources>\n```\n\n6ã€android/build.gradleï¼š\n\nåœ¨allprojectsçš„repositoriesä¸­å¢åŠ `maven { url \"http://dl.bintray.com/lukaville/maven\" }`\n\nåœ¨è¯¥æ–‡ä»¶æœ«å°¾å¢åŠ (è¿™é‡Œæ ¹æ®æƒ…å†µå†³å®šæ˜¯å¦æ·»åŠ ï¼Œæˆ‘æ˜¯åœ¨åæ¥è¿è¡Œé¡¹ç›®æŠ¥é”™æ—¶æ ¹æ®googleæœç´¢åˆ°çš„æ–¹æ¡ˆæ·»åŠ çš„)ï¼š\n\n```\nsubprojects {\n    afterEvaluate {project ->\n        if (project.hasProperty(\"android\")) {\n            android {\n                compileSdkVersion 25\n                buildToolsVersion '25.0.0'\n            }\n        }\n    }\n}\n```\n\n7ã€settings.gradleï¼š\n\n```\ninclude ':react-native-file-selector'\nproject(':react-native-file-selector').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-file-selector/android')\n```\n\n8ã€ä½¿ç”¨æ–¹æ³•ï¼š\n\n```\nimport RNFileSelector from 'react-native-file-selector';\n\nRNFileSelector.Show(\n\t{\n\t\ttitle: 'è¯·é€‰æ‹©æ–‡ä»¶',\n\t\tonDone: (path) => {\n\t\t\t_uploadFile('file://' + path) // æ ¹æ®å®˜æ–¹ç»™çš„fetchæ–¹æ³•å°è£…çš„ä¸Šä¼ æ–¹æ³•\n\t\t},\n\t\tonCancel: () => {\n\t\t\tconsole.log('cancelled')\n\t\t}\n\t}\n)\n```\n\n9ã€å…³äºä¸Šä¼ æ–‡ä»¶æˆ–å›¾ç‰‡åˆ°æœåŠ¡ç«¯ï¼Œå…¶å®å°±æ˜¯åˆ©ç”¨å®˜æ–¹ç»™çš„fetchæ–¹æ³•ï¼Œæ³¨æ„ç‚¹æ˜¯å‚æ•°å¿…é¡»ä½¿ç”¨formDataçš„å½¢å¼ï¼Œå…¶ä¸­çš„æ–‡ä»¶å¯¹åº”çš„æ•°æ®æ˜¯è¿™æ ·çš„{ uri: filePath, type: 'multipart/form-data', name: fileName }ï¼Œå…¶ä¸­çš„filePathæ˜¯8ä¸­çš„æ–‡ä»¶è·¯å¾„ã€‚\n\npsï¼šåæœŸæœ‰éœ€è¦å†è¡¥å……ç›¸å…³çš„getä¸postå°è£…ï¼ˆä¸è¿‡ç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šäº†ï¼Œå¯ä»¥è‡ªè¡Œç™¾åº¦æˆ–googleï¼‰\n\n10ã€ä¸Šé¢çš„ç›¸å…³æ­¥éª¤ï¼ˆ1-7ï¼‰ä¿®æ”¹åå¯ä»¥å°è¯•çœ‹çœ‹èƒ½ä¸èƒ½è¿è¡ŒæˆåŠŸï¼Œä¸è¡Œçš„è¯å°±å°†é¡¹ç›®ä¸­çš„node_modulesç§»é™¤å¹¶é‡æ–°å®‰è£…ä¾èµ–ï¼Œå°è¯•åœ¨Android Studio rebuildä¸€ä¸‹ï¼Œå†é‡æ–°è¿è¡Œè¯•è¯•ï¼Œå¤šè¯•å‡ æ¬¡å°±å¯ä»¥æˆåŠŸäº†ã€‚\n"},jE9Z:function(n,e,t){n.exports=t("JG2H")(6)},kKVl:function(n,e){n.exports="# Node.js+Express+MongoDB å»ºç«™å®ä¾‹ï¼ˆ2ï¼‰â€”â€” ç™»å½•æ¨¡å—\n\n1ã€ å‡†å¤‡å·¥ä½œï¼š\n\n> å®‰è£…tokenç›¸å…³å·¥å…·ï¼Œç”¨äºç™»å½•éªŒè¯ï¼š`npm install jsonwebtoken --save`\n\n> åœ¨/routes/db.jsä¸­æ·»åŠ æŸ¥æ‰¾æ–¹æ³•ï¼ˆåªæŸ¥è¯¢ä¸€ä¸ªï¼‰ï¼š\n\n```javascript\n// æŸ¥æ‰¾å•ä¸ªæ•°æ®\nexports.findOne = function(collectionName, queryJson, callback) {\n\t_connectDB(function(err, db) {\n\t\tdb.collection(collectionName).findOne(queryJson, function(err, results) {\n\t\t\tif (err) {\n\t\t\t\tcallback(err, null)\n\t\t\t\tdb.close()\n\t\t\t\treturn\n\t\t\t}\n\t\t\tcallback(err, results)\n\t\t\tdb.close()\n\t\t})\n\t})\n}\n```\n\n> ä¿®æ”¹/routes/setting.js\n\n```javascript\nlet md5 = require('./md5.js')\nlet user = 'test'\nlet pwd = md5('test') // å¯†ç åŠ å¯†å¤„ç†ï¼Œé˜²æ­¢è¢«çªƒå–çœŸå®å¯†ç \nmodule.exports = {\n    dbUrl: 'mongodb://localhost:27017/myproject1',\n    user: user,\n    pwd: pwd\n}\n```\n\n> æ–°å¢/routes/md5.js\n\n```javascript\nlet crypto = require('crypto')\nmodule.exports = function (content) {\n    let md5 = crypto.createHash('md5')\n    let newContent = md5.update(content).digest('base64')\n    return newContent\n}\n```\n\n2ã€ åœ¨/routes/index.jsä¸­æ·»åŠ æ¥å£\n\n```javascript\n// ç™»å½•æ¨¡å—\nrouter.post('/api/login', api.login)\n```\n3ã€ åœ¨/routes/api.jsä¸­æ·»åŠ \n\n```javascript\nconst jwt = require('jsonwebtoken')\n// ç™»å½•\nexports.login = function(req, res, next) {\n  let user = req.body.user, pwd = md5(req.body.pwd);\n  // æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢æ•°æ®åº“ä¸­æ˜¯å¦å«æœ‰è¯¥ç”¨æˆ·\n  db.findOne('users', { \"user\": user }, function(err, result) {\n    if (err) {\n\t\treturn res.json({\n\t\t\t\"code\": 500,\n\t\t\t\"message\": \"å†…éƒ¨æœåŠ¡å™¨é”™è¯¯\"\n\t\t})\n    }\n\n    if (!result || result.length === 0) {\n\t\treturn res.json({\n\t\t\t\"code\": 401,\n\t\t\t\"message\": \"æ‰¾ä¸åˆ°ç”¨æˆ·å\"\n\t\t})\n    }\n\n    let dbPassword = result.pwd\n    let id = result._id\n    let expires = 60 * 60 * 24 * 30\n    if (dbPassword === pwd) {\n        // æ ¹æ®æŸ¥è¯¢åˆ°çš„idã€useræŒ‰ç…§ä¸€å®šçš„åŠ å¯†æ–¹å¼ç”Ÿæˆtokenï¼Œå¹¶ä¸”ç¼“å­˜åœ¨cookieä¸­ï¼ŒåæœŸå½“ç”¨æˆ·ä½¿ç”¨åˆ«çš„æ¥å£çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡req.cookies.tokenè·å–åˆ°tokenï¼Œæ­¤æ—¶æ ¹æ®è¯¥ç”¨æˆ·çš„idå’Œuseråˆ©ç”¨åŒæ ·çš„æ–¹æ³•è§£å¯†å¾—åˆ°å¯¹åº”çš„userå’Œidï¼Œå°†æ–°æ—§æ•°æ®å¯¹æ¯”å³å¯çŸ¥é“è¯¥tokenæ˜¯å¦ä¸ºæ­£ç¡®ç™»å½•çš„token\n        let token = jwt.sign({ id, user }, 'secret', { expiresIn: expires })\n        res.cookie('token', token, { maxAge: expires })\n        res.cookie('id', id, { maxAge: expires })\n        res.cookie('user', user, { maxAge: expires })\n        return res.json({\n            \"code\": 200,\n            \"message\": \"ç™»å½•æˆåŠŸ\"\n        })\n    } else {\n\t\treturn res.json({\n\t\t\t\"code\": 401,\n\t\t\t\"message\": \"å¯†ç é”™è¯¯\"\n\t\t})\n    }\n  })\n}\n```\n\n> å…³äºjsonwebtokençš„åŸç†åŠä½¿ç”¨å¯ä»¥å‚è€ƒï¼šhttp://www.jianshu.com/p/a7882080c541\n\n4ã€ ä¸¾ä¾‹çœ‹ä¸‹tokenéªŒè¯æ–¹æ³•ï¼š\n\n> æ–°å¢ /routes/verify-token.js\n\n```javascript\nconst jwt = require('jsonwebtoken')\nmodule.exports = (req, res, next) => {\n\tlet token = req.cookies.token; // è·å–cookiesä¸­çš„token\n\tlet user = req.cookies.user;\n\tlet id = req.cookies.id;\n\tif (token) {\n\t\tjwt.verify(token, 'secret', function(err, decoded) { // ä¸åŠ å¯†æ—¶ä½¿ç”¨åŒæ ·çš„æ–¹æ³•å¯¹tokenè¿›è¡Œè§£å¯†\n\t\t\tif (!err && decoded.user === user && decoded.id === id) { // tokenæ­£ç¡®å°±è¿›å…¥ä¸‹ä¸€ä¸ªæ–¹æ³•ç»§ç»­æ‰§è¡Œï¼Œå¦åˆ™å°±æ¸…ç©ºcookie\n\t\t\t\treq.decoded = decoded\n\t\t\t\tnext()\n\t\t\t} else {\n\t\t\t\tres.cookie('token', '', { maxAge: 0 })\n\t\t\t\tres.cookie('user', '', { maxAge: 0 })\n\t\t\t\tres.cookie('id', '', { maxAge: 0 })\n\t\t\t\treturn res.json({\n\t\t\t\t\t\"code\": 401,\n\t\t\t\t\t\"message\": \"ç™»å½•å¤±è´¥\"\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t} else {\n\t\treturn res.json({\n\t\t\t\"code\": 401,\n\t\t\t\"message\": \"è¯·ç™»å½•åæ“ä½œ\"\n\t\t})\n\t}\n}\n```\n\n> åœ¨/routes/index.jsä¸­ä½¿ç”¨ï¼šå°†addtestæ–¹æ³•ä¿®æ”¹ä¸ºç™»å½•åæ‰å¯ä»¥ä½¿ç”¨\n\n```javascript\nconst verifyToken = require('./verify-token.js')\nrouter.route('/api/addtest').all(verifyToken).post(api.addtest) // å…ˆéªŒè¯æ˜¯å¦æœ‰æ­£ç¡®çš„tokenï¼Œæ­£ç¡®æ‰èƒ½è¿›è¡Œä¸‹ä¸€æ­¥æäº¤\n```\næ­¤æ—¶ï¼Œå› ä¸ºæ²¡æœ‰è¿›è¡Œç™»å½•ï¼Œæ‰€ä»¥æäº¤testä¼šå¤±è´¥ï¼Œåªéœ€è¦åœ¨/views/index.ejsä¸­åŠ å…¥ä»¥ä¸‹ä»£ç ï¼š\n```javascript\n$.post('/api/login', {\n\tuser: 'test',\n\tpwd: 'test'\n}, function (data) {\n\tconsole.log('----login', data)\n})\n```\nåˆ·æ–°æµè§ˆå™¨å·²ç»ç™»å½•æˆåŠŸï¼Œæ­¤æ—¶å†è¿›è¡Œæäº¤testå°±ä¼šæˆåŠŸäº†ã€‚\n\n5ã€ æ­¤éƒ¨åˆ†ä»£ç è¯·çœ‹è¿™ä¸ªcommit\nhttps://github.com/jiaoyanlin/myNodeProject/tree/20e9faa837ac69580aa450962efd4af02d891a8b\n"},lg5E:function(n,e){n.exports="# webpack4æ­å»ºé¡¹ç›®\n\n> æœ€è¿‘å­¦ä¹ webpackç›¸å…³çŸ¥è¯†ï¼Œç‰¹æ­¤è®°å½•ä¸‹å­¦ä¹ è¿‡çš„æ–‡æ¡£ä»¥åŠæ­å»ºè¿‡ç¨‹ï¼›å¦‚æœ‰é”™è¯¯ï¼Œè®°å¾—å‘Šè¯‰æˆ‘å‘€ã€‚é¡¹ç›®åœ°å€ï¼š[åœ°å€](https://github.com/jiaoyanlin/webpack-demo),æ±‚æ˜Ÿæ˜Ÿ\n\n```javascript\n// 1ã€cloneä»£ç åˆ°æœ¬åœ°\ncd vue-demo\nnpm i\n// é€šè¿‡package.jsonçš„scriptså¯ä»¥çœ‹åˆ°åŒºåˆ†äº†ä¸åŒç¯å¢ƒçš„å¯åŠ¨å‘½ä»¤\nnpm run dev:local // ä¾‹å¦‚ï¼šå¯åŠ¨\nnpm run build // æ‰“åŒ…\n```\n\n[TOC]\n\n## vueé¡¹ç›®æ­å»º\n\n> ä¼ é€é—¨ï¼šç›¸å…³ä»£ç éƒ½åœ¨[è¿™é‡Œ](https://github.com/jiaoyanlin/webpack-demo/tree/master/vue-demo)å“¦ï¼\n\ntips: å½“å‰é¡¹ç›®æ­å»ºæ—¶ç¯å¢ƒåŠä½¿ç”¨çš„éƒ¨åˆ†å·¥å…·ç‰ˆæœ¬ï¼ˆç‰ˆæœ¬ä¸åŒå¯èƒ½å¯¼è‡´ä½¿ç”¨æ–¹æ³•ä¸åŒï¼‰ï¼šnode v11.6.0, npm v6.10.0, webpack: ^4.35.0, webpack-cli: ^3.3.5, å…¶ä»–è¯·çœ‹package.json\n\n### 1ã€åˆå§‹åŒ–é¡¹ç›®:\n\n1.æ–°å»ºvue-demo, cd vue-demo, npm initåˆå§‹åŒ–é¡¹ç›®ï¼›\n\n2.å®‰è£…ç›¸å…³ä¾èµ–ï¼š\n\nwebpack: `npm i webpack webpack-cli webpack-dev-server webpack-merge --save-dev`\n\nvue: `npm i vue --save`ã€`npm i vue-loader vue-template-compiler --save-dev`\n\nhtmlè§£æï¼š`npm i html-webpack-plugin --save-dev`\n\ncssã€scssç›¸å…³ï¼š`npm i css-loader style-loader node-sass sass-loader --save-dev`\n\ncssåå¤„ç†ï¼š`npm i postcss-loader autoprefixer --save-dev`\n\nå›¾ç‰‡è·¯å¾„å¤„ç†ï¼š`npm i file-loader url-loader --save-dev`\n\nä»¥ä¸‹ä¸ºæ‰“åŒ…æ—¶ç”¨åˆ°çš„æ’ä»¶ï¼Œæ”¾åœ¨webpack.prod.jsï¼š\n\næ¸…ç†distæ–‡ä»¶å¤¹ï¼š`npm i clean-webpack-plugin --save-dev`\n\n3.åˆ›å»ºç›¸å…³æ–‡ä»¶å¦‚ä¸‹ï¼š\n\n```text\nvue-demo\n    |--build\n        |--webpack.base.js\n        |--webpack.dev.js\n        |--webpack.prod.js\n    |--src\n        |--static\n            |--images\n            |--scss\n                |--index.scss\n        |--views\n            |--app.vue\n        |--index.js\n        |--index.html\n    |--postcss.config.js\n    |--favicon.png\n```\n```javascript\n// webpack.base.js å…¬ç”¨é…ç½®æ–‡ä»¶\nconst webpack = require('webpack');\nconst path = require(\"path\");\nconst VueLoaderPlugin = require('vue-loader/lib/plugin'); // vue-loader\nconst HtmlWebpackPlugin = require('html-webpack-plugin'); // html\nmodule.exports = {\n    entry: { \n        index: path.resolve(__dirname, '../src/index.js'), \n    },\n    resolve: {\n        alias: { // åˆ«å\n            '@src': path.resolve(__dirname, '../src'),\n            '@views': path.resolve(__dirname, '../src/views'),\n            '@scss': path.resolve(__dirname, '../src/static/scss'),\n            '@images': path.resolve(__dirname, '../src/static/images'),\n        },\n        extensions: ['.js', '.vue'], // é…ç½®æ‰©å±•å\n    },\n    module: {\n        rules: [\n            {\n                test: /\\.vue$/,\n                loader: 'vue-loader'\n            },\n            {\n                test: /\\.(scss|css)$/,\n                use: ['style-loader', 'css-loader', 'postcss-loader', 'sass-loader'],\n            },\n            {\n                test: /\\.(png|svg|jpg|jpeg|gif)$/,\n                // ä½¿ç”¨url-loader, å®ƒæ¥å—ä¸€ä¸ªlimitå‚æ•°ï¼Œå•ä½byteï¼›\n                // å½“æ–‡ä»¶å°äºlimitï¼šå°†æ–‡ä»¶è½¬ä¸ºData URIæ ¼å¼å†…è”åˆ°å¼•ç”¨çš„åœ°æ–¹\n                // å½“æ–‡ä»¶å¤§äºlimitï¼šå°†è°ƒç”¨ file-loader, æŠŠæ–‡ä»¶å¤åˆ¶åˆ°è¾“å‡ºç›®å½•ï¼Œå¹¶å°†å¼•ç”¨çš„æ–‡ä»¶è·¯å¾„æ”¹å†™æˆè¾“å‡ºåçš„è·¯å¾„\n                use: [\n                    {\n                        loader: 'url-loader',\n                        options: {\n                            limit: 20 * 1024,\n                            // åˆ†ç¦»å›¾ç‰‡è‡³imgsæ–‡ä»¶å¤¹\n                            name: \"imgs/[name].[ext]\",\n                        }\n                    },\n                ]\n            },\n        ]\n    },\n    plugins: [ // æ’ä»¶\n        new VueLoaderPlugin(),\n        new HtmlWebpackPlugin({\n            template: path.resolve(__dirname, '../src/index.html'), // htmlæ¨¡æ¿\n            favicon: path.resolve(__dirname, '../favicon.png'),\n        }),\n    ],\n};\n```\n```javascript\n// webpack.dev.js å¼€å‘ç¯å¢ƒé…ç½®æ–‡ä»¶\nconst path = require('path');\nconst merge = require('webpack-merge'); // åˆå¹¶é…ç½®æ–‡ä»¶\nconst common = require('./webpack.base.js');\n\nmodule.exports = merge(common, {\n    mode: 'development',\n    devtool: 'inline-source-map',\n    devServer: { // å¼€å‘æœåŠ¡å™¨\n        port: '3000',\n        // open: false, // å¯ä»¥è®¾ç½®æ˜¯å¦æ¯æ¬¡å¯åŠ¨éƒ½è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨é¡µé¢\n        contentBase: '../dist',\n        host: '0.0.0.0', // å¯é€šè¿‡IPè®¿é—®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡localhostè®¿é—®\n        useLocalIp: true, // browser open with your local IP\n    },\n    output: { // è¾“å‡º\n        filename: 'js/[name].[hash].js', // æ¯æ¬¡ä¿å­˜ hash éƒ½å˜åŒ–\n        path: path.resolve(__dirname, '../dist')\n    },\n    module: {},\n});\n```\n```javascript\n// webpack.prod.js ç”Ÿäº§ç¯å¢ƒçš„é…ç½®æ–‡ä»¶\nconst path = require('path');\nconst merge = require('webpack-merge');\nconst { CleanWebpackPlugin } = require('clean-webpack-plugin'); // æ¸…ç†distæ–‡ä»¶å¤¹\nconst common = require('./webpack.base.js');\n\nmodule.exports = merge(common, {\n    mode: 'production',\n    output: {\n        filename: 'js/[name].[contenthash:8].js', // è‹¥æ–‡ä»¶å†…å®¹æ— å˜åŒ–ï¼Œåˆ™contenthashä¸å˜\n        path: path.resolve(__dirname, '../dist')\n    },\n    module: {},\n    plugins: [\n        new CleanWebpackPlugin(),\n    ],\n});\n```\n```javascript\n// index.js\nimport Vue from 'vue'\nimport App from './views/app.vue'\nimport '@scss/index.scss'\nnew Vue({\n    el: '#app',\n    render: h => h(App),\n});\n```\n```\n\x3c!-- app.vue --\x3e\n<template>\n    <div id=\"app\">\n        hello, vue-demo\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'app'\n}\n<\/script>\n\n<style lang=\"scss\" scoped>\n#app {\n  text-align: center;\n  color: #333;\n  margin-top: 100px;\n  display: flex;\n}\n</style>\n```\n```html\n\x3c!-- index.html --\x3e\n<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset=\"UTF-8\">\n        <title>webpack-vue-demo</title>\n    </head>\n    <body>\n        <div id=\"app\"></div>\n    </body>\n</html>\n```\n```javascript\n// postcss.config.js csså…¼å®¹å‰ç¼€\nmodule.exports = {\n    plugins: {\n        'autoprefixer': {\n            overrideBrowserslist: [\n                'Android 4.1',\n                'iOS 7.1',\n                'Chrome > 31',\n                'ff > 31',\n                'ie >= 8'\n            ]\n        }\n    }\n}\n```\n\n4.npmå‘½ä»¤ï¼š\n```\n\"scripts\": {\n  \"start\": \"webpack-dev-server --hot --progress --config build/webpack.dev.js\",\n  \"build\": \"webpack --progress --config build/webpack.prod.js\"\n},\n```\nç°åœ¨ï¼Œæ‰§è¡Œ`npm start`å³å¯ä½“éªŒé¡¹ç›®å•¦~`npm run build`å¯ä»¥æ‰“åŒ…é¡¹ç›®\n\n### 2ã€å¼•å…¥babel7\n\n> @babel/preset-env è¯­æ³•è£…æ¢ï¼Œé…ç½® polyfillåŠæŒ‰éœ€åŠ è½½ï¼›@babel/plugin-transform-runtimeå¤ç”¨è¾…åŠ©å‡½æ•°\n\n1.å®‰è£…ä¾èµ–ï¼š\n\n`npm i babel-loader @babel/core @babel/cli --save-dev`\n\n`npm i @babel/preset-env @babel/plugin-transform-runtime --save-dev`\n\n`npm i @babel/polyfill @babel/runtime --save`\n\n2.é…ç½®loaderï¼š\n\n```javascript\n// webpack.base.js\n// module.rulesä¸­æ·»åŠ \n{\n    test: /\\.js$/,\n    use: ['babel-loader'],\n    exclude: /node_modules/, // æ’é™¤ä¸è¦åŠ è½½çš„æ–‡ä»¶å¤¹\n    include: path.resolve(__dirname, '../src') // æŒ‡å®šéœ€è¦åŠ è½½çš„æ–‡ä»¶å¤¹\n},\n```\n\n3.é…ç½®babelï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ·»åŠ æ–‡ä»¶.babelrc.js\n\n```javascript\nmodule.exports = {\n    presets: [\n        [\n            \"@babel/preset-env\",\n            {\n                \"corejs\": 2,\n                \"modules\": false, // æ¨¡å—ä½¿ç”¨ es modules ï¼Œä¸ä½¿ç”¨ commonJS è§„èŒƒ \n                \"useBuiltIns\": 'usage', // é»˜è®¤ false, å¯é€‰ entry , usageï¼›usageè¡¨ç¤ºæŒ‰éœ€åŠ è½½\n            }\n        ]\n    ],\n    plugins: [\n        [\n            \"@babel/plugin-transform-runtime\",\n            {\n                \"corejs\": false, // é»˜è®¤å€¼ï¼Œå¯ä»¥ä¸å†™\n                \"helpers\": true, // é»˜è®¤ï¼Œå¯ä»¥ä¸å†™\n                \"regenerator\": false, // é€šè¿‡ preset-env å·²ç»ä½¿ç”¨äº†å…¨å±€çš„ regeneratorRuntime, ä¸å†éœ€è¦ transform-runtime æä¾›çš„ ä¸æ±¡æŸ“å…¨å±€çš„ regeneratorRuntime\n                \"useESModules\": true, // ä½¿ç”¨ es modules helpers, å‡å°‘ commonJS è¯­æ³•ä»£ç \n            }\n        ],\n    ]\n}\n```\n\n### 3ã€å¼•å…¥å…¶ä»–å·¥å…·ã€ç»„ä»¶åº“\n\n##### 1.eslint:\n\nå®‰è£…ä¾èµ–ï¼š`npm i babel-eslint eslint eslint-friendly-formatter eslint-loader eslint-plugin-vue -D`\n\n```javascript\n// æ ¹ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶ .eslintrc.js:\nmodule.exports = {\n    //ä¸€æ—¦é…ç½®äº†rootï¼ŒESlintåœæ­¢åœ¨çˆ¶çº§ç›®å½•ä¸­æŸ¥æ‰¾é…ç½®æ–‡ä»¶\n    root: true,\n    //æƒ³è¦æ”¯æŒçš„JSè¯­è¨€é€‰é¡¹\n    parserOptions: {\n        //å¯ç”¨ES6è¯­æ³•æ”¯æŒ(å¦‚æœæ”¯æŒes6çš„å…¨å±€å˜é‡{env: {es6: true}}ï¼Œåˆ™é»˜è®¤å¯ç”¨ES6è¯­æ³•æ”¯æŒ)\n        //æ­¤å¤„ä¹Ÿå¯ä»¥ä½¿ç”¨å¹´ä»½å‘½åçš„ç‰ˆæœ¬å·ï¼š2015\n        ecmaVersion: 6,\n        //é»˜è®¤ä¸ºscript\n        sourceType: \"module\",\n        //æ”¯æŒå…¶ä»–çš„è¯­è¨€ç‰¹æ€§\n        ecmaFeatures: {},\n        parser: \"babel-eslint\"\n    },\n    //ä»£ç è¿è¡Œçš„ç¯å¢ƒï¼Œæ¯ä¸ªç¯å¢ƒéƒ½ä¼šæœ‰ä¸€å¥—é¢„å®šä¹‰çš„å…¨å±€å¯¹è±¡ï¼Œä¸åŒç¯å¢ƒå¯ä»¥ç»„åˆä½¿ç”¨\n    env: {\n        amd: true, // å¦åˆ™ä¼šå‡ºç°'require' is not defined æç¤º\n        es6: true,\n        browser: true,\n        jquery: true\n    },\n    //è®¿é—®å½“å‰æºæ–‡ä»¶ä¸­æœªå®šä¹‰çš„å˜é‡æ—¶ï¼Œno-undefä¼šæŠ¥è­¦å‘Šã€‚\n    //å¦‚æœè¿™äº›å…¨å±€å˜é‡æ˜¯åˆè§„çš„ï¼Œå¯ä»¥åœ¨globalsä¸­é…ç½®ï¼Œé¿å…è¿™äº›å…¨å±€å˜é‡å‘å‡ºè­¦å‘Š\n    globals: {\n        //é…ç½®ç»™å…¨å±€å˜é‡çš„å¸ƒå°”å€¼ï¼Œæ˜¯ç”¨æ¥æ§åˆ¶è¯¥å…¨å±€å˜é‡æ˜¯å¦å…è®¸è¢«é‡å†™\n        test_param: true,\n        window: true,\n    },\n    //æ”¯æŒç¬¬ä¸‰æ–¹æ’ä»¶çš„è§„åˆ™ï¼Œæ’ä»¶ä»¥eslint-plugin-ä½œä¸ºå‰ç¼€ï¼Œé…ç½®æ—¶è¯¥å‰ç¼€å¯çœç•¥\n    //æ£€æŸ¥vueæ–‡ä»¶éœ€è¦eslint-plugin-vueæ’ä»¶\n    plugins: [\"vue\"],\n    //é›†æˆæ¨èçš„è§„åˆ™\n    extends: [\"eslint:recommended\", \"plugin:vue/essential\"],\n    globals: {\n        process: false,\n    },\n    //å¯ç”¨é¢å¤–çš„è§„åˆ™æˆ–è€…è¦†ç›–é»˜è®¤çš„è§„åˆ™\n    //è§„åˆ™çº§åˆ«åˆ†åˆ«ï¼šä¸º\"off\"(0)å…³é—­ã€\"warn\"(1)è­¦å‘Šã€\"error\"(2)é”™è¯¯--errorè§¦å‘æ—¶ï¼Œç¨‹åºé€€å‡º\n    rules: {\n        //å…³é—­â€œç¦ç”¨consoleâ€è§„åˆ™\n        \"no-console\": \"off\",\n        //ç¼©è¿›ä¸è§„èŒƒè­¦å‘Šï¼Œè¦æ±‚ç¼©è¿›ä¸º2ä¸ªç©ºæ ¼ï¼Œé»˜è®¤å€¼ä¸º4ä¸ªç©ºæ ¼\n        \"indent\": [\"warn\", 4, {\n            //è®¾ç½®ä¸º1æ—¶å¼ºåˆ¶switchè¯­å¥ä¸­caseçš„ç¼©è¿›ä¸º2ä¸ªç©ºæ ¼\n            \"SwitchCase\": 1,\n        }],\n        // å‡½æ•°å®šä¹‰æ—¶æ‹¬å·å‰é¢è¦ä¸è¦æœ‰ç©ºæ ¼\n        \"space-before-function-paren\": [0, \"always\"],\n        //å®šä¹‰å­—ç¬¦ä¸²ä¸è§„èŒƒé”™è¯¯ï¼Œè¦æ±‚å­—ç¬¦ä¸²ä½¿ç”¨åŒå¼•å·\n        // quotes: [\"error\", \"double\"],\n        //....\n        //æ›´å¤šè§„åˆ™å¯æŸ¥çœ‹http://eslint.cn/docs/rules/\n    }\n}\n```\n\n```javascript\n// webpack.base.js\n// module.rulesä¸­æ·»åŠ \n{\n    test: /\\.(js|vue)$/,\n    loader: 'eslint-loader',\n    enforce: 'pre',\n    // æŒ‡å®šæ£€æŸ¥çš„ç›®å½•\n    include: [path.resolve(__dirname, '../src')],\n    // eslintæ£€æŸ¥æŠ¥å‘Šçš„æ ¼å¼è§„èŒƒ\n    options: {\n        formatter: require('eslint-friendly-formatter')\n    }\n},\n```\n\nè¿è¡Œé¡¹ç›®ï¼Œæ ¹æ®eslintæç¤ºä¿®æ”¹ä¸è§„èŒƒçš„ä»£ç \n\n##### 2.vue-router\n\n`npm i @babel/plugin-syntax-dynamic-import -D`\n\n`npm i vue-router -S`\n\n```javascript\n// .babelrc.js\nmodule.exports = {\n    plugins: [\n        \"@babel/plugin-syntax-dynamic-import\", // æ”¯æŒè·¯ç”±æ‡’åŠ è½½ï¼š()=>import('...')\n        ...\n    ],\n    ...\n}\n```\n```javascript\n// src/index.jsæ”¹æˆå¦‚ä¸‹\nimport '@scss/index.scss';\nimport Vue from 'vue';\nimport router from '@src/router/index.js';\nimport App from '@views/app.vue';\n\nnew Vue({\n    el: '#app',\n    router,\n    render: h => h(App),\n});\n```\n\n```javascript\n// æ–°å¢æ–‡ä»¶ src/router/index.js\nimport Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport Test from '../views/test';\nimport NoFound from '@views/noFound';\n\nVue.use(VueRouter);\n\nexport default new VueRouter({\n    // mode: 'history',  // ä½¿ç”¨historyé˜²æ­¢urlä¸­å‡ºç°#\n    routes: [\n        {\n            path: '/',\n            name: 'test',\n            component: Test\n        }, {\n            path: '/test1',\n            name: 'test1',\n            component: () =>\n                import(/* webpackChunkName: \"test1\" */ '@views/test1.vue'),\n        }, {\n            path: '*',\n            name: 'noFound',\n            component: NoFound\n        }\n    ]\n});\n```\n\næ–°å¢æ–‡ä»¶ src/views/app.vue\n\n```\n<template>\n    <div id=\"app\">\n        <div class=\"header\">\n            <router-link to=\"/\">é¦–é¡µ</router-link>\n            <router-link to=\"/test1\">test1</router-link>\n            <router-link to=\"/a\">noFound</router-link>\n        </div>\n        <router-view></router-view>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'app',\n};\n<\/script>\n\n<style lang=\"scss\" scoped>\n#app {\n    font-family: \"Avenir\", Helvetica, Arial, sans-serif;\n    text-align: center;\n    margin-top: 60px;\n    transform: rotate(0deg);\n}\n</style>\n```\n\næ–°å¢æ–‡ä»¶ src/views/noFound.vue\n\n```\n<template>\n    <div>\n        noFound\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'noFound',\n};\n<\/script>\n```\n\næ–°å¢æ–‡ä»¶ src/views/test.vue\n\n```\n<template>\n    <div>\n        é¦–é¡µï¼štest\n        <div>{{msg}}</div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'test',\n    data() {\n        return {\n            msg: 'é¦–é¡µä¿¡æ¯'\n        }\n    },\n};\n<\/script>\n```\n\nä¿®æ”¹æ–‡ä»¶ src/views/test1.vueæˆä¸€ä¸‹å†…å®¹ï¼›å¹¶ä¸”åœ¨src/static/imagesä¸‹é¢æ–°å¢1.jpg,2.jpg,smart.gif\n\n```\n<template>\n    <div>\n        <div>\n            test1, count : \n            <span class=\"red\">{{loading ? 'loading...' : count}}</span>\n        </div>\n        <div>\n            <div class=\"btn\" @click=\"addCount\">add count</div>\n        </div>\n        <div class=\"wrap\">\n            <div>\n                <div>gif</div>\n                <img src=\"@images/smart.gif\" alt=\"\">\n            </div>\n            <div>\n                <div>1</div>\n                <img src=\"@images/1.jpg\" alt=\"\">\n            </div>\n            <div>\n                <div>2</div>\n                <img src=\"@images/2.jpg\" alt=\"\">\n            </div>\n            <div>\n                <div>3</div>\n                <div class=\"img-bg-1\"></div>\n            </div>\n            <div>\n                <div>4</div>\n                <div class=\"img-bg-2\"></div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'test',\n    data() {\n        return {\n            loading: false,\n            count: 1,\n        }\n    },\n    methods: {\n        addCount() {\n            if (this.loading) return ;\n            return new Promise((resolve) => {\n                this.loading = true;\n                setTimeout(() => {\n                    const {count} = this;\n                    this.count = count + 1;\n                    this.loading = false;\n                    resolve();\n                }, 2000);\n            });\n        },\n    },\n};\n<\/script>\n\n<style lang=\"scss\" scoped>\n$red: #a00;\n.red {\n    color: $red;\n}\nimg {\n    width: 100px;\n}\n@mixin img-bg {\n    width: 100%;\n    height: 120px;\n    background-size: 100px;\n}\n.img-bg-1 {\n    background: url(~@images/1.jpg) no-repeat center top;\n    @include img-bg();\n}\n.img-bg-2 {\n    background: url(~@images/2.jpg) no-repeat center top;\n    @include img-bg();\n}\n.wrap {\n    display: flex;\n    &>div {\n        flex: 1;\n    }\n}\n</style>\n```\n\nä¿®æ”¹src/static/scss/index.scss\n\n```\n.btn {\n    display: inline-block;\n    padding: 5px 10px;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    cursor: pointer;\n}\n```\n\n##### 3.vuex\n\n`npm i vuex vuex-router-sync -S`\n\n```javascript\n// ä¿®æ”¹src/index.js\n...\nimport { sync } from 'vuex-router-sync';\nimport store from '@src/store/index';\n\n// é“¾æ¥vuexå’Œvue-router\nsync(store, router);\n\nnew Vue({\n    ...\n    store, // æ–°å¢è¿™ä¸€è¡Œ\n    ...\n});\n\n```\n\næ–°å¢å¦‚ä¸‹æ–‡ä»¶ï¼š\n\n```text\n|--src\n    |--store\n        |--actions.js\n        |--getters.js\n        |--index.js\n        |--mutations.js\n        |--state.js\n```\n\n```javascript\n// actions.js\nexport const changeMsg = ({ commit }) => {\n    commit({\n        type: 'mutationsMsg', // å¯¹åº”mutation.jsä¸­çš„mutationsMsgæ–¹æ³•\n        globalMsg: 'æˆ‘æ˜¯ä¿®æ”¹åçš„å…¨å±€æ•°æ®~~~'\n    });\n};\n```\n\n```javascript\n// getters.js\nexport const gettersMsg = state => state.globalMsg;\n```\n\n```javascript\n// index.js\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport * as actions from './actions';\nimport * as mutations from './mutations';\nimport * as getters from './getters';\nimport state from './state';\nVue.use(Vuex);\nconst store = new Vuex.Store({\n    state,\n    getters,\n    actions,\n    mutations\n});\nexport default store;\n```\n\n```javascript\n// mutations.js\nexport const mutationsMsg = (state, payload) => {\n    state.globalMsg = payload.globalMsg;\n}\n```\n\n```javascript\n// state.js\nconst state = {\n    globalMsg: 'æˆ‘æ˜¯å…¨å±€æ•°æ®',\n}\nexport default state;\n```\n\nå…·ä½“ä½¿ç”¨\n\n```javascript\n// test.uve\n<template>\n    <div>\n        é¦–é¡µï¼štest\n        <div>{{gettersMsg}}</div>\n        <div class=\"btn\" @click=\"changeMsg\">ç‚¹å‡»æ”¹å˜æ•°æ®</div>\n    </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\nexport default {\n    name: 'test',\n    data() {\n        return {};\n    },\n    computed: { ...mapGetters(['gettersMsg']) },\n    methods: { ...mapActions(['changeMsg']) }\n};\n<\/script>\n```\n\n##### 4.antd\n\n`npm i babel-plugin-import less less-loader -D`\n\n`npm i ant-design-vue -S`\n\n```javascript\n// .babelrc.js pluginsæ•°ç»„ä¸­å¢åŠ \nplugins: [\n    ...,\n    [\"import\", { \"libraryName\": \"ant-design-vue\", \"libraryDirectory\": \"es\", \"style\": true }], // antç»„ä»¶æŒ‰éœ€åŠ è½½\n]\n```\n\n```javascript\n// webpack.base.js rulesä¸­åŠ å…¥\n{\n    test: /\\.less$/,\n    use: [\n        'style-loader',\n        'css-loader',\n        {\n            loader: 'less-loader', // compiles Less to CSS\n            options: { // antè‡ªå®šä¹‰ä¸»é¢˜\n                modifyVars: {\n                    'primary-color': '#63937d',\n                    'link-color': '#11b96c',\n                    'item-hover-bg': '#547c6a',\n                    'item-active-bg': '#466657',\n                },\n                javascriptEnabled: true,\n            },\n        }\n    ]\n}\n```\n\n```javascript\n// src/index.js æ–°å¢ä¸€å¥\nimport '@src/plugins';\n```\n\n```javascript\n// æ–°å¢æ–‡ä»¶ src/plugins/index.js\nimport './ant';\n```\n\n```javascript\n// æ–°å¢æ–‡ä»¶ src/plugins/ant/index.js\nimport Vue from 'vue';\nimport {\n    Button,\n    Icon,\n    Layout,\n    Breadcrumb,\n    Dropdown,\n    Divider,\n    Menu,\n    Pagination,\n    Steps,\n    Checkbox,\n    DatePicker,\n    Input,\n    InputNumber,\n    Radio,\n    Select,\n    Switch,\n    TimePicker,\n    Popover,\n    Tabs,\n    Tag,\n    Tooltip,\n    Alert,\n    message,\n    Modal,\n    Popconfirm,\n    Spin,\n    ConfigProvider,\n    LocaleProvider\n} from 'ant-design-vue';\n\nVue.use(Button);\nVue.use(Icon);\nVue.use(Layout);\nVue.use(Breadcrumb);\nVue.use(Dropdown);\nVue.use(Divider);\nVue.use(Menu);\nVue.use(Pagination);\nVue.use(Steps);\nVue.use(Checkbox);\nVue.use(DatePicker);\nVue.use(Input);\nVue.use(InputNumber);\nVue.use(Radio);\nVue.use(Select);\nVue.use(Switch);\nVue.use(TimePicker);\nVue.use(Popover);\nVue.use(Tabs);\nVue.use(Tag);\nVue.use(Tooltip);\nVue.use(Alert);\nVue.use(Modal);\nVue.use(Popconfirm);\nVue.use(Spin);\nVue.use(ConfigProvider);\nVue.use(LocaleProvider);\nmessage.config({\n    duration: 2,\n    maxCount: 3,\n});\nVue.prototype.$message = message;\nVue.prototype.$Modal = Modal;\n```\n\nä½¿ç”¨\n\n```javascript\n// ä¿®æ”¹views/test.vue\n<a-button type=\"primary\">ç‚¹å‡»</a-button>\n```\n\n### 4ã€ä¼˜åŒ–\n\n##### 1.æ ¹æ®ä¸åŒåˆ†ç¯å¢ƒé…ç½®å‚æ•°ã€è®¾ç½®å…¨å±€å˜é‡ã€ä¼˜åŒ–æ‰“åŒ…ä¿¡æ¯ï¼š\n\n> å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒéƒ½åŒºåˆ†ä¸‰ç§æ¥å£é…ç½®ï¼šæœ¬åœ°ã€æµ‹è¯•ã€æ­£å¼\n\n```javascript\n// package.json scriptsæ”¹æˆï¼š\n\"dev:local\": \"webpack-dev-server --env.CUSTOM_ENV=local --hot --progress --config build/webpack.dev.js\",\n\"dev:pre\": \"webpack-dev-server --env.CUSTOM_ENV=pre --hot --progress --config build/webpack.dev.js\",\n\"dev\": \"webpack-dev-server --env.CUSTOM_ENV=pro --hot --progress --config build/webpack.dev.js\",\n\"build:local\": \"webpack --progress --env.CUSTOM_ENV=local --config build/webpack.prod.js\",\n\"build:pre\": \"webpack --progress --env.CUSTOM_ENV=pre --config build/webpack.prod.js\",\n\"build\": \"webpack --progress --env.CUSTOM_ENV=pro --config build/webpack.prod.js\"\n```\n\n```javascript\n// .eslintrc.js æ–°å¢é…ç½®\nmodules.exports = {\n    ...\n    globals: {\n        ...\n        process: false,\n    },\n    ...\n}\n```\n\næ–°å¢æ–‡ä»¶ build/_config.js\n\n```javascript\nlet config = {\n    isDev: false, // æ˜¯å¦ä¸ºå¼€å‘ç¯å¢ƒ\n    mode: 'production', // webpack modeï¼šproductionã€development\n    domain: '', // API\n    env: 'pro', // å¯¹åº”æ¥å£ï¼šlocalã€preã€pro\n};\n\nmodule.exports = (env, mode) => {\n    config.isDev = mode === 'development';\n    config.mode = mode;\n    config.env = env.CUSTOM_ENV;\n    let domain = '';\n    switch(env.CUSTOM_ENV) {\n        case 'local': // æœ¬åœ°å¼€å‘ç¯å¢ƒæ¥å£\n            domain = 'local-api.domain.com';\n            break;\n        case 'pre': // æµ‹è¯•ç¯å¢ƒæ¥å£\n            domain = 'pre-api.domain.com';\n            break;\n        default: // æ­£å¼ç¯å¢ƒæ¥å£\n            domain = 'api.domain.com';\n    }\n    config.domain = domain;\n    return config;\n};\n```\n\n```javascript\n// ä¿®æ”¹webpack.base.js\nconst getConfig = require('./_config');\n\nmodule.exports = (env, mode) => {\n    const envConfig = getConfig(env, mode);\n    return {\n        stats: {\n            children: false, // æ¸…ç†æ§åˆ¶å°ä¸å¿…è¦çš„æ‰“å°ä¿¡æ¯\n        },\n        // æ²¿ç”¨ä¹‹å‰çš„é…ç½®\n        entry: { \n            ...\n        },\n        ...\n        plugins: [\n            ...,\n            new webpack.DefinePlugin({ // è‡ªå®šä¹‰å…¨å±€å˜é‡\n                'process.env.CUSTOM_ISDEV': JSON.stringify(envConfig.isDev),\n                'process.env.CUSTOM_MODE': JSON.stringify(envConfig.mode),\n                'process.env.CUSTOM_DOMAIN': JSON.stringify(envConfig.domain),\n                'process.env.CUSTOM_ENV': JSON.stringify(envConfig.env),\n            }),\n        ]\n    }\n}\n```\n\n```javascript\n// ä¿®æ”¹webpack.dev.js\nmodule.exports = env => {\n    const mode = 'development';\n    const commonConfig = common(env, mode);\n    return merge(commonConfig, {\n        mode,\n        devtool: 'inline-source-map',\n        ...\n    }\n}\n```\n\n```javascript\n// ä¿®æ”¹webpack.prod.js\nmodule.exports = env => {\n    const mode = 'production';\n    const commonConfig = common(env, mode);\n    return merge(commonConfig, {\n        mode,\n        ...\n    }\n}\n```\n\n```javascript\n// src/index.js æ–°å¢\nif (process.env.CUSTOM_MODE !== 'production') {\n    console.log('CUSTOM_ISDEV:', process.env.CUSTOM_ISDEV);\n    console.log('CUSTOM_MODE:', process.env.CUSTOM_MODE);\n    console.log('CUSTOM_DOMAIN:', process.env.CUSTOM_DOMAIN);\n    console.log('CUSTOM_ENV:', process.env.CUSTOM_ENV);\n}\n```\n\n> ä¼˜åŒ–æ‰“åŒ…ä¿¡æ¯ï¼šé€šè¿‡webpack.base.jsä¸­config.statsã€å‘½ä»¤è¡Œä¸­çš„--progress ä¼˜åŒ–\n\n##### 2.å¯è§†åŒ–æ‰“åŒ…å·¥å…·æµ‹è¯•ï¼šwebpack-bundle-analyzer\n\n`npm i webpack-bundle-analyzer -D`\n\npackage.jsonçš„scriptsä¸­å¢åŠ ï¼š\n\n`\"build:stats\": \"webpack --progress --env.CUSTOM_ENV=pro --env.STATS --config build/webpack.prod.js --profile --json > stats.json\"`\n\nä¿®æ”¹webpack.prod.jsï¼š\n\n```javascript\n...\nconst BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin;\n\n...\nplugins: [\n    ...,\n    // åˆ†æåŒ…å¤§å°\n    ...(env.STATS ? [new BundleAnalyzerPlugin()] : [])\n]\n...\n```\n\nä½¿ç”¨ï¼š`npm run build:stats`ç”Ÿæˆstats.jsonæ–‡ä»¶ï¼Œå†åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­æ‰§è¡Œ webpack-bundle-analyzer åï¼Œæµè§ˆå™¨ä¼šæ‰“å¼€å¯¹åº”ç½‘é¡µå¯ä»¥çœ‹åˆ°ç›¸å…³åˆ†æç»“æœ\n\n##### 3.æŒä¹…åŒ–ç¼“å­˜\n\n`npm i script-ext-html-webpack-plugin -D`\n\n```javascript\n// ä¿®æ”¹webpack.dev.js\nconst webpack = require('webpack');\n\nplugins: [\n    ...,\n    new webpack.NamedModulesPlugin(), // å°†æ–‡ä»¶è·¯å¾„ä½œä¸º id\n]\n```\n\n```javascript\n// ä¿®æ”¹webpack.prod.js\n...\nconst webpack = require('webpack');\nconst ScriptExtHtmlWebpackPlugin = require('script-ext-html-webpack-plugin');\nconst seen = new Set();\nconst nameLength = 4;\n\nmodule.exports = env => {\n    ...\n    return merge(commonConfig, {\n        ...\n        optimization: {\n            splitChunks: {\n                chunks: 'all',\n                cacheGroups: {\n                    libs: { // åŸºç¡€ç±»åº“:å®ƒæ˜¯æ„æˆæˆ‘ä»¬é¡¹ç›®å¿…ä¸å¯å°‘çš„ä¸€äº›åŸºç¡€ç±»åº“ï¼Œæ¯”å¦‚ vue+vue-router+vuex+axios è¿™ç§æ ‡å‡†çš„å…¨å®¶æ¡¶ï¼Œå®ƒä»¬çš„å‡çº§é¢‘ç‡éƒ½ä¸é«˜ï¼Œä½†æ¯ä¸ªé¡µé¢éƒ½éœ€è¦å®ƒä»¬\n                        name: 'chunk-libs',\n                        test: /[\\\\/]node_modules[\\\\/]/,\n                        priority: 10,\n                        chunks: 'initial' // åªæ‰“åŒ…åˆå§‹æ—¶ä¾èµ–çš„ç¬¬ä¸‰æ–¹\n                    },\n                    antUI: { // UI ç»„ä»¶åº“\n                        name: 'chunk-ant', // å•ç‹¬å°† ant æ‹†åŒ…\n                        priority: 20, // æƒé‡è¦å¤§äº libs å’Œ app ä¸ç„¶ä¼šè¢«æ‰“åŒ…è¿› libs æˆ–è€… app\n                        test: /[\\\\/]node_modules[\\\\/]ant-design-vue[\\\\/]/\n                    },\n                    commons: { // è‡ªå®šä¹‰ç»„ä»¶/å‡½æ•°\n                        name: 'chunk-commons',\n                        test: path.resolve(__dirname, '../src/components/components-global'), // å¯è‡ªå®šä¹‰æ‹“å±•ä½ çš„è§„åˆ™ï¼Œæ¯”å¦‚æ³¨å†Œå…¨å±€ç»„ä»¶çš„ç›®å½•\n                        minChunks: 2, // æœ€å°å…±ç”¨æ¬¡æ•°\n                        priority: 5,\n                        reuseExistingChunk: true\n                    },\n                }\n            },\n            // runtimeChunkï¼šæå– manifestï¼Œä½¿ç”¨script-ext-html-webpack-pluginç­‰æ’ä»¶å†…è”åˆ°index.htmlå‡å°‘è¯·æ±‚\n            runtimeChunk: true,\n            /*\n            * moduleIds: å›ºå®šmoduleIdï¼›ä½¿ç”¨æ–‡ä»¶è·¯å¾„çš„hashä½œä¸º moduleIdï¼Œè§£å†³moduleIdé€’å¢å˜åŒ–å¯¼è‡´çš„æ— æ³•é•¿æœŸç¼“å­˜é—®é¢˜\n            * ç›¸å½“äºåœ¨pluginsä¸­ä½¿ç”¨new webpack.HashedModuleIdsPlugin()\n            */\n            moduleIds: 'hashed',\n        },\n        ...,\n        plugins: [\n            ...,\n            // æ³¨æ„ä¸€å®šè¦åœ¨HtmlWebpackPluginä¹‹åå¼•ç”¨, inline çš„name å’ŒruntimeChunk çš„ nameä¿æŒä¸€è‡´;å°†runtime~index.xxx.jså†…è”åˆ°htmlä¸­\n            new ScriptExtHtmlWebpackPlugin({\n                inline: /runtime.*\\.js$/\n            }),\n            // NamedChunkPluginï¼šç»“åˆè‡ªå®šä¹‰nameResolverå›ºå®šchunkId\n            new webpack.NamedChunksPlugin(chunk => {\n                if (chunk.name) {\n                    return chunk.name;\n                }\n                const modules = Array.from(chunk.modulesIterable);\n                if (modules.length > 1) {\n                    const hash = require('hash-sum');\n                    const joinedHash = hash(modules.map(m => m.id).join('_'));\n                    let len = nameLength;\n                    while (seen.has(joinedHash.substr(0, len))) len++;\n                    seen.add(joinedHash.substr(0, len));\n                    return `chunk-${joinedHash.substr(0, len)}`;\n                } else {\n                    return modules[0].id;\n                }\n            })\n        ]\n    });\n}\n\n```\n\n##### 4.ç”Ÿäº§ç¯å¢ƒæŠ½å–csså¹¶å‹ç¼©ä¼˜åŒ–ï¼ŒåŒæ—¶éœ€è¦æ·»åŠ jså‹ç¼©\n\n`npm i mini-css-extract-plugin optimize-css-assets-webpack-plugin uglifyjs-webpack-plugin -D`\n\nåˆ é™¤webpack.base.js rulesä¸­å…³äºscsså’Œcssç›¸å…³çš„å¤„ç†\n\n```javascript\n// ä¿®æ”¹webpack.base.js\n...\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin'); // ç”Ÿäº§ç¯å¢ƒæŠ½ç¦»css\nmodule.exports = (env, mode) => {\n    const envConfig = getConfig(env, mode);\n    const isDev = envConfig.isDev;\n    return {\n        ...,\n        module: {\n            ...,\n            rules: [\n                ...,\n                {\n                    test: /\\.(scss|css)$/,\n                    include: [\n                        path.resolve(__dirname, '../src')\n                    ],\n                    use: [\n                        isDev ? 'style-loader' : {\n                            loader: MiniCssExtractPlugin.loader,\n                            options: {\n                                publicPath: '../' // è®©cssèƒ½æˆåŠŸåŠ è½½åˆ°å›¾ç‰‡\n                            }\n                        },\n                        'css-loader', 'postcss-loader', 'sass-loader'\n                    ],\n                },\n                {\n                    test: /\\.less$/,\n                    use: [\n                        isDev ? 'style-loader' : {\n                            loader: MiniCssExtractPlugin.loader,\n                            options: {\n                                publicPath: '../'\n                            }\n                        },\n                        'css-loader',\n                        'postcss-loader',\n                        {\n                            loader: 'less-loader',\n                            options: { // antè‡ªå®šä¹‰ä¸»é¢˜\n                                modifyVars: {\n                                    'primary-color': '#000000',\n                                    'link-color': '#17c9e6',\n                                    'item-hover-bg': '#F7F7F7',\n                                    'item-active-bg': '#f3f3f3',\n                                },\n                                javascriptEnabled: true,\n                            },\n                        }\n                    ],\n                }\n            ]\n        },\n        ...\n    }\n}\n```\n\n```javascript\n// ä¿®æ”¹webpack.prod.js\n...\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin'); // æŠ½ç¦»css\nconst OptimizeCSSAssetsPlugin = require('optimize-css-assets-webpack-plugin'); // csså‹ç¼©ä¸ä¼˜åŒ–\nconst UglifyJsPlugin = require('uglifyjs-webpack-plugin');\n\n...\noptimization: {\n    ...\n    minimizer: [\n        new UglifyJsPlugin({ // å‹ç¼©js\n            cache: true,\n            parallel: true,\n            // sourceMap: true\n        }),\n        new OptimizeCSSAssetsPlugin(), // å‹ç¼©cssï¼Œå¯¼è‡´webpack4è‡ªå¸¦çš„jså‹ç¼©æ— æ•ˆï¼Œéœ€æ·»åŠ UglifyJsPlugin\n    ],\n},\n...\nplugins: [\n    ...\n    // å¢åŠ cssæŠ½å–\n    new MiniCssExtractPlugin({\n        filename: 'css/[name].[contenthash:8].css',\n        // chunkFilename: 'css/[id].[contenthash:8].css'\n    }),\n]\n```\n\n##### 5. ä½¿ç”¨DllPluginã€DllReferencePluginæå‡ç¼–è¯‘é€Ÿåº¦\n\n`npm i add-asset-html-webpack-plugin -D`\n\npackage.json scriptsä¸­å¢åŠ ï¼š\n\n```javascript\n\"dll\": \"npm run _dll:pro && npm run _dll:dev\",\n\"_dll:pro\": \"webpack --mode production --progress --config build/webpack.dll.js\",\n\"_dll:dev\": \"webpack --mode development --progress --config build/webpack.dll.js\",\n```\n\n```javascript\n// æ–°å¢æ–‡ä»¶ build/webpack.dll.js\nconst path = require('path');\nconst webpack = require('webpack');\nconst { CleanWebpackPlugin } = require('clean-webpack-plugin');\n\nmodule.exports = (env, argv) => {\n    const isDev = argv.mode === 'development';\n    const dir = isDev ? '../dll/dev' : '../dll/pro';\n    return {\n        // mode: 'production', // ???????\n        entry: {\n            // å°†æ•°ç»„ä¸­çš„æ¨¡å—ä½œä¸ºå…¥å£ç¼–è¯‘æˆåŠ¨æ€é“¾æ¥åº“\n            'vendor': ['vue', 'vue-router', 'vuex', 'vuex-router-sync', '@ant-design/icons/lib/dist']\n        },\n        output: {\n            // æŒ‡å®šç”Ÿæˆæ–‡ä»¶æ‰€åœ¨ç›®å½•\n            // ç”±äºæ¯æ¬¡æ‰“åŒ…ç”Ÿäº§ç¯å¢ƒæ—¶ä¼šæ¸…ç©º dist æ–‡ä»¶å¤¹ï¼Œå› æ­¤è¿™é‡Œæˆ‘å°†å®ƒä»¬å­˜æ”¾åœ¨äº†dllæ–‡ä»¶å¤¹ä¸‹\n            path: path.resolve(__dirname, dir),\n            // æŒ‡å®šæ–‡ä»¶åå¹¶æ·»åŠ hash\n            filename: '[name].[contenthash:6].dll.js',\n            // å­˜æ”¾åŠ¨æ€é“¾æ¥åº“çš„å…¨å±€å˜é‡åç§°ï¼ŒåŠ ä¸Š _dll_ æ˜¯ä¸ºäº†é˜²æ­¢å…¨å±€å˜é‡å†²çªï¼šä¾‹å¦‚å¯¹åº” vendor æ¥è¯´å°±æ˜¯ _dll_vendor\n            // è¿™ä¸ªåç§°éœ€è¦ä¸ DllPlugin æ’ä»¶ä¸­çš„ name å±æ€§å€¼å¯¹åº”èµ·æ¥\n            library: '_dll_[name]'\n        },\n        plugins: [\n            new CleanWebpackPlugin(),\n            // æ¥å…¥ DllPlugin\n            new webpack.DllPlugin({\n                // æè¿°åŠ¨æ€é“¾æ¥åº“çš„ manifest.json æ–‡ä»¶è¾“å‡ºæ—¶çš„æ–‡ä»¶åç§°\n                path: path.join(__dirname, dir, '[name].manifest.json'),\n                // åŠ¨æ€é“¾æ¥åº“çš„å…¨å±€å˜é‡åç§°ï¼Œéœ€è¦å’Œ output.library ä¸­ä¿æŒä¸€è‡´\n                // è¯¥å­—æ®µçš„å€¼ä¹Ÿå°±æ˜¯è¾“å‡ºçš„ manifest.json æ–‡ä»¶ ä¸­ name å­—æ®µçš„å€¼\n                // ä¾‹å¦‚ venfor.manifest.json ä¸­å°±æœ‰ \"name\": \"venfor_dll\"\n                name: '_dll_[name]'\n            })\n        ]\n    }\n}\n```\n\n```javascript\n// ä¿®æ”¹webpack.base.js\n...\nconst AddAssetHtmlPlugin = require('add-asset-html-webpack-plugin');\n\n...\nplugins: [\n    // å‘Šè¯‰ Webpack ä½¿ç”¨äº†å“ªäº›åŠ¨æ€é“¾æ¥åº“\n    new webpack.DllReferencePlugin({\n        // æè¿° vendor åŠ¨æ€é“¾æ¥åº“çš„æ–‡ä»¶å†…å®¹\n        manifest: require(isDev ? '../dll/dev/vendor.manifest.json' : '../dll/pro/vendor.manifest.json')\n    }),\n    ...,\n    // åœ¨HtmlWebpackPluginåä½¿ç”¨ï¼šç”¨äºå°†vendoræ’å…¥æ‰“åŒ…åçš„é¡µé¢ï¼Œå¹¶å°†vendorç§»åŠ¨åˆ°distæ–‡ä»¶å¤¹ä¸‹é¢\n    new AddAssetHtmlPlugin([\n        {\n            // è¦æ·»åŠ åˆ°ç¼–è¯‘ä¸­çš„æ–‡ä»¶çš„ç»å¯¹è·¯å¾„\n            filepath: path.resolve(__dirname, isDev ? '../dll/dev/vendor.*.dll.js' : '../dll/pro/vendor.*.dll.js'), // åŒ¹é…åˆ°å¸¦hashçš„æ–‡ä»¶\n            // æ–‡ä»¶è¾“å‡ºç›®å½•ï¼šä¼šåœ¨distæ–‡ä»¶å¤¹ä¸‹é¢å†ç”Ÿæˆdllæ–‡ä»¶å¤¹\n            outputPath: 'dll',\n            // è„šæœ¬æˆ–é“¾æ¥æ ‡è®°çš„å…¬å…±è·¯å¾„\n            publicPath: 'dll',\n            includeSourcemap: false,\n        }\n    ]),\n]\n```\n\n> é¦–æ¬¡ä½¿ç”¨éœ€è¦æ‰§è¡Œ`npm run dll`æ„å»ºå‡ºæµ‹è¯•/æ­£å¼ç¯å¢ƒä¸‹çš„dllæ–‡ä»¶ï¼Œhtmlä¸­ä¼šè‡ªåŠ¨å¼•å…¥ç›¸åº”çš„dllæ–‡ä»¶ï¼›ä»¥ååªè¦æ²¡æœ‰ä¿®æ”¹dllé…ç½®ï¼Œå°±ä¸éœ€è¦é‡æ–°æ„å»ºdllæ–‡ä»¶ï¼Œåªæœ‰ä¿®æ”¹äº†webpack.dll.jsï¼Œæ‰éœ€è¦é‡æ–°æ‰§è¡Œ`npm run dll`ã€‚ä¹Ÿå°±æ˜¯æŒ‰ç…§ä¸Šé¢çš„æè¿°é…ç½®å¥½åï¼Œå…ˆæ‰§è¡Œnpm run dllï¼Œå¾—åˆ°dllæ–‡ä»¶å¤¹ä¸‹é¢çš„æ–‡ä»¶ï¼Œä¹‹åå°±å¯ä»¥å’Œä¹‹å‰ä¸€æ ·æŒ‰ç…§npm run devå¼€å‘ã€npm run buildæ‰“åŒ…äº†\n\n> è¿™é‡Œä¹‹æ‰€ä»¥éœ€è¦åŒºåˆ†ç¯å¢ƒæ„å»ºä¸åŒdllæ˜¯å› ä¸ºåœ¨modeä¸ºproductionæ—¶ï¼Œdevtoolsæ— æ³•æŸ¥çœ‹vuexæ•°æ®ï¼Œå°šæœªæ‰¾åˆ°å…¶ä»–è§£å†³æ–¹æ¡ˆ\n\n##### 6. ä½¿ç”¨happypackå¤šè¿›ç¨‹åŠ é€Ÿç¼–è¯‘\n\n`npm i happypack -D`\n\n```javascript\n// ä¿®æ”¹webpack.base.js\n...\nconst HappyPack = require('happypack');\n// æ„é€ å‡ºå…±äº«è¿›ç¨‹æ± ï¼Œè¿›ç¨‹æ± ä¸­åŒ…å«5ä¸ªå­è¿›ç¨‹\nconst happyThreadPool = HappyPack.ThreadPool({ size: 5 });\n\nrules: [\n    ...\n    // ä¿®æ”¹babel-loader\n    {\n        test: /\\.js$/,\n        use: 'happypack/loader?id=babel',\n        exclude: /node_modules/,\n        include: path.resolve(__dirname, '../src')\n    },\n    {\n        test: /\\.less$/,\n        use: [\n            isDev ? 'style-loader' : {\n                loader: MiniCssExtractPlugin.loader,\n                options: {\n                    publicPath: '../'\n                }\n            },\n            'happypack/loader?id=less'\n        ],\n    }\n],\n...\nplugins: [\n    new HappyPack({\n        // ç”¨å”¯ä¸€çš„æ ‡è¯†ç¬¦ id æ¥ä»£è¡¨å½“å‰çš„ HappyPack æ˜¯ç”¨æ¥å¤„ç†ä¸€ç±»ç‰¹å®šçš„æ–‡ä»¶\n        id: 'babel',\n        // å¦‚ä½•å¤„ç† .js æ–‡ä»¶ï¼Œç”¨æ³•å’Œ Loader é…ç½®ä¸­ä¸€æ ·\n        loaders: ['babel-loader'],\n        // ä½¿ç”¨å…±äº«è¿›ç¨‹æ± ä¸­çš„å­è¿›ç¨‹å»å¤„ç†ä»»åŠ¡\n        threadPool: happyThreadPool,\n    }),\n    new HappyPack({\n        id: 'less',\n        loaders: ['css-loader', 'postcss-loader', {\n                loader: 'less-loader',\n                options: { // antè‡ªå®šä¹‰ä¸»é¢˜\n                    modifyVars: {\n                        'primary-color': '#000000',\n                        'link-color': '#17c9e6',\n                        'item-hover-bg': '#F7F7F7',\n                        'item-active-bg': '#f3f3f3',\n                    },\n                    javascriptEnabled: true,\n                },\n            }\n        ],\n        threadPool: happyThreadPool,\n    }),\n    ...\n]\n```\n\n> tipsï¼šè¿™é‡Œæ²¡æœ‰å¯¹scssçš„å¤„ç†ä½¿ç”¨happypackï¼Œå› ä¸ºä½¿ç”¨åå‘ç°vueæ–‡ä»¶ä¸­styleå¸¦scopedä¼šå¤±æ•ˆï¼Œå°šæœªæ‰¾åˆ°åŸå› åŠè§£å†³æ–¹æ¡ˆ\n\n> è¿™é‡Œä½¿ç”¨äº†happypackä¹‹åæ„å»ºé€Ÿåº¦åè€Œå˜æ…¢äº†ï¼ŒåŸå› ï¼Ÿï¼Ÿï¼Ÿ\n\n\n##### 7. å…¶ä»–å°è°ƒæ•´\n\n```javascript\n// ä¿®æ”¹webpack.base.js\n...\nperformance: { // æ§åˆ¶ webpack å¦‚ä½•é€šçŸ¥ã€Œèµ„æº(asset)å’Œå…¥å£èµ·ç‚¹è¶…è¿‡æŒ‡å®šæ–‡ä»¶é™åˆ¶ã€\n    hints: 'warning',\n    maxAssetSize: (isDev ? 20 : 1) * 1024 * 1024, // å•æ–‡ä»¶ï¼šbytes\n    maxEntrypointSize: (isDev ? 20 : 3) * 1024 * 1024, // å…¥å£æ‰€æœ‰æ–‡ä»¶ï¼šbytes\n},\n...,\nresolve: {\n    ...,\n    modules: [path.resolve(__dirname, '../node_modules')], // ä½¿ç”¨ç»å¯¹è·¯å¾„æŒ‡æ˜ç¬¬ä¸‰æ–¹æ¨¡å—å­˜æ”¾çš„ä½ç½®ï¼Œä»¥å‡å°‘æœç´¢æ­¥éª¤\n},\n\n```\n\n> src/index.jsä¸­è¦æŠŠ`import '@src/plugins';`æ”¾åˆ°`import '@scss/index.scss';`å‰é¢ï¼Œæ‰ä¸ä¼šè®©antçš„æ ·å¼è¦†ç›–äº†è‡ªå®šä¹‰çš„æ ·å¼\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n```javascript\n```\n```javascript\n```\n```javascript\n```\n```javascript\n```\n```javascript\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n### å­¦ä¹ ç›®å½•ï¼š\n\n<font size=3 color=#63937d>webpackç›¸å…³:</font>\n* [npmè¯¦è§£](https://juejin.im/post/5ab3f77df265da2392364341)\n* [ç®€å•æ˜“æ‡‚çš„ webpack æ‰“åŒ…å JS çš„è¿è¡Œè¿‡ç¨‹-1](https://juejin.im/post/5a23b130f265da432003101a)\n* [ç®€å•æ˜“æ‡‚çš„ webpack æ‰“åŒ…å JS çš„è¿è¡Œè¿‡ç¨‹-2](https://juejin.im/post/5a34bcf9f265da43070355f8)\n* [importã€requireã€exportã€module.exports æ··åˆä½¿ç”¨è¯¦è§£](https://juejin.im/post/5a2e5f0851882575d42f5609)\n* [webpack æ‰“åŒ…æœºåˆ¶](https://github.com/happylindz/blog/issues/6)\n* [webpack åº”ç”¨ç¼–è¯‘ä¼˜åŒ–ä¹‹è·¯](https://juejin.im/post/59dc57f2f265da431d3ba2ef)\n* [æ·±å…¥æµ…å‡ºwebpack](http://webpack.wuhaolin.cn)\n* [å…¥é—¨Webpackï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†](https://www.jianshu.com/p/42e11515c10f)\n* [webpack ä¼˜åŒ–](https://github.com/happylindz/blog/issues/8)\n* [Webpack4 æ­å»º Vue é¡¹ç›®](https://juejin.im/post/5b7d350951882542f3278b11)\n* [webpack4.X å®æˆ˜ï¼ˆäºŒï¼‰](https://juejin.im/post/5c74a61bf265da2da00ebae1)\n* [webpack4.X å®æˆ˜ï¼ˆä¸‰ï¼‰](https://juejin.im/post/5c984983f265da610f7c0ed4)\n* [æ­å»ºé¡¹ç›®æ•™ç¨‹](https://juejin.im/post/59097cd7a22b9d0065fb61d2)\n* [ä½¿ç”¨ Webpack çš„ DllPlugin æå‡é¡¹ç›®æ„å»ºé€Ÿåº¦](https://www.jishuwen.com/d/2As1#tuit)\n* [ä½¿ç”¨webpack4æå‡180%ç¼–è¯‘é€Ÿåº¦](http://louiszhai.github.io/2019/01/04/webpack4/)\n* [ç§»åŠ¨spaå•†åŸä¼˜åŒ–è®°ï¼ˆäºŒï¼‰--- å‡å°‘70%çš„æ‰“åŒ…ç­‰å¾…æ—¶é—´](https://juejin.im/post/5abf13bf6fb9a028cc61577d)\n* [postcss-loader   autoprefixer](https://blog.csdn.net/qq_37942845/article/details/95047372)\n* [ä½¿ç”¨ HashedModuleIdsPlugin è§£å†³ hash é¢‘ç¹å˜åŠ¨çš„é—®é¢˜](https://github.com/sorrycc/roadhog/issues/510)\n* [æ‰‹æ‘¸æ‰‹ï¼Œå¸¦ä½ ç”¨åˆç†çš„å§¿åŠ¿ä½¿ç”¨webpack4ï¼ˆä¸‹ï¼‰](https://juejin.im/post/5b5d6d6f6fb9a04fea58aabc#heading-4)\n* [csså‹ç¼©](https://juejin.im/post/5b977a19f265da0ac4469057)\n* [vuex-router-sync](https://blog.csdn.net/jerryman_ghj/article/details/82754209)\n* [ESLint(vue+webpack)é…ç½®](https://segmentfault.com/a/1190000016925949)\n* [æ¸…ç†æ§åˆ¶å°](https://github.com/webpack-contrib/mini-css-extract-plugin/issues/39)\n* [Webpackä¼ å‚](https://github.com/wayou/wayou.github.io/issues/14)\n\n<font size=3 color=#63937d>é‡åˆ°çš„é—®é¢˜:</font>\n* [babelçš„polyfillå’Œruntimeçš„åŒºåˆ«](https://segmentfault.com/q/1010000005596587?from=singlemessage&isappinstalled=1)\n* [Babelå­¦ä¹ ç³»åˆ—4-polyfillå’Œruntimeå·®åˆ«](https://zhuanlan.zhihu.com/p/58624930)\n* [transform-runtime polyfill env](https://www.jianshu.com/p/d078b5f3036a)\n* [å…³äº@babel/polyfill -- æŒ‰éœ€åŠ è½½](https://segmentfault.com/a/1190000018632153)\n* [babel7æœ€ä½³å®è·µ](https://github.com/Weiyu-Chen/blog/issues/5)\n* [Babel 7 å‡çº§å®è·µ](https://blog.hhking.cn/2019/04/02/babel-v7-update/)\n* [webpackæŒä¹…åŒ–ç¼“å­˜-1](https://github.com/pigcan/blog/issues/9)\n* [webpackæŒä¹…åŒ–ç¼“å­˜-2](https://juejin.im/post/5b977a19f265da0ac4469057)\n\n\n\nä»¥ä¸‹ä¸ºæœ¬é¡¹ç›®æ„å»ºè¿‡ç¨‹ä¸­é‡åˆ°çš„ç–‘é—®æŸ¥æ‰¾åˆ°çš„ç›¸å…³å‚è€ƒï¼š\n\n1ã€ä»€ä¹ˆæ—¶å€™ç”¨babel-polyfillï¼Œä»€ä¹ˆæ—¶å€™ç”¨babel-runtimeï¼Ÿ\n\nï¼ˆ1ï¼‰transform-runtimeä¸ä¼šæ±¡æŸ“å…¨å±€ï¼Œä½†æ˜¯ä¸èƒ½ä½¿ç”¨å®ä¾‹æ–¹æ³•ï¼Œå¦‚Array.find\n\nï¼ˆ2ï¼‰babel-polyfillä¼šæ±¡æŸ“å…¨å±€ç©ºé—´ï¼Œå¹¶å¯èƒ½å¯¼è‡´ä¸åŒç‰ˆæœ¬é—´çš„å†²çªï¼Œè€Œbabel-runtimeä¸ä¼šã€‚ä»è¿™ç‚¹çœ‹åº”è¯¥ç”¨babel-runtimeã€‚\nä½†è®°ä½ï¼Œbabel-runtimeæœ‰ä¸ªç¼ºç‚¹ï¼Œå®ƒä¸æ¨¡æ‹Ÿå®ä¾‹æ–¹æ³•ï¼Œå³å†…ç½®å¯¹è±¡åŸå‹ä¸Šçš„æ–¹æ³•ï¼Œæ‰€ä»¥ç±»ä¼¼Array.prototype.findï¼Œä½ é€šè¿‡babel-runtimeæ˜¯æ— æ³•ä½¿ç”¨çš„ã€‚æœ€åï¼Œè¯·ä¸è¦ä¸€æ¬¡å¼•å…¥å…¨éƒ¨çš„polyfillsï¼ˆå¦‚require('babel-polyfill')ï¼‰ï¼Œè¿™ä¼šå¯¼è‡´ä»£ç é‡å¾ˆå¤§ã€‚è¯·æŒ‰éœ€å¼•ç”¨æœ€å¥½ã€‚\n\nï¼ˆ3ï¼‰æŒ‰éœ€å¼•å…¥polyfillå­˜åœ¨é£é™©ï¼Œå¯èƒ½æ— æ³•ä¸ºæŸäº›ç¬¬ä¸‰æ–¹ç»„ä»¶æä¾›å…¶ä¾èµ–çš„polyfill:https://juejin.im/post/5cb9833b6fb9a068a84fe4d0,\n\n\n\né—ç•™é—®é¢˜ï¼š\n\n1ã€ä¾èµ–åŒ…ä¸­tree-shakingåçš„ä¾èµ–æ–‡ä»¶èƒ½å¤Ÿè¢«ç¼–è¯‘å—ï¼Œæ–‡ä»¶ä¸­ä½¿ç”¨çš„es6æ–°ç‰¹æ€§èƒ½å¤Ÿè¢«polyfillæ£€æµ‹åˆ°ï¼Ÿ\n\n\n\n\n\n"},mxS1:function(n,e){n.exports="# ä½¿ç”¨create-react-appå®Œå–„reactç§»åŠ¨ç«¯æ¡†æ¶\n\n> æœ¬ç¬”è®°ä¸»è¦è®°å½•ä½¿ç”¨create-react-appä¸€æ­¥æ­¥å®Œå–„reactç§»åŠ¨ç«¯æ¡†æ¶çš„è¿‡ç¨‹ï¼ŒåŒ…æ‹¬å¼•å…¥react-routerã€reduxã€reduxã€lessã€antdç­‰ã€‚ç‚¹[é¡¹ç›®æºç ](https://github.com/jiaoyanlin/react_mobile_demo)æŸ¥çœ‹å…·ä½“ç»†èŠ‚ã€‚\n\n#### 1ã€é¡¹ç›®åˆå§‹åŒ–ï¼š\n\n```\nnpm install -g create-react-app // å®‰è£…å…¨å±€å‘½ä»¤\n\ncreate-react-app my-app-demo // åˆ›å»ºé¡¹ç›®\n\ncd my-app-demo // è¿›å…¥é¡¹ç›®ç›®å½•\n\nnpm run eject // æ”¾å‡ºé…ç½®æ–‡ä»¶ï¼Œæ‰§è¡Œåé¡¹ç›®ç›®å½•ä¸‹å¤šäº†configå’Œscripsç›®å½•\n\nyarn // å®‰è£…ä¾èµ–\n\nyarn start // å¯åŠ¨é¡¹ç›®ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€http://localhost:3000/ï¼Œé¡¹ç›®å¯åŠ¨æˆåŠŸ\n```\n\n#### 2ã€å¼•å…¥react router 4ï¼š\n\nï¼ˆ1ï¼‰ä¸­æ–‡æ–‡æ¡£ï¼šhttp://reacttraining.cn/web/guides/quick-start\n\nï¼ˆ2ï¼‰å®‰è£…ä¾èµ–\n\n```\nyarn add react-router-dom\n# æˆ–è€…ï¼Œä¸ä½¿ç”¨ yarn\nnpm install react-router-dom\n```\n\nï¼ˆ3ï¼‰æ ¹æ®å®˜æ–¹ç¤ºä¾‹ï¼Œåœ¨src/App.jsç²˜è´´å¦‚ä¸‹ä»£ç ï¼š\n\n```\nimport React from 'react'\nimport {\n  BrowserRouter as Router,\n  Route,\n  Link\n} from 'react-router-dom'\n\nconst BasicExample = () => (\n  <Router>\n    <div>\n      <ul>\n        <li><Link to=\"/\">Home</Link></li>\n        <li><Link to=\"/about\">About</Link></li>\n        <li><Link to=\"/topics\">Topics</Link></li>\n      </ul>\n\n      <hr/>\n\n      <Route exact path=\"/\" component={Home}/>\n      <Route path=\"/about\" component={About}/>\n      <Route path=\"/topics\" component={Topics}/>\n    </div>\n  </Router>\n)\n\nconst Home = () => (\n  <div>\n    <h2>Home</h2>\n  </div>\n)\n\nconst About = () => (\n  <div>\n    <h2>About</h2>\n  </div>\n)\n\nconst Topics = ({ match }) => (\n  <div>\n    <h2>Topics</h2>\n    <ul>\n      <li>\n        <Link to={`${match.url}/rendering`}>\n          Rendering with React\n        </Link>\n      </li>\n      <li>\n        <Link to={`${match.url}/components`}>\n          Components\n        </Link>\n      </li>\n      <li>\n        <Link to={`${match.url}/props-v-state`}>\n          Props v. State\n        </Link>\n      </li>\n    </ul>\n\n    <Route path={`${match.url}/:topicId`} component={Topic}/>\n    <Route exact path={match.url} render={() => (\n      <h3>Please select a topic.</h3>\n    )}/>\n  </div>\n)\n\nconst Topic = ({ match }) => (\n  <div>\n    <h3>{match.params.topicId}</h3>\n  </div>\n)\n\nexport default BasicExample\n```\n\nï¼ˆ4ï¼‰æ­¤æ—¶æµè§ˆå™¨ä¸­å·²ç»å¯ä»¥çœ‹åˆ°æˆåŠŸå¼•å…¥react-routeräº†\n\n#### 3ã€å¼•å…¥antd mobile\n\n> å®˜ç½‘æä¾›äº†ä¸ºejectå‰å…³äºcreate-react-appå¼•å…¥antd-mobileçš„æ–¹æ¡ˆï¼Œå¯ä»¥å‚è€ƒ[æ•™ç¨‹](https://mobile.ant.design/docs/react/use-with-create-react-app-cn)è¿›è¡Œå®‰è£…ï¼›æœ¬é¡¹ç›®ç”±äºå‰é¢å·²ç»ç”¨npm run ejectå°†é…ç½®æš´éœ²å‡ºæ¥ï¼Œé‡‡ç”¨å¦ä¸€ç§é˜²èŒƒå®‰è£…\n\nï¼ˆ1ï¼‰å®‰è£…ä¾èµ–ï¼š\n\n```\ncnpm install babel-plugin-import --save-dev\n\ncnpm install antd-mobile --save\n```\n\nï¼ˆ2ï¼‰é…ç½®æŒ‰éœ€åŠ è½½ï¼Œåœ¨config/webpack.config.dev.jsä¸­ä¿®æ”¹å¦‚ä¸‹ä»£ç ï¼Œå³åœ¨babel-loaderä¸­æ·»åŠ pluginsï¼š\n\n```\n// Process JS with Babel.\n{\n    test: /\\.(js|jsx|mjs)$/,\n    include: paths.appSrc,\n    loader: require.resolve('babel-loader'),\n    options: {\n        cacheDirectory: true,\n        // æ–°å¢ä»£ç -----å¼€å§‹\n        plugins: ['transform-runtime', ['import', {\n            libraryName: 'antd-mobile',\n            style: 'css'\n        }]]\n        // æ–°å¢ä»£ç -----ç»“æŸ\n    },\n},\n```\nåŒç†ä¿®æ”¹config/webpack.config.prod.jsä¸­ç›¸å…³ä»£ç \n\nï¼ˆ3ï¼‰æ‰§è¡Œ`npm start`è¿è¡Œé¡¹ç›®ï¼Œå°±å¯ä»¥ä½“éªŒantd mobileäº†ï¼Œ\n\n```\nimport { Button } from 'antd-mobile';\n\n<Button>Start</Button>\n```\n\n\n#### 4ã€å¼•å…¥è·¯å¾„åˆ«åï¼Œä¿®æ”¹ webpack.config.dev ä¸ webpack.config.prod ä¸¤ä¸ªæ–‡ä»¶\n\n```\nfunction resolvePath(dir) {\n    return path.join(__dirname, '..', dir)\n}\n\n// ä¿®æ”¹\nalias: {\n    'react-native': 'react-native-web',\n    // åŠ å…¥ä»¥ä¸‹é…ç½®\n    '@': resolvePath('src')\n}\n```\n\nè‡³æ­¤ä»¥åå¼•å…¥æ–‡ä»¶å¯ä»¥è¿™ä¹ˆå†™ï¼š`import xxx from '@/yyy/xxx'`\n\n#### 5ã€å¼•å…¥reduxï¼šè¾ƒå¤æ‚ï¼ŒæŸ¥çœ‹ä»£ç æäº¤è®°å½•\n\n#### 6ã€å¼•å…¥lessï¼š\n\nï¼ˆ1ï¼‰å®‰è£…ä¾èµ–ï¼š\n\n```\nnpm install --save-dev less-loader less\n```\n\nï¼ˆ2ï¼‰ä¿®æ”¹ webpack.config.dev ä¸ webpack.config.prod ä¸¤ä¸ªæ–‡ä»¶\n\næŸ¥æ‰¾ ï¼š`exclude`\n\nåŸæœ¬çš„ `exclude: [/\\.(js|jsx|mjs)$/, /\\.html$/, /\\.json$/],`\n\nä¿®æ”¹ä¸º `exclude: [/\\.html$/, /\\.(js|jsx|mjs)$/, /\\.(css|less)$/, /\\.json$/, /\\.bmp$/, /\\.gif$/, /\\.jpe?g$/, /\\.png$/],`\n\n\næŸ¥æ‰¾ï¼š`test: /.css$/`\n\nåŸæœ¬çš„ `test: /\\.css$/,`\n\nä¿®æ”¹ä¸º `test: /\\.(css|less)$/,`\n\n\nåœ¨è¿™ä¸ªtestçš„ä¸‹é¢æ‰¾åˆ°useï¼Œæ·»åŠ loader:\n\n```\nuse: [  \n    {...},\n    {...},\n    {\n        loader: require.resolve('less-loader') // compiles Less to CSS\n    }\n],\n```\n\n#### 7ã€ä¿®å¤æ‰“åŒ…åçš„æ–‡ä»¶ç›´æ¥æ‰“å¼€æ—¶ä¸€ç‰‡ç©ºç™½ï¼š\n\npageage.json æ–‡ä»¶å¢åŠ é…ç½®ï¼š\"homepage\": \".\",\n\n#### 8ã€antd mobileå®šåˆ¶ä¸»é¢˜ï¼š\n\nï¼ˆ1ï¼‰é¦–å…ˆï¼Œä½ çš„é¡¹ç›®é‡Œéœ€è¦åŒ…å«å¦‚ä¸‹ä¾èµ– babel-plugin-import less less-loader style-loader css-loader\n\nï¼ˆ2ï¼‰é…ç½® babel-plugin-import ç¡®ä¿åŠ è½½ antd-mobile less æ–‡ä»¶ï¼š\n\n```\n{\n    ...\n    \"plugins\": [\n        [\"import\", {\"libraryName\": \"antd-mobile\", \"style\": true}],\n        ...\n    ]\n}\n```\n\nï¼ˆ3ï¼‰æ–°å»ºæ–‡ä»¶antMobileTheme.jsï¼Œç”¨äºè¦†ç›–antè‡ªå¸¦çš„lesså˜é‡ï¼Œ[å˜é‡è¡¨](https://github.com/ant-design/ant-design-mobile/blob/master/components/style/themes/default.less)ï¼š\n\n```\nconst theme = {\n    \"brand-primary\": \"yellow\",\n    \"color-text-base\": \"red\",\n    \"fill-base\": '#0b0'\n}\nmodule.exports = theme\n```\n\nï¼ˆ4ï¼‰ä¿®æ”¹ webpack.config.dev ä¸ webpack.config.prod ä¸¤ä¸ªæ–‡ä»¶\n\n```\nconst theme = require('./antMobileTheme');\n\nmodule.exports = {\n    ...\n    module: {\n        ...\n        rules: [\n            ...\n            {\n                test: /\\.less$/,\n                use: [\n                    'style-loader',\n                    'css-loader',\n                    // å…¶å®å°±æ˜¯ä¿®æ”¹ä¸‹é¢è¿™å¥ä¸ºç°åœ¨è¿™æ ·\n                    { loader: 'less-loader', options: { modifyVars: theme } },\n                ],\n                include: /node_modules/,\n            },\n            ...\n        ],\n    },\n    ...\n}\n\n```\n\n#### 9ã€ç§»åŠ¨ç«¯é€‚é… rem vwï¼š\n\nï¼ˆ1ï¼‰å‚è€ƒæ–‡ç« [åŸºäºvwç­‰viewportè§†åŒºå•ä½é…åˆremå“åº”å¼æ’ç‰ˆå’Œå¸ƒå±€](http://www.zhangxinxu.com/wordpress/2016/08/vw-viewport-responsive-layout-typography/)ï¼Œä½¿ç”¨vwå’Œremå®ç°ç§»åŠ¨ç«¯é€‚é…ï¼Œå…·ä½“å°±æ˜¯åœ¨å¼•å…¥çš„ä¸»cssä¸­åŠ å…¥ä»¥ä¸‹ä»£ç ï¼š\n\n```\nhtml {\n  \tfont-size: 16px !important;\n}\n\n@media screen and (min-width: 375px) {\n\thtml {\n\t\t/* iPhone6çš„375pxå°ºå¯¸ä½œä¸º16pxåŸºå‡†ï¼Œ414pxæ­£å¥½18pxå¤§å°, 600 20px */\n\t\tfont-size: calc(100% + 2 * (100vw - 375px) / 39) !important;\n\t\tfont-size: calc(16px + 2 * (100vw - 375px) / 39) !important;\n\t}\n}\n@media screen and (min-width: 414px) {\n\thtml {\n\t\t/* 414px-1000pxæ¯100åƒç´ å®½å­—ä½“å¢åŠ 1px(18px-22px) */\n\t\tfont-size: calc(112.5% + 4 * (100vw - 414px) / 586) !important;\n\t\tfont-size: calc(18px + 4 * (100vw - 414px) / 586) !important;\n\t}\n}\n@media screen and (min-width: 600px) {\n\thtml {\n\t\t/* 600px-1000pxæ¯100åƒç´ å®½å­—ä½“å¢åŠ 1px(20px-24px) */\n\t\tfont-size: calc(125% + 4 * (100vw - 600px) / 400) !important;\n\t\tfont-size: calc(20px + 4 * (100vw - 600px) / 400) !important;\n\t}\n}\n@media screen and (min-width: 1000px) {\n\thtml {\n\t\t/* 1000pxå¾€åæ˜¯æ¯100åƒç´ 0.5pxå¢åŠ  */\n\t\tfont-size: calc(137.5% + 6 * (100vw - 1000px) / 1000) !important;\n\t\tfont-size: calc(22px + 6 * (100vw - 1000px) / 1000) !important;\n\t}\n}\n```\n\né€šè¿‡ä»¥ä¸Šä»£ç å®ç°ï¼šä»…ç”¨csså°±å¯ä»¥æ ¹æ®å±å¹•å¤§å°åŠ¨æ€æ”¹å˜htmlæ ¹å…ƒç´ çš„åŸºç¡€å­—å·å¤§å°ï¼Œä»è€Œä½¿å¾—é¡µé¢ä¸­ä½¿ç”¨remå¸ƒå±€çš„å…ƒç´ å®ç°å°ºå¯¸çš„åŠ¨æ€å˜åŒ–ã€‚\n\nï¼ˆ2ï¼‰ç”±äºuiç»™å‡ºçš„è®¾è®¡ç¨¿æ˜¯æ”¾å¤§è¿‡çš„ï¼Œæ¯”å¦‚ä»¥iPhone6çš„375pxä¸ºåŸºå‡†çš„è®¾è®¡ç¨¿é€šå¸¸å®½åº¦æ—¶750pxï¼Œä¸ºäº†åæœŸä¹¦å†™ä»£ç çš„æ–¹ä¾¿ï¼Œè¿™é‡Œä½¿ç”¨lesså°†ç”±è®¾è®¡ç¨¿é‡å‡ºçš„pxå°ºå¯¸è½¬æ¢æˆremï¼Œçœå»è‡ªå·±è®¡ç®—remçš„éº»çƒ¦ï¼š\n\n```\n/*\n* .lessæ–‡ä»¶\n* iPhone6çš„375pxå°ºå¯¸ä½œä¸º16pxåŸºå‡†ï¼ˆå³æ­¤æ—¶1remå¯¹åº”16pxï¼‰ï¼Œ\n* è€Œæ­¤æ—¶è®¾è®¡ç¨¿å¯¹åº”çš„å®½ä¸º750pxï¼Œ\n* æ‰€ä»¥ç§»åŠ¨ç«¯çš„remå¤§å° = è®¾è®¡ç¨¿ä¸­é‡å‡ºçš„å°ºå¯¸/2/16 rem\n*/\n\n.pxtorem(@pro, @px) {\n    @{pro}: (@px / 16 / 2) * 1rem;\n}\n.test1 {\n    .pxtorem(width, 200);\n    .pxtorem(height, 200);\n    .pxtorem(font-size, 32);\n    background: #eee;\n}\n.test2 {\n    width: 100px;\n    height: 100px;\n    font-size: 16px;\n    background: #ddd;\n}\n```\n\næ”¾å…¥å®ä¾‹ä¸­å¯ä»¥çœ‹åˆ°å½“å±å¹•ä¸º375pxæ—¶ï¼Œtest1å’Œtest2ä¸¤ä¸ªå…ƒç´ å¤§å°ã€å­—å·éƒ½æ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯test1çš„å¤§å°ã€å­—å·ä¼šéšç€å±å¹•å˜åŒ–è€Œå˜åŒ–ï¼Œè€Œtest2ä¸ä¼šã€‚\n\n#### 10ã€ä½¿ç”¨lessè§£å†³Retinaå±å¹•1pxè¾¹æ¡†é—®é¢˜ï¼š\n\nï¼ˆ1ï¼‰å¼•å…¥src/assets/lessæ–‡ä»¶å¤¹ä¸‹çš„1px.lessæ–‡ä»¶ï¼ˆè¯¦è§é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹çš„æºç ï¼‰ï¼›\n\nï¼ˆ2ï¼‰ä½¿ç”¨æ–¹æ³•ï¼š\n\n```\n// .lessæ–‡ä»¶ä¸­\n\n@import 'assets/less/1px.less';\n\n.test1 {\n    .pxtorem(width, 200);\n    .pxtorem(height, 200);\n    .pxtorem(font-size, 32);\n    .b-1px(red, 0); // å…¨è¾¹æ¡†ï¼Œå‚æ•°ä¸ºï¼ˆè¾¹æ¡†é¢œè‰²ï¼Œåœ†è§’å¤§å°ï¼‰\n    // .b-1px(red, 10px);\n    // .b-1px-t(red); // ä¸Šè¾¹æ¡†ï¼Œå…¶ä½™è¿˜æœ‰b-1px-bã€b-1px-tbã€b-1px-lã€b-1px-r\n}\n```\n"},n9MT:function(n,e){n.exports="# React-Nativeå¼€å‘ï¼šAndroidçœŸæœºè°ƒè¯•ï¼ˆå°ç±³æ‰‹æœºmiui9ç³»ç»Ÿï¼‰\n\n> å»ºè®®æ ¹æ®å®˜ç½‘ç»™çš„æ­¥éª¤æ¥è¿›è¡Œå®‰è£…ï¼Œä½†æ˜¯æˆ‘æ ¹æ®å®˜ç½‘æ­¥éª¤å®‰è£…æ—¶é‡åˆ°äº†ä¸€äº›æŠ¥é”™ï¼Œå› æ­¤åœ¨è¿™é‡Œè®°å½•ä¸‹ï¼Œ[å®˜ç½‘æ­¥éª¤ï¼šåœ¨è®¾å¤‡ä¸Šè¿è¡Œ](https://reactnative.cn/docs/0.51/running-on-device-android.html#content)ã€‚\n\n### å…·ä½“æ­¥éª¤ï¼š\n\n1ã€ å¼€å¯æ‰‹æœºUSBè°ƒè¯•ï¼ˆåœ¨è®¾ç½®->æ›´å¤šè®¾ç½®->å¼€å‘è€…é€‰é¡¹->USBè°ƒè¯•ï¼‰ï¼ŒåŒæ—¶æ‰“å¼€USBå®‰è£…ï¼ˆå…è®¸é€šè¿‡USBå®‰è£…åº”ç”¨ï¼Œå¦åˆ™åˆå§‹åŒ–appæ—¶ä¼šå®‰è£…å¤±è´¥ï¼ŒæŠ¥INSTALL_FAILED_USER_RESTRICTEDé”™è¯¯ï¼‰ï¼›\n\n2ã€ ç¡®ä¿ä½ çš„è®¾å¤‡å·²ç»è¿æ¥æˆåŠŸï¼Œåœ¨CMDä¸­è¾“å…¥`adb devices`æŸ¥çœ‹å½“å‰è¿æ¥è®¾å¤‡ï¼Œç¡®ä¿åªè¿æ¥äº†ä¸€ä¸ªè®¾å¤‡ã€‚ï¼ˆå…·ä½“å‚è§[å®˜ç½‘](https://reactnative.cn/docs/0.51/running-on-device-android.html#content)ï¼‰\n\n```\n$ adb devices\nList of devices attached\nemulator-5554 offline   # Googleæ¨¡æ‹Ÿå™¨\n14ed2fcc device         # çœŸå®è®¾å¤‡\n```\n\n3ã€åœ¨ç»ˆç«¯è¿›å…¥åˆ°react-nativeç›®å½•ä¸‹è¿è¡Œ`react-native run-android`ï¼Œç›®çš„æ˜¯åœ¨è®¾å¤‡ä¸Šå®‰è£…å¹¶å¯åŠ¨åº”ç”¨ï¼Œæ³¨æ„æ­¤æ—¶æ‰‹æœºä¸Šä¼šå¼¹å‡ºâ€œUSBå®‰è£…æç¤ºâ€ï¼Œé€‰æ‹©ç»§ç»­å®‰è£…ï¼Œæ­¤æ—¶ä¼šæ¥ç€å¼¹å‡ºæˆ‘ä»¬çš„Appåº”ç”¨çš„ç›¸å…³è®¾ç½®ï¼Œå°†æ˜¾ç¤ºæ‚¬æµ®çª—è®¾ç½®ä¸ºâ€œå…è®¸â€ï¼ˆå¦åˆ™å¯èƒ½ä¼šå‡ºç°ç™½å±ï¼‰ã€‚\n\n4ã€ ä»è®¾å¤‡ä¸Šè®¿é—®å¼€å‘æœåŠ¡å™¨ï¼šé€šè¿‡â€œMenuâ€é”®æˆ–è€…æ‘‡æ™ƒè®¾å¤‡æ¥æ‰“å¼€å¼€å‘è€…èœå•ï¼Œç‚¹å‡»è¿›å…¥`Dev Settings`ï¼Œç‚¹å‡»`Debug server host for device`ï¼Œè¾“å…¥ä½ ç”µè„‘çš„IPåœ°å€å’Œç«¯å£å·ï¼ˆè­¬å¦‚10.0.1.1:8081ï¼‰ï¼Œå›åˆ°å¼€å‘è€…èœå•ç„¶åé€‰æ‹©Reload JSã€‚æ­¤æ—¶åº”è¯¥å¦‚æœè¿˜çœ‹ä¸åˆ°é¡µé¢æˆ–è€…æŠ¥é”™ï¼Œå°è¯•å…³é—­è¯¥åº”ç”¨å¹¶é‡æ–°æ‰“å¼€ï¼Œåº”è¯¥å°±èƒ½æˆåŠŸè¿æ¥ä¸ŠAppäº†ã€‚\n\næç¤ºï¼š(Android 5.0åŠä»¥ä¸Š)å¯ä»¥å°è¯•ä½¿ç”¨adb reverseå‘½ä»¤ï¼Œè¿è¡Œadb reverse tcp:8081 tcp:8081ï¼Œä¸éœ€è¦æ›´å¤šé…ç½®ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨Reload JSå’Œå…¶å®ƒçš„å¼€å‘é€‰é¡¹äº†ã€‚ï¼ˆå®˜ç½‘æ¨èæ–¹å¼ï¼Œæˆ‘è¿˜æ²¡æœ‰å°è¯•ï¼‰\n\n\nå¤‡æ³¨ï¼šæˆ‘åœ¨æ‰§è¡Œæ­¥éª¤3æ—¶æ˜¯å¤±è´¥çš„ï¼Œå¯èƒ½æ˜¯å½“å‰æˆ‘æ‰‹æœºæ¯å±äº†ï¼Œå¿½ç•¥äº†å…è®¸USBå®‰è£…ã€‚åæ¥æˆ‘é€šè¿‡ä¹‹å‰å®‰è£…çš„AndroidStudioæ¥è¿è¡Œï¼Œè™šæ‹Ÿè®¾å¤‡ä¸­æœ‰æˆ‘çš„æ‰‹æœºï¼Œé€‰æ‹©è¯¥è®¾å¤‡å¹¶è¿è¡Œï¼Œä¸­é€”è®°å¾—æ‰“å¼€å‘½ä»¤è¡Œï¼Œå¯åŠ¨æœåŠ¡å™¨ï¼ˆnpm startï¼‰ï¼Œç„¶åå°±æˆåŠŸäº†ã€‚åæ¥æˆ‘å†é€šè¿‡`react-native run-android`å‘½ä»¤å°±èƒ½ç›´æ¥å®‰è£…appè¿›è¡Œè°ƒè¯•äº†ã€‚\n"},oQGF:function(n,e,t){"use strict";var s=t("vGAL");t.n(s).a},qDsG:function(n,e){n.exports=_dll_highlight},qLOK:function(n,e){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKoAAACqCAYAAAA9dtSCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkRDMzE1NDc5RTQzOTExRTk4MUY2OTA3RTA0NzkyODc3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkRDMzE1NDdBRTQzOTExRTk4MUY2OTA3RTA0NzkyODc3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6REMzMTU0NzdFNDM5MTFFOTgxRjY5MDdFMDQ3OTI4NzciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6REMzMTU0NzhFNDM5MTFFOTgxRjY5MDdFMDQ3OTI4NzciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6deA+mAAAYOElEQVR42uxdC1hV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"},tjUo:function(n,e,s){"use strict";s.r(e);var t={};s.r(t),s.d(t,"changeMsg",function(){return B});var o={};s.r(o),s.d(o,"mutationsMsg",function(){return V}),s.d(o,"mutationsList",function(){return U});var i={};s.r(i),s.d(i,"gettersMsg",function(){return F});s("Ldmx"),s("8+KV");var r=s("Kw5r"),a=s("FIf5"),l=s.n(a);s("gDt4");r.default.directive("highlight",function(n){n.querySelectorAll("pre code").forEach(function(n){l.a.highlightBlock(n)})});function p(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"list-wrap"},[t.articleKey?s("div",{staticClass:"mark-wrap"},[s("vue-markdown",{directives:[{name:"highlight",rawName:"v-highlight"}],attrs:{source:t.content}})],1):s("div",{staticClass:"article-list"},t._l(t.articleList.list,function(e){return s("div",{key:e.key,staticClass:"article_item",on:{click:function(n){return t.onClickArticle(e.key)}}},[s("h2",{staticClass:"tit"},[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"con"},[t._v(t._s(e.abstract))])])}),0)])}var c=s("jE9Z");p._withStripped=!0;s("HAE/"),s("WLL4"),s("jm62"),s("0l/t"),s("ioFf"),s("rGqo"),s("yt8O"),s("Btvt"),s("RW0V"),s("dRSK");var u=s("rePB"),d=s("L2JU"),m=s("nOak");function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,s)}return t}var b={name:"list",components:{VueMarkdown:s.n(m).a},data:function(){return{typeKey:"",articleKey:"",articleList:[]}},computed:function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(t,!0).forEach(function(n){Object(u.a)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({},Object(d.mapState)({nowRoute:function(n){return n.route},list:function(n){return n.list}}),{content:function(){var n=this.typeKey,e=this.articleKey;return n&&e?s("T+MD")("./".concat(n,"/").concat(e,".md")):""}}),watch:{nowRoute:{immediate:!0,handler:function(n){var e=n.query,t=e.typeKey,s=e.articleKey;if(!t)return this.articleList=this.list[0],this.typeKey=this.list[0].key,!1;this.typeKey!==t&&(this.articleList=this.list.find(function(n){return n.key===t}),this.typeKey=t),this.articleKey=s}}},methods:{onClickArticle:function(n){this.$router.push({name:"list",query:{typeKey:this.typeKey,articleKey:n}})}}},v=(s("u4UV"),s("KHd+")),f=Object(v.a)(b,p,[],!1,null,"31499d3b",null);f.options.__file="src/views/list/index.vue";function h(){var n=this.$createElement;return(this._self._c||n)("div",[this._v("\n    æ‰¾ä¸åˆ°ç›¸å…³é¡µé¢\n")])}var j=f.exports;h._withStripped=!0;var k={name:"noFound",data:function(){return{}},methods:{}},w=Object(v.a)(k,h,[],!1,null,"d6ba9ed2",null);w.options.__file="src/views/noFound.vue";var x=w.exports;r.default.use(c.default);function y(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"app-main"},[s("div",{staticClass:"app-aside"},[t._m(0),t._v(" "),s("div",{staticClass:"list"},[s("div",{staticClass:"list_tit"},[t._v("æ–‡ç« åˆ†ç±»")]),t._v(" "),s("div",{staticClass:"list_con"},t._l(t.list,function(e){return s("div",{key:e.key,class:["list_item",t.typeKey===e.key?"active":""],on:{click:function(n){return t.onClickType(e.key)}}},[t._v("\n                        "+t._s(e.title)+"\n                        "),s("span",{staticClass:"list_num"},[t._v("ï¼ˆ"+t._s(e.list.length)+"ï¼‰")])])}),0)])]),t._v(" "),s("div",{staticClass:"app-content-wrap"},[s("div",{staticClass:"app-content"},[s("router-view")],1)])])])}var A=new c.default({routes:[{path:"/",redirect:"/list"},{path:"/list",name:"list",component:j},{path:"*",name:"noFound",component:x}]}),E=[function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"my-wrap"},[t("img",{staticClass:"head",attrs:{src:s("O60+"),alt:""}}),n._v(" "),t("div",{staticClass:"text-wrap"},[t("div",[n._v("JiaoyanLin")]),n._v(" "),t("div",{staticClass:"icon-wrap"},[t("a",{staticClass:"icon",attrs:{href:"https://github.com/jiaoyanlin",target:"_blank"}},[t("img",{attrs:{src:s("qLOK"),alt:""}})]),n._v(" "),t("a",{staticClass:"icon",attrs:{href:"https://blog.csdn.net/little_blue_ljy",target:"_blank"}},[t("img",{attrs:{src:s("PAZ5"),alt:""}})])])])])}];y._withStripped=!0;s("f3/d"),s("bWfx"),s("Tze0"),s("pIFo"),s("SRfc");var S=s("Ryk6"),D=S.keys(),P={};D.forEach(function(n){var e=(n.match(/^\.\/([^\/]+)/)||[])[1],t=S(n),s=/# ([^(\n)]+)/,o=(t.match(s)||[])[1],i=t.replace(s,"").trim().replace(/\n/g," ").replace(/(\s)+/g," ").substring(0,120).replace(/(#+ )|(> )/g,"");P[e]||(P[e]=[]),P[e].push({title:o,abstract:i+"...",key:n.match(/.*\/(.+)\.md$/)[1]})});var O=P;function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,s)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(t,!0).forEach(function(n){Object(u.a)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var N=[{key:"01node",title:"nodejs express mongodb"},{key:"02webpack",title:"webpack npm"},{key:"03vue",title:"vue"},{key:"04react",title:"react react-native"},{key:"05js",title:"js"},{key:"06rollup",title:"rollup"},{key:"07å…¶ä»–",title:"å…¶ä»–"}].map(function(n){return n.list=O[n.key]||[],n}),M={name:"app",data:function(){return{typeKey:""}},computed:C({},Object(d.mapState)({nowRoute:function(n){return n.route},list:function(n){return n.list}})),watch:{nowRoute:{immediate:!0,handler:function(n){if(console.log("------route",n,this.list),"list"===n.name){var e=n.query.typeKey;this.typeKey=e||N[0].key}}}},methods:C({},Object(d.mapMutations)({changeList:"mutationsList"}),{onClickType:function(n){var e=this.nowRoute.query;if(n===e.typeKey&&!e.articleKey)return!1;this.$router.push({name:"list",query:{typeKey:n,articleKey:""}})}}),created:function(){this.changeList(N)}},R=(s("oQGF"),Object(v.a)(M,y,E,!1,null,"2836ff77",null));R.options.__file="src/views/app.vue";var q=R.exports,B=function(n){(0,n.commit)({type:"mutationsMsg",globalMsg:"æˆ‘æ˜¯ä¿®æ”¹åçš„å…¨å±€æ•°æ®~~~"})},V=function(n,e){n.globalMsg=e.globalMsg},U=function(n,e){n.list=e},F=function(n){return n.globalMsg},_={globalMsg:"æˆ‘æ˜¯å…¨å±€æ•°æ®",list:[]};r.default.use(d.default);var L=new d.default.Store({state:_,getters:i,actions:t,mutations:o}),W=s("Mb3Q");Object(W.sync)(L,A),new r.default({el:"#app",router:A,store:L,render:function(n){return n(q)}})},tjWA:function(n,e){n.exports='# Node.js+Express+MongoDB å»ºç«™å®ä¾‹ï¼ˆ3ï¼‰â€”â€” ä¸Šä¼ å›¾ç‰‡åŠå…¶ä»–æ¨¡å—\n\n## å…¶ä»–æ¨¡å—\n\nç”±äºä¸Šä¸¤ç¯‡æ–‡ç« ä¸­å·²ç»å°†å¦‚ä½•å¾€æ•°æ®åº“ä¸­æ’å…¥ã€ä¿®æ”¹æ•°æ®ç­‰åšäº†æ¼”ç¤ºï¼Œå› æ­¤è¿™ç¯‡æ–‡ç« å°±ä¸å†é‡å¤äº†ï¼Œä¸»è¦è®°å½•ä¸€äº›å¼€å‘æ—¶é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼ˆå…·ä½“å®ç°æ–¹æ³•çœ‹æºç ï¼‰ã€‚\n\n1ã€ è¿™è¾¹æ¨èä½¿ç”¨postmanè¿›è¡Œæ¥å£æµ‹è¯•ï¼Œpostmanç½‘ä¸Šæœ‰å¾ˆå¤šæ•™ç¨‹å¯ä»¥çœ‹ï¼Œä¸»è¦æä¸€ä¸‹ï¼Œåœ¨ä½¿ç”¨postmanæäº¤postè¯·æ±‚æ—¶ï¼Œæ³¨æ„bodyä¸­é€‰æ‹©x-www-form-urlencodedæ¨¡å¼æ¥å‘é€ï¼Œå¦åˆ™åå°è¿™è¾¹æ— æ³•é€šè¿‡req.body.xxxæ¥è·å–å‚æ•°ã€‚\n\n2ã€ ä½¿ç”¨mongodbæŸ¥è¯¢æ•°æ®åº“æ—¶æˆ‘ä»¬æœ‰æ—¶ä¼šä½¿ç”¨_idä½œä¸ºå‚æ•°è¿›è¡ŒæŸ¥è¯¢ï¼Œä½†æ˜¯ç›´æ¥å°†å®ƒä½œä¸ºæ¡ä»¶æ˜¯æŸ¥è¯¢ä¸åˆ°çš„ï¼Œåº”è¯¥æŒ‰ç…§ä¸‹æ–¹è¿™æ ·æ¥æŸ¥è¯¢ï¼š\n\n```javascript\nvar ObjectId = require(\'mongodb\').ObjectId;\n...\n// æ›´æ–°ä¸ªäººä¿¡æ¯\nexports.updateUserinfo = function (req, res, next) {\n    let newData = {\n        "name": req.body.name,\n        "phone": req.body.phone,\n        "motto": req.body.motto\n    };\n    if (!testTel(req.body.phone)) {\n        return res.json({\n            "code": 401,\n            "message": "æ‰‹æœºå·ç æ ¼å¼ä¸æ­£ç¡®"\n        })\n    }\n    // æ³¨æ„è¿™é‡Œç”¨ObjectId(req.cookies.id)\n    db.updateMany(\'users\', { "_id": ObjectId(req.cookies.id) }, newData, function (err, result) {\n        if (err) {\n            return res.json({\n                "code": 401,\n                "message": "æ›´æ–°å¤±è´¥"\n            })\n        }\n\n        return res.json({\n            "code": 200,\n            "message": "æ›´æ–°æˆåŠŸ"\n        })\n    })\n}\n```\n## å›¾ç‰‡ä¸Šä¼ æ¨¡å—\n\n1ã€å®‰è£…ä¾èµ– \n    `npm install formidable silly-datetime --save`\n\n2ã€å‰ç«¯ä½¿ç”¨ajaxçš„formdataè¿›è¡Œä¸Šä¼ å›¾ç‰‡ï¼ˆä¸ºäº†æµ‹è¯•ä¹Ÿå¯ç›´æ¥ç”¨postmanä¸Šä¼ ï¼Œæ³¨æ„bodyä¸­é€‰æ‹©form-dataï¼‰\n\n```html\n<div>å›¾ç‰‡ä¸Šä¼ ï¼š<input type="file" name="fileToUpload" id="fileToUpload" class="fileupload" /></div>\n<img style="width: 100px;" />\n```\n\n```javascript\n// å›¾ç‰‡ä¸Šä¼ \n$(\'.fileupload\').change(function(event) {\n    if ($(\'.fileupload\').val().length) {\n        var fileName = $(\'.fileupload\').val();\n        var extension = fileName.substring(fileName.lastIndexOf(\'.\'), fileName.length).toLowerCase();\n        if (extension == ".jpg" || extension == ".png") {\n          var data = new FormData();\n          data.append(\'fulAvatar\', $(\'#fileToUpload\')[0].files[0]);\n          $.ajax({\n              url: \'/api/uploadImg\',\n              type: \'POST\',\n              data: data,\n              cache: false,\n              contentType: false, //ä¸å¯ç¼ºå‚æ•°\n              processData: false, //ä¸å¯ç¼ºå‚æ•°\n              success: function(data) {\n                  console.log(\'-------upload img:\', data);\n              },\n              error: function() {\n                  console.log(\'error\');\n              }\n          });\n        }\n    }\n});\n\n```\n\næ³¨æ„ï¼šç”±äºæˆ‘ä»¬å†app.jsä¸­ç”¨äº†é™æ€æœåŠ¡`app.use(express.static(path.join(__dirname, â€˜publicâ€™)));`ï¼Œ\nå°†æ‰€æœ‰çš„é™æ€èµ„æºæ–‡ä»¶éƒ½æ‰˜ç®¡åˆ°publicæ–‡ä»¶å¤¹é‡Œã€‚åç»­æ“ä½œä¸­å¦‚æœéœ€è¦è°ƒç”¨publicä¸­çš„å›¾ç‰‡ä»€ä¹ˆçš„ï¼Œ\næ— è®ºä½ åœ¨å“ªä¸ªæ–‡ä»¶å¤¹ï¼Œéƒ½æŠŠè‡ªå·±å½“æˆæ˜¯åœ¨publicæ–‡ä»¶å¤¹å³å¯ã€‚\nä¾‹å¦‚è¿™è¾¹å¯ä»¥ä½¿ç”¨ç±»ä¼¼`<img style="width: 100px;" src="/avatar/0.2991991519596453.jpg" />`\næ¥å¼•ç”¨publicä¸‹avatarä¸­çš„å›¾ç‰‡\n\n3ã€åå°é¡¹ç›®ä¸­ä½¿ç”¨ï¼š\n\n```javascript\n// routes/index.jsä¸­\n// ä¸Šä¼ å›¾ç‰‡\nrouter.route(\'/api/uploadImg\').all(verifyToken).post(api.uploadImg);\n\n// routes/api.jsä¸­\nconst formidable = require(\'formidable\');\nvar sd = require("silly-datetime");\nconst fs = require(\'fs\');\nvar AVATAR_UPLOAD_FOLDER = \'/avatar/\'; // ä¸Šä¼ å›¾ç‰‡å­˜æ”¾è·¯å¾„ï¼Œæ³¨æ„åœ¨æœ¬é¡¹ç›®publicæ–‡ä»¶å¤¹ä¸‹é¢æ–°å»ºavataræ–‡ä»¶å¤¹\n\n// ä¸Šä¼ å›¾ç‰‡\nexports.uploadImg = function (req, res, next) {\n    var form = new formidable.IncomingForm();   //åˆ›å»ºä¸Šä¼ è¡¨å•\n    form.encoding = \'utf-8\';\t\t//è®¾ç½®ç¼–è¾‘\n    form.uploadDir = \'public\' + AVATAR_UPLOAD_FOLDER;\t //è®¾ç½®ä¸Šä¼ ç›®å½•\n    form.keepExtensions = true;\t //ä¿ç•™åç¼€\n    form.maxFieldsSize = 2 * 1024 * 1024;   //æ–‡ä»¶å¤§å°\n    \n    form.parse(req, function (err, fields, files) {\n    \n        if (err) {\n            return res.json({\n                "code": 500,\n                "message": "å†…éƒ¨æœåŠ¡å™¨é”™è¯¯"\n            })\n        }\n        \n        // é™åˆ¶æ–‡ä»¶å¤§å° å•ä½é»˜è®¤å­—èŠ‚ è¿™é‡Œé™åˆ¶å¤§å°ä¸º2m\n        if (files.fulAvatar.size > form.maxFieldsSize) {\n            fs.unlink(files.fulAvatar.path)\n            return res.json({\n                "code": 401,\n                "message": "å›¾ç‰‡åº”å°äº2M"\n            })\n        }\n        \n        var extName = \'\';  //åç¼€å\n        switch (files.fulAvatar.type) {\n            case \'image/pjpeg\':\n                extName = \'jpg\';\n                break;\n            case \'image/jpeg\':\n                extName = \'jpg\';\n                break;\n            case \'image/png\':\n                extName = \'png\';\n                break;\n            case \'image/x-png\':\n                extName = \'png\';\n                break;\n        }\n        \n        if (extName.length == 0) {\n            return res.json({\n                "code": 404,\n                "message": "åªæ”¯æŒpngå’Œjpgæ ¼å¼å›¾ç‰‡"\n            })\n        }\n        \n        //ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—silly-datetime\n        var t = sd.format(new Date(), \'YYYYMMDDHHmmss\');\n        //ç”Ÿæˆéšæœºæ•°\n        var ran = parseInt(Math.random() * 8999 + 10000);\n        \n        // ç”Ÿæˆæ–°å›¾ç‰‡åç§°\n        var avatarName = t + \'_\' + ran + \'.\' + extName;\n        // æ–°å›¾ç‰‡è·¯å¾„\n        var newPath = form.uploadDir + avatarName;\n        \n        // æ›´æ”¹åå­—å’Œè·¯å¾„\n        fs.rename(files.fulAvatar.path, newPath, function (err) {\n            if (err) {\n                return res.json({\n                    "code": 401,\n                    "message": "å›¾ç‰‡ä¸Šä¼ å¤±è´¥"\n                })\n            }\n            return res.json({\n                "code": 200,\n                "message": "ä¸Šä¼ æˆåŠŸ",\n                result: AVATAR_UPLOAD_FOLDER + avatarName\n            })\n        })\n    });\n\n}\n```\n\nä¸Šä¼ æ–‡ä»¶æµ‹è¯•åï¼Œå¯ä»¥åˆ°ä¸Šä¼ æ–‡ä»¶å¤¹public/avatarä¸‹æŸ¥çœ‹æ˜¯å¦æˆåŠŸ\n\n> æºç ï¼š [GitHub](https://github.com/jiaoyanlin/myNodeProject)\n\nä¸‹ä¸€ç¯‡æ–‡ç« æ‰“ç®—ä½¿ç”¨reactç®€å•æ„å»ºå‰ç«¯é¡µé¢ï¼Œä½¿ç”¨è¿™è¾¹å¼€å‘çš„æ¥å£è¿›è¡Œå¼€å‘ã€‚\n'},u4UV:function(n,e,t){"use strict";var s=t("uz/1");t.n(s).a},"uz/1":function(n,e,t){},vGAL:function(n,e,t){},yLpj:function(n,e,t){n.exports=t("JG2H")(0)}},[["tjUo","runtime~index","chunk-libs"]]]);